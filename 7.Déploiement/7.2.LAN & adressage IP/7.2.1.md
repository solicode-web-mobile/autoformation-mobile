---
title: 1. Switch vs routeur
permalink: /deploiement/switch-routeur-topologies-rj45/
layout: home
nav_order: 1
parent: 7.2. LAN & adressage IP
---

# ğŸ“˜ Chapitre 7.2.1 â€” Switch vs routeur, topologies, cÃ¢blage RJ45

## ğŸ“’ Glossaire minute
- **Switch (commutateur)** : Ã©quipe le **LAN** (niveau **2**), commute par **MAC** et construit une **table dâ€™adresses**.
- **Routeur** : relie **plusieurs rÃ©seaux** (niveau **3**), choisit des routes (IP), fait souvent **NAT/DHCP**/Pare-feu.
- **Port access / trunk** : port **access** = 1 VLAN ; **trunk** = plusieurs VLAN (tag **802.1Q**). *(aperÃ§u)*
- **Uplink** : liaison vers un switch/routeur amont.
- **STP** : **Spanning Tree Protocol** pour Ã©viter les **boucles** de niveau 2.
- **RJ45** : connecteur cuivre Ethernet ; **Cat5e/Cat6/Cat6a** = catÃ©gories de cÃ¢ble.
- **MDI/MDI-X** : croisement auto des paires (les cÃ¢bles croisÃ©s ne sont presque plus nÃ©cessaires).
- **PoE** : alimentation via Ethernet (802.3af/at/bt).

---

## ğŸ¯ Objectifs
- Distinguer **switch** et **routeur** (rÃ´les, cas dâ€™usage).
- Choisir une **topologie LAN** robuste (Ã©toile, Ã©toile Ã©tendueâ€¦) et Ã©viter les **boucles**.
- CÃ¢bler correctement en **RJ45** (catÃ©gories, longueurs, bonnes pratiques).
- Diagnostiquer **lien, vitesse, duplex** et problÃ¨mes courants de cÃ¢blage.

## âœ… PrÃ©-requis
- C7.1 (NIC/duplex/MTU) â€¢ Notions IP de base (adressage sera dÃ©taillÃ© au 7.2.3).

---

## 1) Switch vs routeur â€” qui fait quoi ?

| CritÃ¨re | **Switch (L2)** | **Routeur (L3)** |
|---|---|---|
| RÃ´le | Relie des hÃ´tes **dans le mÃªme rÃ©seau** | Relie **des rÃ©seaux** diffÃ©rents |
| DÃ©cision | Par **MAC** (trames) | Par **IP** (paquets) |
| Fonctions clÃ©s | Table MAC, STP, VLAN (L2) | Routage, NAT, DHCP, ACL/pare-feu |
| Exemples | PC â†” switch â†” imprimante | LAN â†” routeur â†” Internet |
| Quand ? | AgrÃ©ger les postes dâ€™un mÃªme sous-rÃ©seau | AccÃ©der Ã  Internet, inter-VLAN, liaisons site-Ã -site |

> âš ï¸ Certains **switches L3** cumulent L2+L3 (routage inter-VLAN). PÃ©dagogiquement, gardons **switch=L2**, **routeur=L3**.

---

## 2) Ports, VLAN & uplinks (aperÃ§u)
- **Access** : un seul VLAN (ex. VLAN 10 â€œAdminâ€).  
- **Trunk** : plusieurs VLAN (tag **802.1Q**) entre **switch â†” switch** ou **switch â†” routeur L3**.
- **Uplink** : port dÃ©diÃ© Ã  la montÃ©e vers cÅ“ur de rÃ©seau/distribution.

```mermaid
flowchart LR
  R[Routeur/L3] ---|Trunk 802.1Q| S1[Switch]
  S1 ---|Access VLAN10| PC1[PC Admin]
  S1 ---|Access VLAN20| PC2[PC InvitÃ©s]
````

> Les **trunks** transportent plusieurs VLAN ; les **ports access** desservent les postes.

---

## 3) Topologies LAN & boucles

* **Ã‰toile** (â­ recommandÃ©) : tous les hÃ´tes vers un **switch central**.
* **Ã‰toile Ã©tendue** : switchs dâ€™Ã©tage reliÃ©s au cÅ“ur (distribution).
* **ChaÃ®nage** (Ã  Ã©viter en production) : switchs â€œen sÃ©rieâ€ â†’ risque de panne en cascade et boucles.
* **Anneau/Maillage** : redondance â†’ nÃ©cessite **STP** et conception rigoureuse.

```mermaid
flowchart TB
  C[Switch CÅ“ur]:::core
  C --- S1[Switch Ã‰t. 1]
  C --- S2[Switch Ã‰t. 2]
  S1 --- PC1
  S1 --- PC2
  S2 --- PC3
  S2 --- PC4
classDef core fill:#eef,stroke:#88f,stroke-width:1px;
```

> **Boucles L2** = tempÃªte de broadcast. Activez **STP** et **Ã©vitez** les cÃ¢bles â€œretourâ€ involontaires.

---

## 4) CÃ¢blage RJ45 â€” catÃ©gories, longueurs, normes

### 4.1 Choisir la bonne catÃ©gorie

| CatÃ©gorie | DÃ©bit visÃ© |        Distance typique | Remarques                 |
| --------- | ---------: | ----------------------: | ------------------------- |
| **Cat5e** |     1 Gb/s |                   100 m | OK pour 1G ; 2.5G parfois |
| **Cat6**  |  1â€“10 Gb/s | 1G: 100 m â€¢ 10G: \~55 m | Blindage meilleur         |
| **Cat6a** |    10 Gb/s |                   100 m | RecommandÃ© pour 10G       |

* **Lien permanent** â‰¤ **90 m** + **2Ã—5 m** cordons â†’ **100 m** max normatif.
* Ã‰viter **angles vifs**, **torsions**, proximitÃ© sources **EMI** (alims, moteurs).
* **PoE** : attention Ã  la qualitÃ©/connectique (chauffe, pertes).

### 4.2 SchÃ©ma de brochage & standards

* **T568A** et **T568B** : choisir **un standard** et le **tenir** sur tout le site.
* **Droit vs croisÃ©** : la plupart des Ã©quipements gÃ¨rent **auto MDI-X** â†’ cÃ¢ble **droit** standard suffit.

### 4.3 Patch panel & Ã©tiquetage

* Terminer sur **panneau de brassage**, utiliser **keystones** adaptÃ©s, **testeur** (continuitÃ©/diaphonie).
* **Ã‰tiqueter** ports, baies et prises murales (plan de brassage).

---

## 5) Diagnostic rapide â€” lien, vitesse & duplex

* VÃ©rifier **LED** lien/activitÃ© sur les ports.
* Sur le poste : `ipconfig` / `ifconfig` / `ip a` pour voir lâ€™interface **UP**.
* Confirmer **vitesse/duplex** (cf. 7.1.4) et **cÃ¢ble** (catÃ©gorie/Ã©tat).
* Tester la **chaÃ®ne** : ping **passerelle**, puis **Internet** (ex. 1.1.1.1), puis **DNS**.
* **iPerf** (LAN) pour un test de **dÃ©bit** de bout en bout.

---

## 6) Cas frÃ©quents & correctifs

* **DÃ©bit bloquÃ© Ã  100 Mb/s** : cÃ¢ble/prise **dÃ©gradÃ©**, vieux switch, nÃ©gociation ratÃ©e â†’ **remplacer cÃ¢ble**, forcer port 1G seulement si nÃ©cessaire.
* **Pertes de paquets** : connecteur mal serti, cÃ¢ble trop long/pliÃ©, interfÃ©rences â†’ **recÃ¢bler**.
* **Boucle** crÃ©Ã©e par un pont involontaire â†’ **dÃ©brancher** le cÃ¢ble en trop, activer **STP**.
* **PC invitÃ© voit Admin** (VLAN) : erreur de configuration **access/trunk** â†’ corriger le **VLAN**.

---

## ğŸ”§ Cheatsheet

* **Topologie** : prÃ©fÃ©rer **Ã©toile** / Ã©toile Ã©tendue.
* **CÃ¢ble** : **Cat6a** si 10G, sinon **Cat6/5e** soignÃ© suffit pour 1G.
* **Longueur** : â‰¤ **100 m** bout-Ã -bout (norme).
* **Ã‰tiquetage** : ports/prises **numÃ©rotÃ©s**, plan de brassage **Ã  jour**.
* **STP** : activer pour prÃ©venir boucles.

---

## ğŸ§ª Exercices (avec attentes)

1. **Dessiner** le schÃ©ma LAN de votre salle (Mermaid ou image) et repÃ©rer **uplinks** & **accÃ¨s**.
2. **VÃ©rifier** 3 liaisons (PCâ†”Switch) : catÃ©gorie de cÃ¢ble, longueur estimÃ©e, Ã©tat des LED, **vitesse** nÃ©gociÃ©e.
3. Proposer **2 amÃ©liorations** (ex. Ã©toile Ã©tendue plutÃ´t que chaÃ®nage, cÃ¢ble Cat6a pour lien critique).

## ğŸ“¦ Livrables attendus

* SchÃ©ma **topologie** (fichier `.md` avec Mermaid ou image).
* Tableau **ports/cÃ¢bles** (poste, port, VLAN/usage, cat, Ã©tat, remarques).
* Check-list **brassage** (Ã©tiquetage, slack, rayon de courbure, testeur).

## âœ… Check-list (DoD)

* [ ] Je sais **quand** utiliser un **switch** vs un **routeur**.
* [ ] Ma **topologie** est en **Ã©toile** (ou Ã©tendue) sans boucles.
* [ ] Mes **cÃ¢bles** et **longueurs** respectent la **norme** ; Ã©tiquetage prÃ©sent.
* [ ] Les **liens** nÃ©gocient Ã  la **bonne vitesse/duplex**, tests ping/DNS ok.

> **Ã‰tape suivante :** passer Ã  **7.2.2** (Segmentation VLAN â€” aperÃ§u) puis **7.2.3** (Adressage IPv4/CIDR).
