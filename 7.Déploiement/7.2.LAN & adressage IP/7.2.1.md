---
title: 1. Switch vs routeur
permalink: /deploiement/switch-routeur-topologies-rj45/
layout: home
nav_order: 1
parent: 7.2. LAN & adressage IP
---

# 📘 Chapitre 7.2.1 — Switch vs routeur, topologies, câblage RJ45

## 📒 Glossaire minute
- **Switch (commutateur)** : équipe le **LAN** (niveau **2**), commute par **MAC** et construit une **table d’adresses**.
- **Routeur** : relie **plusieurs réseaux** (niveau **3**), choisit des routes (IP), fait souvent **NAT/DHCP**/Pare-feu.
- **Port access / trunk** : port **access** = 1 VLAN ; **trunk** = plusieurs VLAN (tag **802.1Q**). *(aperçu)*
- **Uplink** : liaison vers un switch/routeur amont.
- **STP** : **Spanning Tree Protocol** pour éviter les **boucles** de niveau 2.
- **RJ45** : connecteur cuivre Ethernet ; **Cat5e/Cat6/Cat6a** = catégories de câble.
- **MDI/MDI-X** : croisement auto des paires (les câbles croisés ne sont presque plus nécessaires).
- **PoE** : alimentation via Ethernet (802.3af/at/bt).

---

## 🎯 Objectifs
- Distinguer **switch** et **routeur** (rôles, cas d’usage).
- Choisir une **topologie LAN** robuste (étoile, étoile étendue…) et éviter les **boucles**.
- Câbler correctement en **RJ45** (catégories, longueurs, bonnes pratiques).
- Diagnostiquer **lien, vitesse, duplex** et problèmes courants de câblage.

## ✅ Pré-requis
- C7.1 (NIC/duplex/MTU) • Notions IP de base (adressage sera détaillé au 7.2.3).

---

## 1) Switch vs routeur — qui fait quoi ?

| Critère | **Switch (L2)** | **Routeur (L3)** |
|---|---|---|
| Rôle | Relie des hôtes **dans le même réseau** | Relie **des réseaux** différents |
| Décision | Par **MAC** (trames) | Par **IP** (paquets) |
| Fonctions clés | Table MAC, STP, VLAN (L2) | Routage, NAT, DHCP, ACL/pare-feu |
| Exemples | PC ↔ switch ↔ imprimante | LAN ↔ routeur ↔ Internet |
| Quand ? | Agréger les postes d’un même sous-réseau | Accéder à Internet, inter-VLAN, liaisons site-à-site |

> ⚠️ Certains **switches L3** cumulent L2+L3 (routage inter-VLAN). Pédagogiquement, gardons **switch=L2**, **routeur=L3**.

---

## 2) Ports, VLAN & uplinks (aperçu)
- **Access** : un seul VLAN (ex. VLAN 10 “Admin”).  
- **Trunk** : plusieurs VLAN (tag **802.1Q**) entre **switch ↔ switch** ou **switch ↔ routeur L3**.
- **Uplink** : port dédié à la montée vers cœur de réseau/distribution.

```mermaid
flowchart LR
  R[Routeur/L3] ---|Trunk 802.1Q| S1[Switch]
  S1 ---|Access VLAN10| PC1[PC Admin]
  S1 ---|Access VLAN20| PC2[PC Invités]
````

> Les **trunks** transportent plusieurs VLAN ; les **ports access** desservent les postes.

---

## 3) Topologies LAN & boucles

* **Étoile** (⭐ recommandé) : tous les hôtes vers un **switch central**.
* **Étoile étendue** : switchs d’étage reliés au cœur (distribution).
* **Chaînage** (à éviter en production) : switchs “en série” → risque de panne en cascade et boucles.
* **Anneau/Maillage** : redondance → nécessite **STP** et conception rigoureuse.

```mermaid
flowchart TB
  C[Switch Cœur]:::core
  C --- S1[Switch Ét. 1]
  C --- S2[Switch Ét. 2]
  S1 --- PC1
  S1 --- PC2
  S2 --- PC3
  S2 --- PC4
classDef core fill:#eef,stroke:#88f,stroke-width:1px;
```

> **Boucles L2** = tempête de broadcast. Activez **STP** et **évitez** les câbles “retour” involontaires.

---

## 4) Câblage RJ45 — catégories, longueurs, normes

### 4.1 Choisir la bonne catégorie

| Catégorie | Débit visé |        Distance typique | Remarques                 |
| --------- | ---------: | ----------------------: | ------------------------- |
| **Cat5e** |     1 Gb/s |                   100 m | OK pour 1G ; 2.5G parfois |
| **Cat6**  |  1–10 Gb/s | 1G: 100 m • 10G: \~55 m | Blindage meilleur         |
| **Cat6a** |    10 Gb/s |                   100 m | Recommandé pour 10G       |

* **Lien permanent** ≤ **90 m** + **2×5 m** cordons → **100 m** max normatif.
* Éviter **angles vifs**, **torsions**, proximité sources **EMI** (alims, moteurs).
* **PoE** : attention à la qualité/connectique (chauffe, pertes).

### 4.2 Schéma de brochage & standards

* **T568A** et **T568B** : choisir **un standard** et le **tenir** sur tout le site.
* **Droit vs croisé** : la plupart des équipements gèrent **auto MDI-X** → câble **droit** standard suffit.

### 4.3 Patch panel & étiquetage

* Terminer sur **panneau de brassage**, utiliser **keystones** adaptés, **testeur** (continuité/diaphonie).
* **Étiqueter** ports, baies et prises murales (plan de brassage).

---

## 5) Diagnostic rapide — lien, vitesse & duplex

* Vérifier **LED** lien/activité sur les ports.
* Sur le poste : `ipconfig` / `ifconfig` / `ip a` pour voir l’interface **UP**.
* Confirmer **vitesse/duplex** (cf. 7.1.4) et **câble** (catégorie/état).
* Tester la **chaîne** : ping **passerelle**, puis **Internet** (ex. 1.1.1.1), puis **DNS**.
* **iPerf** (LAN) pour un test de **débit** de bout en bout.

---

## 6) Cas fréquents & correctifs

* **Débit bloqué à 100 Mb/s** : câble/prise **dégradé**, vieux switch, négociation ratée → **remplacer câble**, forcer port 1G seulement si nécessaire.
* **Pertes de paquets** : connecteur mal serti, câble trop long/plié, interférences → **recâbler**.
* **Boucle** créée par un pont involontaire → **débrancher** le câble en trop, activer **STP**.
* **PC invité voit Admin** (VLAN) : erreur de configuration **access/trunk** → corriger le **VLAN**.

---

## 🔧 Cheatsheet

* **Topologie** : préférer **étoile** / étoile étendue.
* **Câble** : **Cat6a** si 10G, sinon **Cat6/5e** soigné suffit pour 1G.
* **Longueur** : ≤ **100 m** bout-à-bout (norme).
* **Étiquetage** : ports/prises **numérotés**, plan de brassage **à jour**.
* **STP** : activer pour prévenir boucles.

---

## 🧪 Exercices (avec attentes)

1. **Dessiner** le schéma LAN de votre salle (Mermaid ou image) et repérer **uplinks** & **accès**.
2. **Vérifier** 3 liaisons (PC↔Switch) : catégorie de câble, longueur estimée, état des LED, **vitesse** négociée.
3. Proposer **2 améliorations** (ex. étoile étendue plutôt que chaînage, câble Cat6a pour lien critique).

## 📦 Livrables attendus

* Schéma **topologie** (fichier `.md` avec Mermaid ou image).
* Tableau **ports/câbles** (poste, port, VLAN/usage, cat, état, remarques).
* Check-list **brassage** (étiquetage, slack, rayon de courbure, testeur).

## ✅ Check-list (DoD)

* [ ] Je sais **quand** utiliser un **switch** vs un **routeur**.
* [ ] Ma **topologie** est en **étoile** (ou étendue) sans boucles.
* [ ] Mes **câbles** et **longueurs** respectent la **norme** ; étiquetage présent.
* [ ] Les **liens** négocient à la **bonne vitesse/duplex**, tests ping/DNS ok.

> **Étape suivante :** passer à **7.2.2** (Segmentation VLAN — aperçu) puis **7.2.3** (Adressage IPv4/CIDR).
