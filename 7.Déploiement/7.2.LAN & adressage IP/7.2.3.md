---
title: 3. IPv4, masque, CIDR, passerelle & DNS
layout: home
nav_order: 3
parent: 7.2. LAN & adressage IP
permalink: /deploiement/ipv4-cidr-passerelle-dns/
code: 7.2.3
competence: C7
autoformation: "C7.2"
ua: "7.2.U2"
duree_h: 1.5
objectif: "Calculer r√©seau/broadcast/plage depuis un CIDR, choisir la GW et configurer/v√©rifier le DNS."
notions_nouvelles: ["CIDR", "R√©seau/Broadcast", "Plages priv√©es", "Gateway par d√©faut", "DNS A/AAAA/CNAME/PTR/TTL", "Outils dig/nslookup"]
fil_rouge: "Plan d‚Äôadressage pour plusieurs VLANs"
livrable_chapitre: "Fiche m√©thode + 10 ex. corrig√©s ; mini plan d‚Äôadressage (2 VLANs) + journal de tests"
alimentation_prototype: "Adressage coh√©rent pour services & routeur"
alimentation_miniprojet: "Base IP document√©e pour DHCP/pare-feu"
---

# üìò Chapitre 7.2.3 ‚Äî IPv4, masque, CIDR, passerelle & DNS (aper√ßu)

## üìí Glossaire minute
- **IPv4** : adresse sur **32 bits** (ex. `192.168.10.42`).  
- **Masque** / **CIDR** : taille du r√©seau (ex. `255.255.255.0` = **/24**).  
- **R√©seau / Broadcast** : bornes d‚Äôun sous-r√©seau ; **h√¥tes utilisables** = adresses entre deux.  
- **Passerelle (GW)** : route par d√©faut vers l‚Äôext√©rieur du sous-r√©seau.  
- **DNS** : service de **r√©solution de noms** (A/AAAA, CNAME, **TTL**, PTR).  
- **DHCP** : attribue IP/masque/GW/DNS automatiquement (Options **3**=GW, **6**=DNS).

---

## üéØ Objectifs
- Calculer r√©seau, broadcast et **plage d‚Äôh√¥tes** √† partir d‚Äôune adresse **CIDR**.  
- Concevoir un **plan d‚Äôadressage** simple et choisir la **passerelle**.  
- Configurer et v√©rifier la **r√©solution DNS** (aper√ßu).

## ‚úÖ Pr√©-requis
- 7.2.1 (switch/routeur, topologies), 7.2.2 (VLAN/ports).

---

## 1) IPv4 ‚Äî bases utiles
### 1.1 Plages priv√©es & sp√©ciales
| Usage | Plage | CIDR |
|---|---|---|
| **Priv√©es** | `10.0.0.0 ‚Äì 10.255.255.255` | /8 |
| | `172.16.0.0 ‚Äì 172.31.255.255` | /12 |
| | `192.168.0.0 ‚Äì 192.168.255.255` | /16 |
| **Loopback** | `127.0.0.0/8` | ‚Äî |
| **Link-local** | `169.254.0.0/16` | ‚Äî |
| **Multicast** | `224.0.0.0/4` | ‚Äî |

> Pour les LANs, on choisit **une** plage priv√©e, puis on d√©coupe en sous-r√©seaux.

---

## 2) Masque & CIDR ‚Äî compter les h√¥tes
- Notation **CIDR** : `/p` = **p** bits de r√©seau (donc **32‚àíp** bits h√¥tes).  
- H√¥tes utilisables : `2^(32‚àíp) ‚àí 2` *(r√©seau + broadcast non utilisables)*.

| CIDR | Masque d√©cimal | H√¥tes utilisables |
|:--:|:--:|--:|
| /30 | 255.255.255.252 | 2 |
| /29 | 255.255.255.248 | 6 |
| /28 | 255.255.255.240 | 14 |
| /27 | 255.255.255.224 | 30 |
| /26 | 255.255.255.192 | 62 |
| /25 | 255.255.255.128 | 126 |
| /24 | 255.255.255.0 | 254 |
| /23 | 255.255.254.0 | 510 |
| /16 | 255.255.0.0 | 65 534 |

> **Astuce** : taille de bloc de l‚Äôoctet concern√© = `256 ‚àí valeur_octet_masque` (ex. `/26` ‚Üí `192` ‚Üí **bloc 64**).

---

## 3) Savoir calculer : r√©seau, broadcast, plage
### Ex. A ‚Äî `192.168.10.34/27`
1. `/27` ‚Üí masque `255.255.255.224` ‚Üí **bloc** = `256‚àí224=32`.  
2. Les sous-r√©seaux du /24 sont : `.0, .32, .64, .96, .128, .160, .192, .224`.  
3. **34** tombe dans le bloc **.32‚Äì.63**.  
4. **R√©seau** = `192.168.10.32` ; **Broadcast** = `192.168.10.63`.  
5. **H√¥tes** = `192.168.10.33 ‚Üí 192.168.10.62` (30 adresses).

### Ex. B ‚Äî `10.1.5.200/26`
- `/26` ‚Üí masque `255.255.255.192` ‚Üí bloc **64**.  
- Les bornes de l‚Äôoctet sont `.0, .64, .128, .192`.  
- 200 ‚àà **.192‚Äì.255** ‚Üí R√©seau `10.1.5.192`, Broadcast `10.1.5.255`.  
- H√¥tes `10.1.5.193‚Äì254` (62).

---

## 4) Passerelle (Default Gateway)
- En pratique : choisir **la 1 ≥·µâ** (`.1`) ou **la derni√®re** (`.254`) adresse **utilisable** du sous-r√©seau.  
- **Consistance** = cl√© (ex. toujours `.1` pour la GW).  
- En **DHCP**, publier la GW via **Option 3**.

---

## 5) DNS ‚Äî notions essentielles (aper√ßu)
- **A** : nom ‚Üí IPv4 ; **AAAA** : nom ‚Üí IPv6.  
- **CNAME** : alias vers un autre nom.  
- **PTR** : r√©solution **inverse** (IP ‚Üí nom).  
- **TTL** : dur√©e de mise en cache.  
- En **DHCP**, publier DNS via **Option 6** (ex. `192.168.10.10` ou **1.1.1.1/8.8.8.8** en secours).

### V√©rifier la r√©solution
```bash
# Linux/macOS
dig www.example.com +short     # ou: nslookup www.example.com
getent hosts www.example.com   # r√©solveur syst√®me

# Windows
nslookup www.example.com
````

---

## 6) Exemple ‚Äî Plan d‚Äôadressage (extrait)

| VLAN         | R√©seau       | CIDR | GW           | Plage DHCP         | DNS                    |
| ------------ | ------------ | ---: | ------------ | ------------------ | ---------------------- |
| Admin (10)   | 192.168.10.0 |  /24 | 192.168.10.1 | 192.168.10.100‚Äì200 | 192.168.10.10, 1.1.1.1 |
| Invit√©s (20) | 192.168.20.0 |  /24 | 192.168.20.1 | 192.168.20.50‚Äì150  | 1.1.1.1, 8.8.8.8       |

> Ajuster la **taille** des sous-r√©seaux (ex. `/26`, `/27`) selon le **nombre d‚Äôh√¥tes** par VLAN.

---

## 7) Commandes utiles

```bash
# Voir IP/masque/GW
ip a            # (Linux) adresses
ip route        # (Linux) passerelle par d√©faut
ipconfig /all   # (Windows) tout le r√©seau

# Tester connectivit√©
ping 192.168.10.1          # ping GW
ping 1.1.1.1               # ping Internet
curl -I http://example.com # test HTTP + DNS
```

---

## üß™ Exercices (avec corrections)

1. Donnez **r√©seau/broadcast/plage** pour `192.168.1.130/26`.
   ‚Üí Bloc 64, r√©seau **192.168.1.128**, broadcast **192.168.1.191**, h√¥tes **.129‚Äì.190**.
2. D√©couper `192.168.50.0/24` en **2 sous-r√©seaux √©gaux**.
   ‚Üí **/25** : `192.168.50.0/25` (GW .1) et `192.168.50.128/25` (GW .129).
3. Quel **CIDR** minimum pour **40 h√¥tes** ?
   ‚Üí **/26** (62 h√¥tes utilisables).
4. Configurez une IP **statique** `192.168.10.10/24`, **GW** `.1`, **DNS** `1.1.1.1` (sur papier/commande).

---

## üì¶ Livrables attendus

* Fiche **m√©thode de calcul** (CIDR ‚Üí r√©seau/broadcast/plage) + 10 exemples corrig√©s.
* Extrait **plan d‚Äôadressage** pour 2 VLANs avec **GW/DHCP/DNS**.
* Journal de **tests** (`ip a`/`ipconfig`, `ping`, `dig/nslookup`, `curl -I`).

## ‚úÖ Check-list (DoD)

* [ ] Je calcule **r√©seau/broadcast/plage** √† partir d‚Äôune adresse **CIDR**.
* [ ] Je choisis une **GW** coh√©rente et je sais la publier en **DHCP**.
* [ ] Je v√©rifie la **r√©solution DNS** et j‚Äôexplique **A/CNAME/TTL** (aper√ßu).
* [ ] Mon **plan d‚Äôadressage** couvre les besoins (h√¥tes/VLAN) sans gaspillage.
