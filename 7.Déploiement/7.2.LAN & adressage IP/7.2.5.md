---
title: 5. ping, tracert/tracepath, ipconfig/ifconfig
layout: home
nav_order: 5
parent: 7.2. LAN & adressage IP
permalink: /deploiement/ping-trace-ipconfig/
code: 7.2.5
competence: C7
autoformation: "C7.2"
ua: "7.2.U3"
duree_h: 1.5
objectif: "Diagnostiquer une panne L3 en 5 minutes avec ipconfig/ip a, ping et traceroute/tracepath."
notions_nouvelles: ["ICMP", "TTL", "RTT", "Hops", "PMTU", "ProcÃ©dure de diag LANâ†’Internetâ†’DNS"]
fil_rouge: "Runbook de dÃ©pannage rapide pour postes et VLANs"
livrable_chapitre: "Journal de diagnostic + tableau symptÃ´meâ†’commandeâ†’action + trace annotÃ©"
alimentation_prototype: "ObservabilitÃ© de base bout-Ã -bout"
alimentation_miniprojet: "MÃ©thodo terrain pour tickets rÃ©seau"
---


# ðŸ“˜ Chapitre 7.2.5 â€” `ping`, `tracert/tracepath`, `ipconfig/ifconfig`

## ðŸ“’ Glossaire minute
- **ICMP** : protocole de contrÃ´le utilisÃ© par `ping` et (souvent) `traceroute`.
- **TTL** (*Time To Live*) : compteur de sauts ; Ã©vite les boucles.
- **RTT** : temps aller-retour (`ms`) dâ€™une requÃªte.
- **Hop** : routeur intermÃ©diaire (saut) sur le chemin.
- **MTU** : taille max dâ€™un paquet sur un lien (cf. 7.1.4).
- **Interface** : carte rÃ©seau logique (ex. `Ethernet`, `Wi-Fi`, `eth0`, `wlan0`).

---

## ðŸŽ¯ Objectifs
- **Identifier** lâ€™Ã©tat rÃ©seau local avec `ipconfig/ifconfig` (IP, masque, passerelle).  
- **VÃ©rifier** la connectivitÃ© (`ping`) locale, passerelle, Internet, nom de domaine.  
- **Observer** le chemin de bout en bout (`tracert/tracepath`) et interprÃ©ter les sauts.  
- **Diagnostiquer** rapidement une panne de couche 3 (IP/route/ICMP/DNS).

## âœ… PrÃ©-requis
- 7.2.3 (IPv4/CIDR/GW/DNS), 7.2.4 (DHCP), 7.1.4 (NIC/duplex/MTU).

---

## 1) Voir la configuration de lâ€™interface

### Windows â€” `ipconfig`
```powershell
ipconfig /all
````

**Ã€ relever** : *Adresse IPv4*, *Masque*, *Passerelle par dÃ©faut*, *Serveurs DNS*, *DHCP activÃ©*, *Adresse MAC*.

### Linux/macOS â€” `ip` (prÃ©fÃ©rÃ©) / `ifconfig`

```bash
ip a           # adresses et Ã©tat des interfaces
ip route       # table de routage (passerelle par dÃ©faut)
# ou (legacy) :
ifconfig -a
route -n
```

**Ã€ relever** : interface **UP**, adresse `inet`, **/CIDR**, `default via` (GW), DNS dans `/etc/resolv.conf` (Linux).

> ðŸ”Ž Si lâ€™IP commence par **169.254.x.x** (APIPA) â†’ **pas de DHCP** (cf. 7.2.4).

---

## 2) Tester la connectivitÃ© â€” `ping`

### Ordre recommandÃ©

1. **Boucle locale** :

   * Windows/Linux/macOS : `ping 127.0.0.1` (ou `ping ::1` en IPv6)
     â†’ Valide la **pile TCP/IP** locale.
2. **Propre adresse** : `ping <mon_ip>` â†’ carte **UP** ?
3. **Passerelle** : `ping <gateway>` â†’ lien LAN OK ?
4. **Internet (IP)** : `ping 1.1.1.1` â†’ sortie Internet **sans DNS** ?
5. **Nom de domaine** : `ping www.example.com` â†’ **DNS** OK ?

### Options utiles

* Windows :

```powershell
ping -n 5 8.8.8.8     # nombre dâ€™Ã©chos
ping -4 www.ex.com    # forcer IPv4 (ou -6 pour IPv6)
ping -f -l 1472 1.1.1.1   # DF=Don't Fragment, taille payload (test MTU)
```

* Linux/macOS :

```bash
ping -c 5 8.8.8.8     # nombre dâ€™Ã©chos
ping -4 www.ex.com    # forcer IPv4 (ou -6)
ping -M do -s 1472 1.1.1.1   # test MTU (DF)
```

### InterprÃ©ter les rÃ©ponses

* **Reply** + RTT stable â†’ OK.
* **Destination host unreachable** â†’ route/GW manquante du **cÃ´tÃ© local** ou hop intermÃ©diaire.
* **Request timed out** â†’ pas de rÃ©ponse (filtrage ICMP, perte, IP injoignable).
* **% de pertes** â†’ problÃ¨me lien/charge/filtrage.

---

## 3) Suivre le chemin â€” `tracert` / `tracepath` / `traceroute`

### Windows â€” `tracert`

```powershell
tracert www.example.com
tracert -d 8.8.8.8   # ne rÃ©sout pas les noms (plus rapide)
```

### Linux/macOS â€” `tracepath` (simple) / `traceroute`

```bash
tracepath www.example.com
traceroute -n 8.8.8.8      # version classique, sortie en IP
traceroute -I 8.8.8.8      # utiliser ICMP (au lieu dâ€™UDP par dÃ©faut selon distro)
```

**Lecture**

* Chaque ligne = **saut** (routeur).
* `* * *` = pas de rÃ©ponse (filtrage/latence).
* TTL qui stagne/loop â†’ possible **boucle de routage**.
* Saut 1 = **passerelle** (ou CPE). Beaucoup de \* au dÃ©but â†’ **NAT/pare-feu**.

> ðŸ’¡ `tracepath` affiche souvent la **PMTU** (utile si MTU cassÃ©e sur le chemin).

---

## 4) Mini-procÃ©dure de diagnostic (5 min)

1. `ipconfig /all` **ou** `ip a`
   â†’ IP cohÃ©rente ? masque ? **GW** prÃ©sente ? **DNS** publiÃ© ?
2. `ping 127.0.0.1` â†’ OK ?
3. `ping <mon_ip>` â†’ OK ? (sinon interface down)
4. `ping <gateway>` â†’ si KO : lien LAN/cÃ¢ble/duplex/VLAN.
5. `ping 1.1.1.1` â†’ si OK ici mais pas `ping www.example.com` â†’ **DNS**.
6. `tracert/tracepath 1.1.1.1` â†’ bloquÃ© oÃ¹ ? (boucle, NAT, FAI)
7. Tester **MTU** si gros transferts Ã©chouent (`-f/-M do -s`).

---

## 5) Cas frÃ©quents & correctifs

* **APIPA 169.254.x.x** : serveur DHCP indisponible / port sur mauvais VLAN â†’ vÃ©rifier **DHCP/relay** (7.2.4).
* **GW injoignable** : mauvais **CIDR**, port switch sur mauvais **VLAN**, cÃ¢ble HS.
* **DNS KO** : `ping 1.1.1.1` OK mais nom KO â†’ corriger **Option 6** DHCP / `/etc/resolv.conf`.
* **ICMP filtrÃ©** : certains hÃ´tes bloquent `ping` â†’ tester **TCP** (ex. `curl -I http://...`) et `traceroute -T` si dispo.
* **MTU** : `ping` petits paquets OK, gros KO â†’ ajuster **MTU/MSS** (VPN/tunnel).

---

## 6) Cheatsheet â€” commandes utiles

### Windows

```powershell
ipconfig /all
ping -n 4 8.8.8.8
ping -4 www.wikipedia.org
tracert -d 1.1.1.1
route print
```

### Linux/macOS

```bash
ip a
ip route
ping -c 4 8.8.8.8
ping -M do -s 1472 1.1.1.1   # test MTU
tracepath 1.1.1.1
traceroute -n 8.8.8.8
```

---

## ðŸ§ª Exercices (avec attentes)

1. **Relever** votre configuration (capture `ipconfig /all` ou `ip a` + `ip route`) et **interprÃ©ter** IP/masque/GW/DNS.
2. **Tester** la chaÃ®ne : `ping` **GW** â†’ **IP Internet** â†’ **nom**. Conclure (oÃ¹ Ã§a casse ?).
3. **Tracer** `tracert/tracepath` vers `1.1.1.1` et **commenter** les 3 premiers sauts.
4. **MTU** : trouver la plus grande taille qui passe sans fragmentation (`-f/-l` ou `-M do -s`) et **expliquer** le contexte (VPN ?).

## ðŸ“¦ Livrables attendus

* Journal de **diagnostic** (commandes, sorties clÃ©s, analyse).
* Tableau **symptÃ´me â†’ commande â†’ interprÃ©tation â†’ action**.
* Capture `tracert/tracepath` annotÃ©e (oÃ¹ est la GW, oÃ¹ Ã§a bloque).

## âœ… Check-list (DoD)

* [ ] Je sais lire **IP/masque/GW/DNS** et lâ€™Ã©tat **UP** dâ€™une interface.
* [ ] Je peux vÃ©rifier **LAN â†’ Internet â†’ DNS** avec `ping`.
* [ ] Je sais interprÃ©ter un **tracÃ©** (sauts, `*`, PMTU).
* [ ] Jâ€™applique la **procÃ©dure 5 min** pour isoler une panne de connectivitÃ©.

