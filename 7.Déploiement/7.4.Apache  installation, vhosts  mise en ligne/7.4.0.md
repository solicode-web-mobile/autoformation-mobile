---
title: 7.4. Apache
permalink: /apache-vhosts/
layout: home
nav_order: 4
has_children: true
parent : 7. Déploiement
---

# 🛠️ Introduction — C7.4 Apache : installation, vhosts & mise en ligne

Objectif : **installer** et **piloter** Apache, créer des **VirtualHosts** (plusieurs sites sur une même machine), configurer les **répertoires/permissions**, activer la **réécriture d’URL** et réaliser une **mise en ligne** basique (site statique + page PHP). Ce module prolonge **C7.2 (réseau/IP)** et **C7.3 (HTTP)** vers l’**hébergement concret**.

---

## 🎯 Objectifs pédagogiques
- Installer Apache (Windows **WAMP/XAMPP** ou **Linux**) et gérer le **service** (`systemctl`, `apachectl`).
- Comprendre l’**arborescence de configuration** et tester la **santé** (`apachectl -t`).
- Créer et activer un **VirtualHost** (DocumentRoot, logs, index, alias).
- Activer **mod_rewrite** et vérifier les **règles** (.htaccess ou conf).
- Déployer un **mini-site** (statique + `index.php`) avec **permissions** correctes.

## 👥 Public & prérequis
- **Public** : débutants en **déploiement** / **admin système** / **dev web**.  
- **Prérequis** : **C7.2** (LAN, IP, DNS), **C7.3** (HTTP), notions terminal (cmd/PowerShell/Bash).

## 🧪 Livrables attendus
- Fichier **vhost** final (nom de domaine local, DocumentRoot, logs).  
- **Arborescence** du site (captures) + preuve d’accès HTTP.  
- Test **mod_rewrite** (URL propre → `index.php`).  
- Mini‐rapport : étapes, commandes, problèmes rencontrés, correctifs.

---

## 🧩 Activités par niveaux (EPP)
- **N1 – Imitation** : installation, page par défaut, démarrage/arrêt du service, test `apachectl -t`.  
- **N2 – Adaptation** : création d’un **vhost** `site.local`, activation **mod_rewrite**, test `.htaccess`.  
- **N3 – Transposition** : déploiement d’un mini‐site (assets + `index.php`), **logs** dédiés, permissions sûres, check liste de mise en ligne.

## 🛠️ Outils & ressources suggérés
- **Linux (Debian/Ubuntu)** : `apt`, `systemctl`, `a2ensite`/`a2dissite`, `a2enmod rewrite`.  
- **Linux (RHEL/CentOS/Alma)** : `dnf`/`yum`, `systemctl`, conf sous `/etc/httpd/`.  
- **Windows** : **WAMP/XAMPP**, **Services.msc**.  
- **Commun** : `apachectl -t`, fichiers **logs** (`access.log`, `error.log`), éditeur texte, `/etc/hosts`.

---

## 🔗 UAs couvertes (rappel)
- **UA 7.4.U1 – Installer & piloter Apache**  
  * Chap. 7.4.1* : Installation (Windows/Linux), `service/systemctl`
  * Chap. 7.4.2* : Arborescence de conf, test de santé  
- **UA 7.4.U2 – VirtualHosts & répertoires**  
  * Chap. 7.4.3* : Vhost (DocumentRoot, logs)
  * Chap. 7.4.4* : Droits/permissions, index, alias, **mod_rewrite**  
- **UA 7.4.U3 – Mise en ligne basique & hygiène**  
  * Chap. 7.4.5* : Déployer un mini‐site (statique + PHP)
  * Chap. 7.4.6* : Bonnes pratiques (sauvegarde conf, logs, HTTPS – aperçu)

---

## 🔧 Cheatsheet — commandes utiles

### Debian/Ubuntu
```bash
# Installer & démarrer
sudo apt update && sudo apt install -y apache2
sudo systemctl enable --now apache2

# Vérifier configuration
sudo apachectl -t

# Activer mod_rewrite
sudo a2enmod rewrite
sudo systemctl reload apache2

# Créer/activer un vhost
sudo nano /etc/apache2/sites-available/site.local.conf
sudo a2ensite site.local
sudo systemctl reload apache2
