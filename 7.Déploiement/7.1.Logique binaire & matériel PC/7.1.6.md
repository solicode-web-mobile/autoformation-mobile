---
title: 6. Fichiers, droits & hygiÃ¨ne
layout: home
nav_order: 6
parent: 7.1. Logique binaire & matÃ©riel PC
permalink: /binaire-matÃ©riel/fichiers-droits-hygiene/
code: 7.1.6
competence: C7
autoformation: "C7.1"
ua: "7.1.U3"
duree_h: 1.5
objectif: "Lister/modifier les droits essentiels (Linux/Windows), protÃ©ger .env et appliquer le moindre privilÃ¨ge pour un projet Web."
notions_nouvelles: ["Chemin (path)", "PropriÃ©taire/Groupe", "rwx", "u/g/o", "chmod", "chown", "umask", "ACL NTFS", "icacls"]
fil_rouge: "SÃ©curiser le blog Laravel : code en lecture, Ã©criture limitÃ©e Ã  storage/ et bootstrap/cache, .env protÃ©gÃ©."
livrable_chapitre: "Script de mise au propre des droits (Linux ou Windows), capture de vÃ©rification, .env en 600 ou ACL dÃ©diÃ©e."
alimentation_prototype: "Projet exÃ©cutable avec droits minimaux; erreurs d'Ã©criture rÃ©solues pour la dÃ©mo N2."
alimentation_miniprojet: "Politique de droits reproductible (scripts/ACL) et documentÃ©e en README pour N3."
---


# ğŸ“˜ Chapitre 7.1.6 â€” Fichiers, droits de base & hygiÃ¨ne

## ğŸ“’ Glossaire minute

* **Chemin (path)** : adresse dâ€™un fichier/dossier (`C:\sites\blog` â€¢ `/var/www/blog`).
* **PropriÃ©taire / groupe** : compte et groupe Â« responsables Â» dâ€™un fichier (Linux).
* **Droits rwx** : **r**ead (lecture), **w**rite (Ã©criture), e**x**ecute (ou Â« traverser Â» un dossier).
* **u/g/o** : **u**ser (proprio), **g**roup (groupe), **o**thers (autres).
* **`chmod`** : change les droits (Linux).
* **`chown` / `chgrp`** : change propriÃ©taire / groupe (Linux).
* **`umask`** : masque de crÃ©ation par dÃ©faut (Linux).
* **ACL** : liste de contrÃ´le dâ€™accÃ¨s (Windows NTFS, Linux avancÃ©).

---

## ğŸ¯ Objectif pÃ©dagogique

Savoir lister et modifier des **droits de fichiers** essentiels (Linux/Windows) et adopter une **hygiÃ¨ne** de base pour un poste de dev/dÃ©ploiement Web.

---

## ğŸ§  DÃ©finition thÃ©orique (dÃ©butant)

### Linux (modÃ¨le u/g/o + rwx)

* Un droit est la **somme** de bits : `r=4`, `w=2`, `x=1`.
  Ex. `640` â†’ `u=rw-` (6), `g=r--` (4), `o=---` (0).
* Sur un **dossier**, `x` signifie Â« **traverser** Â» (accÃ©der au contenu si on connaÃ®t le nom).
  Bon profil minimal : **dossiers 750**, **fichiers 640**.
* **PropriÃ©taire** et **groupe** portent la responsabilitÃ©. On Ã©vite `777`.

### Windows (NTFS + ACL)

* Droits via **PropriÃ©tÃ©s â†’ SÃ©curitÃ©** ou **`icacls`** (CLI).
* Permissions utiles : **Lecture & exÃ©cution** (RX), **Modification** (M).
* Lâ€™hÃ©ritage propage les droits aux sous-dossiers et fichiers.

---

## ğŸ” Exemple appliquÃ© au fil rouge (Blog Laravel)

* Code lisible par le serveur Web, **sans** Ã©criture.
* RÃ©pertoires **Ã©crits** par lâ€™app : `storage/` et `bootstrap/cache/` **seulement**.
* Fichier `.env` : prÃ©sent en local, **hors dÃ©pÃ´t Git**, droits **stricts**.

---

## ğŸ›  Tutoriel pratique

### A) Linux â€” projet dans `/var/www/blog`

> Remplace `votreuser` par ton utilisateur local.

```bash
# 1) PrÃ©parer lâ€™arborescence
sudo mkdir -p /var/www/blog
cd /var/www/blog

# 2) PropriÃ©taire = toi ; Groupe = www-data (serveur Web)
sudo chown -R votreuser:www-data /var/www/blog

# 3) Droits par dÃ©faut : dossiers 750, fichiers 640
find . -type d -exec chmod 750 {} \;
find . -type f -exec chmod 640 {} \;

# 4) RÃ©pertoires que Laravel doit pouvoir Ã©crire
mkdir -p storage bootstrap/cache
chmod -R 770 storage bootstrap/cache     # u=rwX, g=rwX, o=-
# (option Â« setgid Â» pour conserver le groupe sur les nouveaux fichiers)
chmod g+s storage bootstrap/cache

# 5) Renforcer .env (local uniquement)
touch .env
chmod 600 .env

# 6) VÃ©rifier visuellement
ls -l
```

**Pourquoi ?**

* Le serveur (groupe `www-data`) peut **lire** le code et **Ã©crire** uniquement lÃ  oÃ¹ câ€™est nÃ©cessaire.
* Personne dâ€™autre (**others**) nâ€™a de droits.

---

### B) Windows â€” dossier `C:\sites\blog`

> Utilise lâ€™Explorateur **ou** la CLI. Adapte le compte du service Web si besoin.

```bat
REM 1) CrÃ©er les dossiers
mkdir C:\sites\blog
cd /d C:\sites\blog
mkdir storage bootstrap\cache

REM 2) Nettoyer lâ€™hÃ©ritage excessif et remettre propre
icacls C:\sites\blog /inheritance:e

REM 3) Donne Lecture & ExÃ©cution au groupe "Users" sur tout le code
icacls C:\sites\blog /grant Users:(OI)(CI)RX /T

REM 4) Autorise la Modification (Ã©criture) uniquement lÃ  oÃ¹ lâ€™app en a besoin
icacls C:\sites\blog\storage /grant Users:(OI)(CI)M /T
icacls C:\sites\blog\bootstrap\cache /grant Users:(OI)(CI)M /T

REM 5) ProtÃ©ger .env si prÃ©sent
type nul > .env
icacls .env /inheritance:r
icacls .env /grant %USERNAME%:R
```

**IdÃ©e clÃ© :** le code = **lecture**, les rÃ©pertoires Â« runtime Â» = **modification**, rien dâ€™autre.

---

## ğŸ§¼ HygiÃ¨ne de base (checklist)

* **Nommage** : minuscules, tirets (`kebab-case`), **pas dâ€™accents/espaces** dans les chemins Web.
* **Pas de secrets en clair** : `.env` local protÃ©gÃ©, **jamais commit** (`.gitignore`).
* **Droits minimaux** : Ã©viter `777` ; prÃ©fÃ©rer `750` (dirs) / `640` (fichiers).
* **RÃ©pertoires dÃ©diÃ©s Ã  lâ€™Ã©criture** : *seulement* `storage/`, `bootstrap/cache/`.
* **Sauvegardes** : exporter config/donnÃ©es rÃ©guliÃ¨rement (voir C7.3/7.4 pour logs & sauvegardes).
* **Nettoyage** : supprimer archives temporaires, *dumps* et fichiers de test avant mise en ligne.

---

## ğŸ§¾ RÃ©sumÃ© et points-clÃ©s

* Comprendre `rwx` et **u/g/o** permet de sÃ©curiser rapidement un projet.
* **Principe du moindre privilÃ¨ge** : lecture pour le code, Ã©criture **uniquement** lÃ  oÃ¹ nÃ©cessaire.
* `.env` doit rester **local, ignorÃ© par Git** et **restreint** (Linux `600`).
* Windows : utiliser **ACL (icacls)** pour diffÃ©rencier **lecture** du code et **modification** des dossiers runtime.

> Prochaine Ã©tape : **C7.2 LAN & adressage IP** â€” on relie la machine (et son systÃ¨me de fichiers) au rÃ©seau.
