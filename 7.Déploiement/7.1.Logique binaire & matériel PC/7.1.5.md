---
title: 5. Boot & services
layout: home
nav_order: 5
parent: 7.1. Logique binaire & mat√©riel PC
permalink: /deploiement/c7-1/boot-services/
code: 7.1.5
competence: C7
autoformation: "C7.1"
ua: "7.1.U3"
duree_h: 2
objectif: "Expliquer la cha√Æne POST‚ÜíUEFI/BIOS‚Üíbootloader‚Üíkernel‚Üíinit et g√©rer services (liste, start/enable, logs)."
notions_nouvelles: ["UEFI/BIOS", "POST", "MBR/GPT", "Bootloader", "Kernel", "Init/PID1", "Service/Daemon", "Target (systemd)"]
fil_rouge: "D√©marrage fiable des services (web/DB) pour environnements de dev et d√©mo"
livrable_chapitre: "Table boot (firmware/MBR-GPT/ordre), commandes status/enable/logs, mini-incident r√©solu"
alimentation_prototype: "Services essentiels d√©marr√©s et v√©rifiables pour la d√©mo N2"
alimentation_miniprojet: "Pratiques Ops minimales (services/logs/boot) pour serveurs N3"
---


# üìò Chapitre 7.1.5 ‚Äî D√©marrage (BIOS/UEFI), processus & services

## üìí Glossaire minute
- **BIOS / UEFI** : micrologiciel de la carte m√®re. UEFI succ√®de au BIOS (support **GPT**, **Secure Boot**, interface + scripts).
- **POST** (*Power-On Self Test*) : auto-test mat√©riel au d√©marrage.
- **MBR / GPT** : sch√©mas de partitionnement (MBR ‚â§ 2 To ; GPT moderne, requis par UEFI/Secure Boot).
- **Bootloader** : chargeur d‚Äôamor√ßage (**GRUB**, **Windows Boot Manager**).
- **Kernel (noyau)** : c≈ìur de l‚ÄôOS (Linux/Windows) qui g√®re CPU, m√©moire, p√©riph√©riques.
- **Init / PID 1** : premier processus (ex. **systemd** sous Linux).
- **Service / Daemon** : programme de fond lanc√© au d√©marrage (ex. `nginx`, `mysqld`, ‚ÄúWindows Service‚Äù).
- **Runlevel / Target** : niveau d‚Äôex√©cution (ancien) / cible systemd (graphique, multi-user, rescue‚Ä¶).

---

## üéØ Objectifs
- Expliquer la **cha√Æne de boot** : **POST ‚Üí firmware (UEFI/BIOS) ‚Üí bootloader ‚Üí kernel ‚Üí init ‚Üí services**.
- Identifier/ajuster l‚Äô**ordre de d√©marrage** et les options **UEFI** (Secure Boot, Boot Order).
- Lister, lancer/arr√™ter, **activer** et **diagnostiquer** des **services** (Linux/Windows).
- Lire les **journaux** de d√©marrage et r√©soudre un **boot failure** fr√©quent.

## ‚úÖ Pr√©-requis
- C7.1.3‚Äì7.1.4 (mat√©riel, NIC/MTU) ‚Ä¢ Connaissances de base terminal/PowerShell.

---

## 1) Cha√Æne de d√©marrage ‚Äî vue d‚Äôensemble
1. **Alimentation** : POST (RAM, CPU, p√©riph√©riques).  
2. **Firmware** (**UEFI/BIOS**) : s√©lectionne le **p√©riph√©rique de boot** (NVMe/SATA/USB/R√©seau).  
3. **Bootloader** : **GRUB** (Linux), **Windows Boot Manager** (Windows).  
4. **Kernel** : charge les **drivers** essentiels ‚Üí monte la **racine**.  
5. **Init (PID 1)** : ex. **systemd** ‚Üí lance **services/targets**.  
6. **Login** : TTY/console ou session graphique.

```mermaid
flowchart LR
  A[POST] --> B[UEFI/BIOS]
  B --> C{Boot Order}
  C -->|NVMe| D[Bootloader]
  D --> E[Kernel]
  E --> F[Init (systemd/PID 1)]
  F --> G[Services/Targets]
  G --> H[Login]
````

---

## 2) UEFI vs BIOS (et MBR vs GPT)

* **UEFI + GPT** recommand√© (d√©marrage plus fiable, partitions > 2 To, Secure Boot).
* **BIOS + MBR** h√©rit√© (compatibilit√© ancienne).
* **Secure Boot** : n‚Äôautorise que des chargeurs sign√©s (peut bloquer certains boots Linux non sign√©s ‚Üí d√©sactiver si besoin **temporaire**).
* **Boot Order** : NVMe/SSD syst√®me en **premier**.

> **Acc√®s firmware** : `F2/Del/Esc` (selon fabricant).

---

## 3) Services & processus ‚Äî Linux (systemd)

### 3.1 Inspecter l‚Äô√©tat

```bash
# Quels services sont actifs ?
systemctl --type=service --state=running

# Statut d'un service
systemctl status nginx
```

### 3.2 Lancer / arr√™ter / activer au boot

```bash
sudo systemctl start nginx
sudo systemctl stop nginx
sudo systemctl restart nginx
sudo systemctl enable nginx     # d√©marrer au boot
sudo systemctl disable nginx
```

### 3.3 Targets / niveaux

```bash
# Cible active (√©quiv. runlevel)
systemctl get-default

# Passer en mode multi-user (console) ou graphique
sudo systemctl set-default multi-user.target
sudo systemctl set-default graphical.target
```

### 3.4 Journaux (boot & services)

```bash
# Dernier boot
journalctl -b

# Logs d'un service
journalctl -u nginx --since "today"
```

---

## 4) Services & processus ‚Äî Windows

### 4.1 Lister & g√©rer

* **services.msc** (GUI), **Task Manager** (onglet *Services* / *Startup*).

```powershell
# Lister services et leur √©tat
Get-Service | Sort-Object Status, DisplayName

# D√©marrer/Arr√™ter/Red√©marrer un service
Start-Service -Name "W32Time"
Stop-Service -Name "W32Time"
Restart-Service -Name "W32Time"
```

### 4.2 D√©marrage & √©v√©nements

* **Gestionnaire des t√¢ches ‚Üí Startup** : activer/d√©sactiver les programmes au login.
* **Observateur d‚Äô√©v√©nements** (`eventvwr.msc`) ‚Üí *Windows Logs* (System/Application) pour erreurs de boot/services.

---

## 5) D√©pannage d√©marrage ‚Äî cas fr√©quents

* **‚ÄúNo boot device‚Äù** : ordre de boot erron√© (USB avant NVMe), c√¢ble/SSD d√©branch√©, partition EFI manquante.
* **GRUB cass√©** : r√©installer via live USB (`grub-install`, `update-grub`).
* **Secure Boot** : chargeur non sign√© ‚Üí d√©sactiver temporairement ou signer.
* **Service critical failed** : `systemctl status <service>` + `journalctl -u <service>` ; sous Windows : *Event Viewer* + `Get-Service`.

---

## 6) S√©curit√© & hygi√®ne

* Prot√©ger l‚Äôacc√®s **UEFI/BIOS** (mot de passe) surtout en salle publique.
* D√©sactiver les **boot externes** non n√©cessaires (USB/PXE).
* Limiter les **services** auto-d√©marr√©s au **minimum** (surface d‚Äôattaque, perf).

---

## 7) Cheatsheet ‚Äî commandes utiles

```bash
# Linux - services & boot
systemctl list-unit-files --type=service
systemctl --failed
journalctl -xe               # erreurs r√©centes d√©taill√©es
dmesg | less                 # messages noyau (boot & drivers)

# Windows - services & boot
services.msc
msconfig                     # (Startup/Boot options)
Get-Process | Sort CPU -desc
Get-Service | ?{$_.Status -ne "Running"}
```

---

## üß™ Exercices (avec attentes)

1. **Relever** la cha√Æne de boot de votre machine (UEFI/BIOS, disque syst√®me, sch√©ma MBR/GPT) et **capturer** l‚Äôordre de d√©marrage.
2. **Activer** un service (Linux `nginx` ou Windows ‚ÄúSpooler‚Äù), **v√©rifier** son statut, puis **le d√©sactiver** au boot (preuve des commandes).
3. **Simuler** un incident : stopper un service web, acc√©der √† la page ‚Üí diagnostiquer (logs/journal) et **corriger**.

## üì¶ Livrables attendus

* Tableau **firmware/boot** (UEFI/BIOS, MBR/GPT, boot order).
* Captures/commandes **status/enable/disable** d‚Äôun service.
* Mini-rapport **incident de d√©marrage/service** (sympt√¥me ‚Üí logs ‚Üí cause ‚Üí correctif).

## ‚úÖ Check-list (DoD)

* [ ] Je peux d√©crire **cha√Æne de boot** et distinguer **UEFI/BIOS**, **GPT/MBR**.
* [ ] Je sais **lister/activer/d√©sactiver** un **service** et lire ses **logs**.
* [ ] Je sais o√π r√©gler l‚Äô**ordre de boot** et **Secure Boot**.
* [ ] Je limite les **services auto-d√©marr√©s** aux besoins r√©els.
