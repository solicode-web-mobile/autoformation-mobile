---
title: 1. variables, conditions, boucles
permalink: /kotlin-essentiel-android/val-var-types-conditions-boucles/
layout: home
nav_order: 1
parent: 5.2. Kotlin essentiel pour Android
---

# üìò 5.2.1 ‚Äî variables, conditions, boucles

## üìí Glossaire minute
- **`val`** : r√©f√©rence **immuable** (assign√©e une seule fois).
- **`var`** : r√©f√©rence **mutable** (r√©assignable).
- **Types de base** : `Int`, `Long`, `Float`, `Double`, `Boolean`, `Char`, `String`.
- **Inf√©rence** : Kotlin d√©duit le type quand il est **√©vident**.
- **`if` / `when`** : **expressions** qui **renvoient une valeur**.
- **Ranges** : `0..n`, `0 until n`, `n downTo 0`, `step`.

---

## ‚úÖ Objectif
Savoir d√©clarer des **variables s√ªres**, manipuler les **types**, √©crire des **conditions lisibles** et it√©rer avec des **boucles idiomatiques**.

---

## 1) `val` vs `var` (choisir l‚Äôimmuabilit√© par d√©faut)

```kotlin
val appName = "HelloCounter"  // immuable (recommand√©)
var count = 0                  // mutable si l'√©tat doit √©voluer

// Typage explicite (si n√©cessaire)
val versionCode: Int = 1
var greeting: String? = null   // nullable ‚Üí d√©taill√© au 5.2.2
````

**R√®gle d‚Äôor** : commencez en **`val`**, passez en `var` **uniquement** si vous devez r√©assigner.

---

## 2) Types de base & inf√©rence

```kotlin
val i = 42            // Int
val big = 42L         // Long
val pi = 3.14         // Double
val f = 3.14f         // Float
val ok = true         // Boolean
val letter = 'A'      // Char
val name = "Ada"      // String

// Conversions explicites
val asDouble: Double = i.toDouble()
// String templates
val msg = "Bonjour, $name ! (#$i ‚Üí ${i.toString(16)})"
```

> Kotlin **ne promeut pas** automatiquement les types num√©riques (`Int` ‚Üí `Long`, etc.). Utilisez `toLong()`, `toDouble()`, ‚Ä¶

---

## 3) Conditions ‚Äî `if` **expression** & `when`

### `if` expression

```kotlin
val minSdk = 24
val supported = if (minSdk >= 21) "OK" else "Non support√©"
```

### `when` (switch ++)

```kotlin
fun levelLabel(count: Int): String = when {
  count < 0  -> "Invalide"
  count == 0 -> "D√©but"
  count in 1..9 -> "Bas"
  count in 10..99 -> "Moyen"
  else -> "√âlev√©"
}

// Sur valeurs
fun fileType(ext: String) = when (ext.lowercase()) {
  "png", "jpg", "webp" -> "Image"
  "json"               -> "Donn√©es"
  else                 -> "Autre"
}
```

> `when` peut matcher des **intervalles**, **valeurs**, et servir de **capture par d√©faut** avec `else`.

---

## 4) Boucles ‚Äî idiomes Kotlin

### `for` sur **ranges** et **collections**

```kotlin
for (i in 0..3) { /* 0,1,2,3 */ }
for (i in 0 until 3) { /* 0,1,2 */ }
for (i in 10 downTo 0 step 2) { /* 10,8,6,4,2,0 */ }

val tags = listOf("kotlin", "compose", "android")
for (t in tags) println(t)

for ((index, t) in tags.withIndex()) println("$index ‚Üí $t")
```

### `while` / `do‚Ä¶while` (plus rare, mais utile)

```kotlin
var tries = 0
while (tries < 3) {
  // ‚Ä¶
  tries++
}

do {
  // au moins une ex√©cution
} while (condition())
```

### It√©ration **fonctionnelle** (pr√©f√©r√©e pour la lisibilit√©)

```kotlin
tags.forEach { println(it) }
val upper = tags.map { it.uppercase() }.filter { it.startsWith("A") }
```

> Pr√©f√©rez `forEach`, `map`, `filter` pour des **transformations** simples. Utilisez `for` quand il y a **√©tat mut√©** ou **break/continue**.

---

## 5) Exemples concrets (mini-cases Android)

### Activer un bouton selon saisie

```kotlin
fun isGreetEnabled(name: String) = name.isNotBlank()
```

### Normaliser un **minSdk** vers un label

```kotlin
fun minSdkLabel(minSdk: Int) = when {
  minSdk < 21  -> "Non support√©"
  minSdk in 21..23 -> "Legacy"
  minSdk in 24..28 -> "Moderne"
  else -> "R√©cent"
}
```

### Calcul simple avec **ranges**

```kotlin
fun sum0to(n: Int): Int {
  require(n >= 0)
  var s = 0
  for (i in 0..n) s += i
  return s
}
// version fonctionnelle: (0..n).sum()
```

---

## üß™ V√©rifications rapides

* [ ] Vous savez **quand** utiliser `val` vs `var`.
* [ ] Vous √©crivez des `if`/`when` **comme expressions** (qui renvoient une valeur).
* [ ] Vous it√©rez avec `for (x in collection)` et **ranges** (`until`, `downTo`, `step`).
* [ ] Vous utilisez `map/filter/forEach` pour des transformations lisibles.

---

## ü©π Erreurs fr√©quentes & correctifs

* ‚ùå Tout mettre en `var` ‚Üí üå± **Commencez par `val`**, passez en `var` si besoin.
* ‚ùå Confondre `==` et `===` ‚Üí `==` compare **valeur**, `===` **r√©f√©rence**.
* ‚ùå Oublier conversions num√©riques ‚Üí utilisez `toInt()`, `toLong()`, etc.
* ‚ùå `if` comme instruction uniquement ‚Üí pr√©f√©rez l‚Äô**expression** pour affecter une valeur.

---

## üì¶ Livrables attendus

* Un petit fichier Kotlin avec :

  * une fonction `levelLabel(Int): String` (usage de `when`),
  * une fonction `sum0to(Int): Int` (boucle sur range),
  * une d√©monstration `val/var` + inf√©rence + String templates.

---

## ‚úÖ DoD ‚Äî Definition of Done

* [ ] Code compile, fonctions **pures** testables.
* [ ] `val` privil√©gi√© ; `var` justifi√©.
* [ ] `when` utilis√© proprement (plages, valeurs, `else`).
* [ ] Boucles idiomatiques (ranges, `withIndex`, `forEach/map/filter`).

---

## ‚ö° Cheatsheet

```kotlin
// val vs var
val name = "Ada"      // immuable
var count = 0         // mutable

// if / when expressions
val status = if (count > 0) "OK" else "VIDE"
val label = when (count) {
  0 -> "D√©but"; in 1..9 -> "Bas"; else -> "√âlev√©"
}

// Ranges & collections
for (i in 0 until 5) { /* 0..4 */ }
for ((i, t) in tags.withIndex()) println("$i:$t")
tags.map { it.uppercase() }.filter { it.startsWith("A") }
```

