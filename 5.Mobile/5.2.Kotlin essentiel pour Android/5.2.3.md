---
title: 3. Fonctions & lambdas
layout: home
nav_order: 3
parent: 5.2. Kotlin essentiel pour Android
permalink: /kotlin-essentiel/fonctions-lambdas/
code: 5.2.3
competence: C5
autoformation: "C5.2"
ua: "5.2.U2"
duree_h: 1.5
objectif: "Ecrire des fonctions lisibles avec parametres nommes, valeurs par defaut et lambdas simples."
notions_nouvelles: ["Expression body", "Parametres nommes", "Valeurs par defaut", "vararg + spread", "Trailing lambda", "Extensions"]
fil_rouge: "App Mobile Compose + API Blog Laravel"
livrable_chapitre: "`greet(name, punctuation=!)`, `avg(vararg)`, 1 extension, exemple Compose avec callbacks"
alimentation_prototype: "Callbacks Compose clairs (onIncrement/onDecrement) et APIs utilitaires"
alimentation_miniprojet: "Bibliotheque de fonctions reutilisables et testables"
---


# üìò Chapitre 5.2.3 ‚Äî Fonctions & lambdas 

## üìí Glossaire minute

- **Expression body** : fonction courte en une ligne `fun f(x) = ...`.
- **Param√®tres nomm√©s** : appel explicite `greet(name = "Ada")`.
- **Valeurs par d√©faut** : param√®tre facultatif avec valeur assign√©e.
- **Vararg** : accepte un nombre variable d‚Äôarguments.
- **Trailing lambda** : derni√®re lambda plac√©e en dehors des parenth√®ses.
- **Extension** : ajouter une fonction √† un type existant sans le modifier.

---

## üß† Objectif p√©dagogique
√âcrire des **fonctions lisibles** (expression body), utiliser **param√®tres nomm√©s**, **valeurs par d√©faut**, **vararg**, **lambdas** simples ‚Äî et **livrer un programme ex√©cutable** qui prouve la compr√©hension.

---

## üõ† Tutoriel pratique (pas-√†-pas)
> Cr√©ez un fichier `FunctionsPlayground.kt`.  
> √Ä **chaque √©tape**, gardez la/les fonction(s) + **le `main()` de l‚Äô√©tape** et ex√©cutez.  
> ‚ö†Ô∏è Dans un m√™me fichier, ne laissez **qu‚Äôun seul `main()`** non comment√©.

---

### √âtape 1 ‚Äî Fonction simple (*expression body*)

Une *expression body* rend une fonction courte plus lisible : pas d‚Äôaccolades, pas de `return`.

```kotlin
// √âtape 1 ‚Äî Fonction
fun celsiusToF(c: Double) = c * 9 / 5 + 32

// √âtape 1 ‚Äî main() √† ex√©cuter
fun main() {
    println(celsiusToF(0.0))     // Attendu: 32.0
    println(celsiusToF(100.0))   // Attendu: 212.0
}
````

---

### √âtape 2 ‚Äî Param√®tres nomm√©s & valeurs par d√©faut

Les **valeurs par d√©faut** √©vitent les surcharges inutiles. Les **param√®tres nomm√©s** rendent les appels explicites.

```kotlin
// √âtape 2 ‚Äî Fonction
fun greet(name: String, punctuation: String = "!") =
    "Bonjour, ${name.trim()}$punctuation"

// √âtape 2 ‚Äî main() √† ex√©cuter
fun main() {
    println(greet("Ada"))                          // Attendu: Bonjour, Ada!
    println(greet(name = "Alan", punctuation = "!!")) // Attendu: Bonjour, Alan!!
}
```

---

### √âtape 3 ‚Äî Nombre variable d‚Äôarguments (*vararg*)

`vararg` accepte un **nombre flexible de valeurs**. Le **spread** `*` ‚Äúd√©plie‚Äù un tableau.

```kotlin
// √âtape 3 ‚Äî Fonction
fun avg(vararg numbers: Int) = numbers.average()

// √âtape 3 ‚Äî main() √† ex√©cuter
fun main() {
    println(avg(1, 2, 3, 4))  // Attendu: 2.5
    println(avg(10, 20))      // Attendu: 15.0
    val arr = intArrayOf(2, 4, 6)
    println(avg(*arr))        // Attendu: 4.0
}
```

---

### √âtape 4 ‚Äî Lambdas simples

Une **lambda** est une fonction **anonyme**. Avec un seul param√®tre, on peut utiliser `it`.

```kotlin
// √âtape 4 ‚Äî D√©clarations
val square = { x: Int -> x * x }
val shout: (String) -> String = { it.uppercase() }

// √âtape 4 ‚Äî main() √† ex√©cuter
fun main() {
    println(square(5))        // Attendu: 25
    println(shout("kotlin"))  // Attendu: KOTLIN
}
```

---

### √âtape 5 ‚Äî *Trailing lambda* (syntaxe sucr√©e)

Quand la derni√®re param√®tre est une lambda, on peut la sortir des parenth√®ses : plus lisible.

```kotlin
// √âtape 5 ‚Äî main() √† ex√©cuter
fun main() {
    repeat(3) { println("Yo") }  // Attendu (3 lignes): Yo / Yo / Yo
}
```

---

### √âtape 6 ‚Äî Extension (lisibilit√© du code)

Une **extension** ajoute une m√©thode √† un type (ici `String`) sans le modifier.

```kotlin
// √âtape 6 ‚Äî Extension
fun String.sanitized() = trim().replace(Regex("\\s+"), " ")

// √âtape 6 ‚Äî main() √† ex√©cuter
fun main() {
    println("  Hello   Kotlin  ".sanitized()) // Attendu: Hello Kotlin
    println("A   B C".sanitized())            // Attendu: A B C
}
```

---

## üöÄ √âtape finale ‚Äî Livrable ex√©cutable consolid√©

Regroupez les fonctions et **fournissez un seul `main()`** propre qui imprime toutes les preuves d‚Äôex√©cution.

```kotlin
// Fonctions finales (exemples)
fun celsiusToF(c: Double) = c * 9 / 5 + 32
fun greet(name: String, punctuation: String = "!") =
    "Bonjour, ${name.trim()}$punctuation"
fun avg(vararg numbers: Int) = numbers.average()
fun String.sanitized() = trim().replace(Regex("\\s+"), " ")

// Lambdas finales (exemples)
val square = { x: Int -> x * x }
val shout: (String) -> String = { it.uppercase() }

// main() FINAL ‚Äî √† livrer
fun main() {
    // 1) expression body
    println(celsiusToF(0.0))       // 32.0
    println(celsiusToF(100.0))     // 212.0

    // 2) valeurs par d√©faut + nomm√©s
    println(greet("Ada"))                          // Bonjour, Ada!
    println(greet(name = "Alan", punctuation = "!!")) // Bonjour, Alan!!

    // 3) vararg (+ spread)
    println(avg(1, 2, 3, 4))       // 2.5
    val arr = intArrayOf(2, 4, 6)
    println(avg(*arr))             // 4.0

    // 4) lambdas
    println(square(5))             // 25
    println(shout("kotlin"))       // KOTLIN

    // 5) extension
    println("  Hello   Kotlin  ".sanitized()) // Hello Kotlin
}
```

---

## üßæ R√©sum√© & points-cl√©s

* Favoriser **expression body** pour les fonctions courtes.
* **Param√®tres nomm√©s** + **valeurs par d√©faut** = appels clairs.
* **Vararg** (+ `*` spread) pour la flexibilit√©.
* **Lambdas** et **trailing lambda** pour un style concis.
* **Extensions** pour enrichir un type sans utilitaires verbeux.
* **Code ex√©cutable** : preuves imprim√©es dans la console.

---

## üì¶ Livrable attendu

Un fichier **ex√©cutable** (ex. `FunctionsPlayground.kt`) contenant :

* `greet(name: String, punctuation: String = "!")`
* `avg(vararg numbers: Int)`
* 1 **extension** (`String` ou `Int`)
* un **`main()` final** qui **imprime** les r√©sultats attendus (copiez la sortie dans le README).

Preuves :

* capture/copie **console** avec les valeurs attendues,
* README court : comment ex√©cuter + sorties obtenues.

---

## ‚úÖ DoD ‚Äî Definition of Done

* [ ] Le fichier Kotlin **s‚Äôex√©cute** (Run ‚ñ∂) et la console affiche les **valeurs attendues**.
* [ ] Les fonctions `greet`, `avg`, et l‚Äô**extension** sont pr√©sentes et correctes.
* [ ] Le README inclut **comment ex√©cuter** et **les sorties** copi√©es depuis la console.

