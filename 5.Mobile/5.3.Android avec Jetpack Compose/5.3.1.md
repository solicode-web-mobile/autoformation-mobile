---
title: 1. Composables
layout: home
nav_order: 1
parent: 5.3. Android avec Compose
permalink: /android-compose/composables/
code: 5.3.1
competence: C5
autoformation: "C5.3"
ua: "5.3.U1"
duree_h: 1.5
objectif: "Afficher texte, bouton, saisie et image puis prÃ©visualiser lâ€™Ã©cran avec @Preview."
notions_nouvelles: ["Composable", "Modifier", "@Preview", "TextField", "Button"]
fil_rouge: "HelloCounter â€” Ã©cran Hello + Compteur"
livrable_chapitre: "Ã‰cran combinant Text/Button/TextField/Image + 2 @Preview (Light/Dark)"
alimentation_prototype: "Briques UI de base prÃªtes pour la dÃ©mo N2"
alimentation_miniprojet: "Composants rÃ©utilisables et prÃ©views standardisÃ©es pour N3"
---


# ğŸ“˜ 5.3.1 - Composables essentiels

## ğŸ“’ Glossaire minute
- **Composable** : fonction annotÃ©e `@Composable` qui dÃ©clare un morceau dâ€™UI.  
- **Modifier** : outil pour enchaÃ®ner des rÃ©glages visuels (taille, padding, clic, etc.).  
- **`@Preview`** : permet de visualiser un composable directement dans Android Studio, sans lancer lâ€™app.  
- **State** : donnÃ©e qui change au cours du temps et qui dÃ©clenche la mise Ã  jour automatique de lâ€™UI.  
- **rememberSaveable** : fonction qui garde un Ã©tat mÃªme si lâ€™activitÃ© est recrÃ©Ã©e (ex. rotation dâ€™Ã©cran).  

---

## ğŸ¯ Objectif pÃ©dagogique
Ã€ partir de lâ€™app **HelloCounter** dÃ©jÃ  construite, comprendre :  
- comment un composable est dÃ©fini,  
- comment il assemble dâ€™autres composables,  
- comment lâ€™Ã©tat est gÃ©rÃ© avec `rememberSaveable`,  
- et comment prÃ©visualiser un Ã©cran.

---

## ğŸ§  Explication Ã  partir du code existant

### 1. `MainActivity`
Le point dâ€™entrÃ©e de lâ€™app. Elle applique le **thÃ¨me** et appelle `MainScreen`.

```kotlin
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent { HelloCounterTheme { MainScreen() } }
    }
}
````

ğŸ‘‰ Ici, `setContent { ... }` attend un **composable racine** : on passe `MainScreen`.

---

### 2. `MainScreen`

Un composable **Ã©cran** qui assemble deux sections : `DireBonjourSection` et `CompteurSection`.

```kotlin
@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    Column(
        modifier = modifier.fillMaxSize().padding(16.dp),
        verticalArrangement = Arrangement.spacedBy(24.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        DireBonjourSection()
        CompteurSection()
    }
}
```

ğŸ‘‰ `Column` est lui-mÃªme un composable.
ğŸ‘‰ `MainScreen` **ne dessine pas directement**, il **organise** dâ€™autres composables.

---

### 3. `DireBonjourSection`

Un composable de section qui gÃ¨re la **saisie du prÃ©nom** et lâ€™affichage dâ€™un **message**.

```kotlin
@Composable
fun DireBonjourSection(modifier: Modifier = Modifier) {
    var name by rememberSaveable { mutableStateOf("") }
    var greetingName by rememberSaveable { mutableStateOf<String?>(null) }

    Column(modifier = modifier.fillMaxWidth()) {
        OutlinedTextField(
            value = name,
            onValueChange = { ... },
            label = { Text(stringResource(R.string.label_firstname)) },
            placeholder = { Text(stringResource(R.string.ph_firstname)) }
        )

        Button(
            onClick = { greetingName = name.takeIf { it.isNotBlank() } },
            enabled = name.isNotBlank()
        ) {
            Text(stringResource(R.string.btn_greet))
        }

        if (greetingName != null) {
            AssistChip(onClick = { }, label = { Text("Bonjour $greetingName") })
        }
    }
}
```

ğŸ‘‰ Ici, chaque Ã©lÃ©ment (`OutlinedTextField`, `Button`, `AssistChip`) est un composable prÃªt Ã  lâ€™emploi.
ğŸ‘‰ `DireBonjourSection` les combine pour former un **bloc fonctionnel**.

---

### 4. `CompteurSection`

Un composable qui gÃ¨re un **compteur** avec boutons âˆ’ et +.

```kotlin
@Composable
fun CompteurSection(modifier: Modifier = Modifier) {
    var count by rememberSaveable { mutableStateOf(0) }

    Row {
        IconButton(onClick = { if (count > 0) count-- }) {
            Icon(Icons.Filled.Remove, contentDescription = "Diminuer")
        }
        Text(text = "$count", style = MaterialTheme.typography.headlineSmall)
        IconButton(onClick = { count++ }) {
            Icon(Icons.Filled.Add, contentDescription = "Augmenter")
        }
    }
}
```

---

### ğŸ” Focus sur `var count by rememberSaveable { mutableStateOf(0) }`

DÃ©composons ligne par ligne :

* **`var count`** â†’ une variable mutable qui contient la valeur affichÃ©e dans lâ€™UI.
* **`by`** â†’ dÃ©lÃ©gation : permet dâ€™accÃ©der directement Ã  la valeur de lâ€™Ã©tat (`count`) au lieu dâ€™Ã©crire `count.value`.
* **`rememberSaveable`** â†’ garde la valeur en mÃ©moire mÃªme aprÃ¨s une rotation dâ€™Ã©cran. Sans Ã§a, le compteur serait remis Ã  0.
* **`mutableStateOf(0)`** â†’ crÃ©e un Ã©tat observable initialisÃ© Ã  0.
  Chaque fois que `count` change, Compose **recompose lâ€™UI** et met Ã  jour le texte.

ğŸ‘‰ RÃ©sultat : le compteur reste cohÃ©rent et lâ€™UI se met Ã  jour automatiquement.

---

### 5. `@Preview`

Un composable spÃ©cial pour tester lâ€™UI dans Android Studio.

```kotlin
@Preview(showBackground = true, widthDp = 360)
@Composable
fun PreviewMainScreen() {
    HelloCounterTheme { MainScreen() }
}
```

ğŸ‘‰ Ici, pas besoin de lancer lâ€™appli : on voit directement `MainScreen` dans lâ€™Ã©diteur.

---

## ğŸ§¾ RÃ©sumÃ© et points-clÃ©s

* Un **composable** est une fonction annotÃ©e `@Composable`.
* Un **Ã©cran** (`MainScreen`) est une composition de plusieurs composables internes.
* Lâ€™**Ã©tat** se gÃ¨re avec `rememberSaveable { mutableStateOf(...) }`.
* `by` simplifie lâ€™accÃ¨s Ã  la valeur de lâ€™Ã©tat.
* `@Preview` permet de tester sans exÃ©cuter lâ€™app.

---

## ğŸ“¦ Livrable attendu

Un **schÃ©ma dâ€™explication** (Ã©crit ou graphique) qui montre le lien entre :

* `MainActivity` â†’ lance `MainScreen`,
* `MainScreen` â†’ assemble `DireBonjourSection` et `CompteurSection`,
* chaque composable interne â†’ utilise des briques comme `Text`, `Button`, `OutlinedTextField`, `IconButton`.

---

## âœ… Definition of Done

* [ ] Lâ€™apprenant sait **identifier un composable**.
* [ ] Lâ€™apprenant comprend le rÃ´le de `rememberSaveable`.
* [ ] Lâ€™apprenant peut expliquer `var count by rememberSaveable { mutableStateOf(0) }`.
* [ ] Lâ€™apprenant sait lire une Preview et distinguer ce qui sâ€™exÃ©cute dans lâ€™app rÃ©elle.

---

