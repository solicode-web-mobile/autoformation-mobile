---
title: 2. Layouts & th√®mes
layout: home
nav_order: 2
parent: 5.3. Android avec Compose
permalink: /android-compose-mvvm/layouts-themes/
code: 5.3.2
competence: C5
autoformation: "C5.3"
ua: "5.3.U1"
duree_h: 1.5
objectif: "Composer des √©crans propres avec Row/Column/Box, espacement 8dp et Material 3."
notions_nouvelles: ["Row", "Column", "Box", "weight", "Surface/Card", "Typography M3"]
fil_rouge: "HelloCounter ‚Äî structure d‚Äô√©cran et cartes d‚Äôinfo"
livrable_chapitre: "ScreenScaffold + InfoCard + pr√©views Light/Dark"
alimentation_prototype: "Rythme visuel coh√©rent pour la d√©mo N2"
alimentation_miniprojet: "Th√®me/espacements standard pour √©crans N3"
---


# üìò 5.3.2 - Layouts & th√®mes

## üìí Glossaire minute
- **Row / Column / Box** : conteneurs de base pour **aligner** et **empiler** les √©l√©ments.
- **Modifier** : cha√Æne d‚Äôop√©rations (taille, padding, poids, background‚Ä¶).
- **Arrangement / Alignment** : contr√¥le de **distribution** (espacement) et **position**.
- **Material 3 (M3)** : th√®me (couleurs, formes, typographies) expos√© via `MaterialTheme`.
- **Baseline 8dp** : r√®gle simple d‚Äôespacement (4/8/12/16/24/32‚Ä¶).

---

## ‚úÖ Objectif
Composer des √©crans **propres et lisibles** avec les layouts de base, appliquer un **th√®me M3** coh√©rent et des **espacements** r√©guliers, en s‚Äôappuyant sur la **typographie** Material.

---

## 1) Layouts de base

### `Column` ‚Äî empiler verticalement
```kotlin
@Composable
fun FormColumn(content: @Composable ColumnScope.() -> Unit) {
  Column(
    modifier = Modifier
      .fillMaxSize()
      .padding(16.dp),
    verticalArrangement = Arrangement.spacedBy(16.dp) // espace constant entre enfants
  ) { content() }
}
````

### `Row` ‚Äî aligner horizontalement

```kotlin
@Composable
fun CounterRow(
  value: Int,
  onInc: () -> Unit,
  onDec: () -> Unit
) {
  Row(
    verticalAlignment = Alignment.CenterVertically,
    horizontalArrangement = Arrangement.spacedBy(12.dp)
  ) {
    IconButton(onClick = onDec, enabled = value > 0) { Icon(Icons.Default.Remove, null) }
    Text("$value", style = MaterialTheme.typography.headlineSmall, modifier = Modifier.widthIn(min = 40.dp))
    IconButton(onClick = onInc) { Icon(Icons.Default.Add, null) }
  }
}
```

### `Box` ‚Äî superposer / ancrer

```kotlin
@Composable
fun AvatarWithBadge() {
  Box(modifier = Modifier.size(72.dp)) {
    Image(painterResource(R.drawable.ic_launcher_foreground), contentDescription = null, modifier = Modifier.matchParentSize())
    Surface(
      color = MaterialTheme.colorScheme.error,
      shape = CircleShape,
      modifier = Modifier
        .size(16.dp)
        .align(Alignment.BottomEnd)
        .border(2.dp, MaterialTheme.colorScheme.background, CircleShape)
    ) {}
  }
}
```

---

## 2) Trucs & astuces de layout

### Poids (`weight`) pour r√©partir l‚Äôespace

```kotlin
Row(Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.spacedBy(8.dp)) {
  OutlinedTextField(value = "", onValueChange = {}, modifier = Modifier.weight(1f))
  Button(onClick = { /*‚Ä¶*/ }) { Text("OK") }
}
```

### `Spacer` & s√©parateurs

```kotlin
Column {
  Text("Titre", style = MaterialTheme.typography.titleLarge)
  Spacer(Modifier.height(8.dp))
  Text("Description‚Ä¶")
  Divider(Modifier.padding(vertical = 16.dp))
  // ‚Ä¶
}
```

### Scroll simple

```kotlin
Column(
  modifier = Modifier
    .fillMaxSize()
    .verticalScroll(rememberScrollState())
) { /* contenu */ }
```

---

## 3) Th√®me Material 3 (couleurs, formes, typographies)

> Si vous avez cr√©√© `AppTheme` au chapitre 5.1.8, utilisez-le ici.

```kotlin
@Composable
fun ScreenScaffold(title: String, content: @Composable () -> Unit) {
  MaterialTheme { // ou AppTheme { ‚Ä¶ }
    Surface(color = MaterialTheme.colorScheme.background) {
      Column(Modifier.fillMaxSize()) {
        CenterAlignedTopAppBar(
          title = { Text(title, style = MaterialTheme.typography.titleLarge) }
        )
        content()
      }
    }
  }
}
```

### Couleurs & surfaces

* Utilisez `MaterialTheme.colorScheme.*` (`primary`, `secondary`, `error`, `background`, `surface`, etc.).
* Enveloppez les sections dans **`Surface`** / **`Card`** pour g√©rer l‚Äôelevation et le contraste.

```kotlin
@Composable
fun InfoCard(text: String) {
  ElevatedCard(
    colors = CardDefaults.elevatedCardColors(containerColor = MaterialTheme.colorScheme.surface),
    modifier = Modifier.fillMaxWidth()
  ) {
    Text(text, style = MaterialTheme.typography.bodyMedium, modifier = Modifier.padding(16.dp))
  }
}
```

---

## 4) Espacement & rythme visuel

### R√®gles simples

* **Padding √©cran** : 16dp (ou 24dp sur tablette).
* **Espaces entre √©l√©ments** : 8‚Äì16dp selon densit√©.
* **Taille tappable** : ‚â• 48dp (d√©j√† le cas pour `Button`/`IconButton`).

### Petits utilitaires (optionnels)

```kotlin
object Spacing {
  val xs = 4.dp; val sm = 8.dp; val md = 16.dp; val lg = 24.dp; val xl = 32.dp
}
```

---

## 5) Typographie Material

> Utiliser les styles plut√¥t que des tailles ‚Äúmagiques‚Äù.

```kotlin
@Composable
fun TypographySample() {
  Column(Modifier.padding(16.dp), verticalArrangement = Arrangement.spacedBy(8.dp)) {
    Text("Titre section", style = MaterialTheme.typography.titleLarge)
    Text("Sous-titre", style = MaterialTheme.typography.titleMedium)
    Text("Corps de texte lisible pour les descriptions.", style = MaterialTheme.typography.bodyMedium)
    Text("Indice / aide", style = MaterialTheme.typography.bodySmall, color = MaterialTheme.colorScheme.secondary)
  }
}
```

**Guidelines**

* 1‚Äì2 styles **max** par √©cran (coh√©rence).
* Coupler la **hi√©rarchie de texte** avec la **hi√©rarchie d‚Äôespacement**.

---

## 6) Exemple complet (form + actions)

```kotlin
@Composable
fun ProfileForm(
  name: String,
  onNameChange: (String) -> Unit,
  onSave: () -> Unit,
  onCancel: () -> Unit
) {
  ScreenScaffold(title = stringResource(R.string.app_name)) {
    Column(
      modifier = Modifier
        .fillMaxSize()
        .padding(16.dp)
        .verticalScroll(rememberScrollState()),
      verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
      Text(stringResource(R.string.label_firstname), style = MaterialTheme.typography.titleMedium)
      OutlinedTextField(
        value = name,
        onValueChange = onNameChange,
        placeholder = { Text(stringResource(R.string.ph_firstname)) },
        singleLine = true,
        modifier = Modifier.fillMaxWidth()
      )

      InfoCard(text = "Astuce: votre pr√©nom sera utilis√© pour la salutation.")

      Row(
        modifier = Modifier.fillMaxWidth(),
        horizontalArrangement = Arrangement.spacedBy(12.dp),
        verticalAlignment = Alignment.CenterVertically
      ) {
        OutlinedButton(
          onClick = onCancel,
          modifier = Modifier.weight(1f)
        ) { Text("Annuler") }

        Button(
          onClick = onSave,
          enabled = name.isNotBlank(),
          modifier = Modifier.weight(1f)
        ) { Text("Enregistrer") }
      }
    }
  }
}
```

**Pr√©views**

```kotlin
@Preview(showBackground = true, widthDp = 360)
@Composable
fun ProfileFormPreview_Light() {
  MaterialTheme { ProfileForm(name = "", onNameChange = {}, onSave = {}, onCancel = {}) }
}

@Preview(showBackground = true, widthDp = 360, uiMode = Configuration.UI_MODE_NIGHT_YES)
@Composable
fun ProfileFormPreview_Dark() {
  MaterialTheme { ProfileForm(name = "Ada", onNameChange = {}, onSave = {}, onCancel = {}) }
}
```

---

## üß™ V√©rifications rapides

* [ ] **Colonnes/Rang√©es** utilisent `spacedBy` plut√¥t que des `Spacer` partout.
* [ ] Les **espacements** suivent une **grille 8dp** (4/8/12/16/24‚Ä¶).
* [ ] Le **th√®me M3** est appliqu√© (`MaterialTheme` / `AppTheme`), textes via **`typography`**.
* [ ] Les **actions** sont ‚â• **48dp** de c√¥t√©, lisibles et accessibles.

---

## ü©π D√©pannage

* **Contenu coll√© aux bords** ‚Üí ajouter `padding(16.dp)` sur le conteneur racine.
* **Boutons tass√©s** ‚Üí utiliser `Arrangement.spacedBy()` au lieu de `Spacer` multiples.
* **Contraste faible** (dark mode) ‚Üí envelopper avec `Surface` et v√©rifier `colorScheme`.
* **Texte trop petit** ‚Üí utiliser `typography.*` au lieu de tailles fix√©es.

---

## üì¶ Livrables attendus

* Un √©cran avec **Row/Column/Box** combin√©s proprement.
* Un **th√®me M3** actif (`MaterialTheme`) + typographies officielles.
* Espacements r√©guliers (captures **Light/Dark** en `@Preview`).

---

## ‚úÖ DoD ‚Äî Definition of Done

* [ ] Layouts **clairs** (poids, alignements, scroll si n√©cessaire).
* [ ] **Material 3** utilis√© : `colorScheme`, `typography`, `Surface`/`Card`.
* [ ] **Espacement** coh√©rent (baseline 8dp), **typographie** standard.
* [ ] Pr√©views Light/Dark **visibles** et lisibles.

---

## ‚ö° Cheatsheet

```kotlin
// Column/Row de base
Column(verticalArrangement = Arrangement.spacedBy(16.dp)) { /* ‚Ä¶ */ }
Row(horizontalArrangement = Arrangement.spacedBy(12.dp), verticalAlignment = Alignment.CenterVertically) { /* ‚Ä¶ */ }

// Box overlay/ancrage
Box { Image(...); Badge(modifier = Modifier.align(Alignment.BottomEnd)) }

// Th√®me & surfaces
MaterialTheme { Surface { /* UI */ } }

// Poids & largeur
OutlinedTextField(..., modifier = Modifier.weight(1f))
Button(..., modifier = Modifier.weight(1f))

// Typo
Text("Titre", style = MaterialTheme.typography.titleLarge)
```
