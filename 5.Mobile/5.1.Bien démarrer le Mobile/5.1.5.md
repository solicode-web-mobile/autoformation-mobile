---
title: 5. APK debug
layout: home
nav_order: 5
parent: 5.1. Bien dÃ©marrer le Mobile
permalink: /mobile-onboarding/apk-debug/
code: 5.1.5
competence: C5
autoformation: "C5.1"
ua: "5.1.U2"
duree_h: 1.5
objectif: "Construire un APK debug, lâ€™installer via ADB et livrer README + captures/vidÃ©o de vÃ©rification."
notions_nouvelles: ["APK debug", "assembleDebug", "ADB install", "monkey", "SHA-256"]
fil_rouge: "APK installable de HelloCounter pour revue et dÃ©mo"
livrable_chapitre: "`app-debug.apk` + README (build/install) + 2â€“3 captures + (option) vidÃ©o â‰¤ 60s"
alimentation_prototype: "APK prÃªt Ã  dÃ©montrer sur Ã©mulateur/appareil (N2)"
alimentation_miniprojet: "ChaÃ®ne de build/install reproductible pour livraisons N3"
---


# ğŸ“˜ 5.1.5 - GÃ©nÃ©rer lâ€™**APK debug**

## ğŸ“’ Glossaire minute
- **APK** : package Android installable (ici **debug** signÃ© par la clÃ© **debug** auto-gÃ©nÃ©rÃ©e).
- **assembleDebug** : tÃ¢che Gradle qui **build** lâ€™APK de debug.
- **ADB** : *Android Debug Bridge* â€” installe/lance lâ€™app sur Ã©mulateur/appareil.
- **Livrables** : Ã©lÃ©ments remis (APK, README, captures/vidÃ©o) pour vÃ©rifier votre travail.

---

## âœ… Objectif
Obtenir un **APK debug** reproductible, lâ€™**installer** sur Ã©mulateur/appareil avec **ADB**, puis **prÃ©parer les livrables** (README + captures) pour une Ã©valuation simple et rapide.

---

## ğŸ”§ PrÃ©-requis
- Chapitres **5.1.1â€“5.1.4** complÃ©tÃ©s (Studio/SDK/AVD + projet + Git).  
- **Device** dÃ©tectÃ© par `adb devices` **ou** un **AVD** dÃ©marrÃ©.

---

## 1) GÃ©nÃ©rer lâ€™**APK debug**

### A) Depuis Android Studio (le plus simple)
1. **Build â†’ Build Bundle(s) / APK(s) â†’ Build APK(s)**  
2. Lien **â€œlocateâ€** en bas â†’ ouvre le dossier de sortie :
```

app/build/outputs/apk/debug/app-debug.apk

````

### B) En **CLI** (recommandÃ© pour un build reproductible)
```bash
# Ã€ la racine du projet
./gradlew clean assembleDebug    # macOS/Linux
gradlew.bat clean assembleDebug  # Windows

# APK gÃ©nÃ©rÃ© :
# app/build/outputs/apk/debug/app-debug.apk
````

> â„¹ï¸ Lâ€™APK **debug** est signÃ© avec la **clÃ© debug** fournie par lâ€™outil (ne la versionnez pas).
> Pour un store, il faudra une **signature release** (plus tard).

---

## 2) Installer lâ€™APK sur Ã©mulateur / appareil

### Option 1 â€” Via Android Studio

* Dans la barre dâ€™outils, choisissez votre **AVD ou device**, puis **Run â–¶** (installe et lance automatiquement).
* Ou utilisez **Device File Explorer** / **App Inspector** pour gÃ©rer lâ€™app.

### Option 2 â€” Via **ADB** (CLI)

```bash
# Lister les devices/AVD connectÃ©s
adb devices

# Installer ou mettre Ã  jour l'app (remplacement)
adb install -r app/build/outputs/apk/debug/app-debug.apk

# Lancer l'app (remplacez par votre applicationId)
adb shell monkey -p com.acme.hellocounter -c android.intent.category.LAUNCHER 1
```

**DÃ©pannage installation**

```bash
# Conflit de signature / ancienne app â†’ dÃ©sinstaller, puis rÃ©installer
adb uninstall com.acme.hellocounter
adb install app/build/outputs/apk/debug/app-debug.apk

# Downgrade (si versionCode plus Ã©levÃ©e dÃ©jÃ  installÃ©e)
adb install -r -d app/build/outputs/apk/debug/app-debug.apk
```

> Astuce : `applicationId` est dÃ©fini dans `app/build.gradle.kts` (`defaultConfig { applicationId = "..." }`).

---

## 3) Capturer **captures dâ€™Ã©cran** & **courte vidÃ©o**

### A) Outils intÃ©grÃ©s (recommandÃ©)

* **Android Studio** : *Running Devices* â†’ icÃ´ne **Screenshot** / **Screen Record**.
* Ã‰mulateur : boutons **camera/record** dans la fenÃªtre.

### B) Via **ADB**

```bash
# Capture d'Ã©cran (sauvegarde sur le device)
adb shell screencap -p /sdcard/screen.png
adb pull /sdcard/screen.png ./captures/screen.png

# Enregistrement vidÃ©o (limitÃ© Ã  ~3min)
adb shell screenrecord /sdcard/demo.mp4
# Ctrl+C pour arrÃªter, puis :
adb pull /sdcard/demo.mp4 ./captures/demo.mp4
```

**Conseils**

* Fournir 2â€“3 **captures** (Ã©cran dâ€™accueil, interaction â€œHelloâ€, compteur).
* Si vidÃ©o : **â‰¤ 60s** ; montrer *ouverture â†’ interaction â†’ rÃ©sultat*.

---

## 4) Structurer les **livrables** du dÃ©pÃ´t

```
HelloCounter/
â”œâ”€ README.md
â”œâ”€ app/build/outputs/apk/debug/app-debug.apk     â† (option : livrer sÃ©parÃ©ment)
â”œâ”€ captures/
â”‚  â”œâ”€ screenshot_01_home.png
â”‚  â”œâ”€ screenshot_02_greeting.png
â”‚  â””â”€ demo.mp4                                    â† (â‰¤ 60s)
â””â”€ docs/                                          â† (optionnel)
```

### A) **README.md** (modÃ¨le court)

````md
# HelloCounter â€” Android / Jetpack Compose

Mini-app â€œHello + Compteurâ€.

## ğŸš€ Build & Install
```bash
./gradlew assembleDebug
adb install -r app/build/outputs/apk/debug/app-debug.apk
````

## ğŸ“± Appareil / Ã‰mulateur utilisÃ©

* Pixel 7a API 34 (Ã©mulateur) / Redmi Note X (Android 13)
* `adb devices` OK

## âœ¨ FonctionnalitÃ©s

* Champ "PrÃ©nom" + bouton "Dire bonjour"
* Compteur (âˆ’ / +) avec rÃ¨gle `count â‰¥ 0`

## ğŸ–¼ï¸ Captures

* Voir dossier `captures/` (2â€“3 screenshots + demo.mp4)

````

### B) **Nommer** correctement
- `screenshot_XX_<courte-description>.png`  
- `demo.mp4` (ou `.gif` si poids raisonnable)

### C) (Option) **Hashes** pour intÃ©gritÃ©
```bash
shasum -a 256 app/build/outputs/apk/debug/app-debug.apk
# â†’ coller la valeur dans le README
````

---

## 5) VÃ©rifications rapides (checklist)

* [ ] `assembleDebug` **OK** (sans erreurs).
* [ ] `app-debug.apk` **prÃ©sent** au bon chemin.
* [ ] `adb install -r` **rÃ©ussit** (Ã©mulateur **ou** device).
* [ ] Lâ€™app **se lance** et affiche **Hello + Compteur**.
* [ ] **README** clair, **captures** ajoutÃ©es.

---

## ğŸ©¹ DÃ©pannage (FAQ)

* **`device offline` / non listÃ©** â†’ rebrancher, `adb kill-server && adb start-server`, activer *DÃ©bogage USB*, accepter lâ€™empreinte RSA.
* **Ã‰mulateur lent** â†’ vÃ©rifier hyperviseur (WHPX/KVM), fermer autres AVD, rÃ©duire la rÃ©solution/ram.
* **`INSTALL_FAILED_VERSION_DOWNGRADE`** â†’ ajouter `-d` ou dÃ©sinstaller lâ€™app.
* **`INSTALL_PARSE_FAILED_NO_CERTIFICATES`** â†’ rebuild (APK corrompu), ne pas modifier lâ€™APK aprÃ¨s build.
* **`More than one device/emulator`** â†’ prÃ©ciser la cible :

  ```bash
  adb -s <serial> install -r app/build/outputs/apk/debug/app-debug.apk
  ```

---

## ğŸ“¦ Livrables attendus

* **APK debug** (fichier ou lien vers le chemin de build).
* **README** avec commandes **build/install**, device utilisÃ©, fonctionnalitÃ©s testÃ©es.
* **2â€“3 captures** + (optionnel) **vidÃ©o** â‰¤ 60s.

---

## âœ… DoD â€” Definition of Done

* [ ] APK **debug** gÃ©nÃ©rÃ© et **installÃ©** via ADB (Ã©mulateur **ou** device).
* [ ] Lâ€™app **sâ€™ouvre** et fonctionne (Hello + Compteur).
* [ ] **README** + **captures** prÃ©sents et lisibles.
* [ ] (Bonus) Hash **SHA-256** de lâ€™APK notÃ© dans le README.

---

## âš¡ Cheatsheet

```bash
# Build APK
./gradlew clean assembleDebug

# Installer / rÃ©installer
adb install -r app/build/outputs/apk/debug/app-debug.apk

# Lancer l'app
adb shell monkey -p com.acme.hellocounter -c android.intent.category.LAUNCHER 1

# Uninstaller (si conflit signature)
adb uninstall com.acme.hellocounter

# Screenshots & vidÃ©o
adb shell screencap -p /sdcard/s1.png && adb pull /sdcard/s1.png ./captures/
adb shell screenrecord /sdcard/demo.mp4 && adb pull /sdcard/demo.mp4 ./captures/
```
