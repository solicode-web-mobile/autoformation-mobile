---
title: 6. UI de base 
permalink: /mobile-onboarding/ui-de-base-compose/
layout: home
nav_order: 6
parent: 5.1. Bien d√©marrer le Mobile
---

# üìò 5.1.6 - UI de base 

## üìí Glossaire minute
- **TextField** : champ de saisie texte (ici *Pr√©nom*).  
- **Button / IconButton** : actions UI (dire bonjour, ‚àí / +).  
- **Message** : zone de texte affichant ¬´ Bonjour, *Pr√©nom* ! ¬ª.  
- **Compteur** : bloc de 3 √©l√©ments (**‚àí / valeur / +**), avec r√®gle `count ‚â• 0`.  

> ‚ö†Ô∏è Ici on se concentre sur la **structure UI**. La **gestion d‚Äô√©tat approfondie** (*rememberSaveable*, r√®gles d‚Äôactivation, etc.) arrive au **chapitre 5.1.7**. On met tout de m√™me un **√©tat simple** pour pr√©visualiser l‚Äô√©cran.

---

## ‚úÖ Objectif
Produire un **√©cran Compose** unique avec :
1) un **TextField ‚ÄúPr√©nom‚Äù**,  
2) un **bouton ‚ÄúDire bonjour‚Äù** qui affiche un **message**,  
3) un **bloc compteur** (**‚àí / valeur / +**) avec d√©sactivation du **‚àí** √† `0`,  
4) une **accessibilit√© minimale** (labels, tailles tappables), **Material 3** et **strings.xml**.

---

## üß© Composables principaux (exemple minimal)

> Fichier sugg√©r√© : `app/src/main/kotlin/com/acme/hellocounter/ui/MainScreen.kt`

```kotlin
package com.acme.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Add
import androidx.compose.material.icons.filled.Remove
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.testTag
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.semantics.contentDescription
import androidx.compose.ui.semantics.semantics
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.unit.dp
import com.acme.hellocounter.R

@Composable
fun MainScreen(modifier: Modifier = Modifier) {
  // √âtat simple pour pr√©visualiser (am√©lior√© au 5.1.7)
  var name by remember { mutableStateOf("") }
  var greeting by remember { mutableStateOf<String?>(null) }
  var count by remember { mutableStateOf(0) }

  Column(
    modifier = modifier
      .fillMaxSize()
      .padding(16.dp)
      .verticalScroll(rememberScrollState()),
    verticalArrangement = Arrangement.spacedBy(16.dp),
    horizontalAlignment = Alignment.CenterHorizontally
  ) {

    // 1) Champ Pr√©nom
    OutlinedTextField(
      value = name,
      onValueChange = { name = it },
      label = { Text(stringResource(R.string.label_firstname)) },
      placeholder = { Text(stringResource(R.string.ph_firstname)) },
      singleLine = true,
      modifier = Modifier
        .fillMaxWidth()
        .testTag("tf_firstname"),
      keyboardOptions = androidx.compose.ui.text.input.KeyboardOptions.Default.copy(
        imeAction = ImeAction.Done
      )
    )

    // 2) Bouton "Dire bonjour"
    Button(
      onClick = {
        greeting = if (name.isNotBlank())
          stringResource(R.string.msg_greeting, name.trim())
        else null
      },
      enabled = name.isNotBlank(), // sera d√©taill√© au 5.1.7
      modifier = Modifier.fillMaxWidth()
    ) {
      Text(stringResource(R.string.btn_greet))
    }

    // 3) Zone message
    if (!greeting.isNullOrBlank()) {
      AssistChip(
        onClick = { /* no-op */ },
        label = { Text(greeting!!) },
      )
    }

    // 4) Bloc compteur (‚àí / valeur / +)
    Text(
      text = stringResource(R.string.title_counter),
      style = MaterialTheme.typography.titleMedium
    )

    Row(
      verticalAlignment = Alignment.CenterVertically,
      horizontalArrangement = Arrangement.spacedBy(12.dp)
    ) {
      // Bouton ‚àí (d√©sactiv√© √† 0)
      IconButton(
        onClick = { if (count > 0) count-- },
        enabled = count > 0,
        modifier = Modifier
          .size(48.dp) // cible tactile
          .semantics { contentDescription = stringResource(R.string.cd_decrement) }
      ) {
        Icon(imageVector = Icons.Filled.Remove, contentDescription = null)
      }

      // Valeur
      Text(
        text = "$count",
        style = MaterialTheme.typography.headlineSmall,
        modifier = Modifier
          .widthIn(min = 40.dp) // zone stable
          .semantics { contentDescription = stringResource(R.string.cd_counter_value, count) }
      )

      // Bouton +
      IconButton(
        onClick = { count++ },
        modifier = Modifier
          .size(48.dp)
          .semantics { contentDescription = stringResource(R.string.cd_increment) }
      ) {
        Icon(imageVector = Icons.Filled.Add, contentDescription = null)
      }
    }
  }
}
````

**`MainActivity.kt` (rappel)**

```kotlin
package com.acme.hellocounter

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.material3.MaterialTheme
import com.acme.hellocounter.ui.MainScreen

class MainActivity : ComponentActivity() {
  override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContent {
      MaterialTheme { MainScreen() }
    }
  }
}
```

**`@Preview`**

```kotlin
@Composable
@androidx.compose.ui.tooling.preview.Preview(showBackground = true, widthDp = 360)
private fun PreviewMainScreen() {
  MaterialTheme { MainScreen() }
}
```

---

## üóÇÔ∏è Ressources ‚Äî `strings.xml` (√† ajouter)

> Chemin : `app/src/main/res/values/strings.xml`

```xml
<resources>
    <string name="app_name">HelloCounter</string>

    <!-- UI -->
    <string name="label_firstname">Pr√©nom</string>
    <string name="ph_firstname">Entrez votre pr√©nom</string>
    <string name="btn_greet">Dire bonjour</string>
    <string name="msg_greeting">Bonjour, %1$s !</string>
    <string name="title_counter">Compteur</string>

    <!-- Accessibilit√© -->
    <string name="cd_decrement">Diminuer la valeur</string>
    <string name="cd_increment">Augmenter la valeur</string>
    <string name="cd_counter_value">Valeur actuelle : %1$d</string>
</resources>
```

---

## üéØ R√®gles d‚ÄôUI (mini-guidelines)

* **Espacement** : marge globale `16.dp`, espaces `12‚Äì16.dp` entre √©l√©ments.
* **Taille tappable** : minimum **48.dp** (IconButton par d√©faut ok).
* **Accessibilit√©** : `contentDescription` pour **ic√¥nes**, textes via `strings.xml`.
* **D√©sactivation** : bouton **‚ÄúDire bonjour‚Äù** inactif si champ vide ; bouton **‚àí** inactif √† `0`.
* **Material 3** : utiliser `MaterialTheme` pour h√©ritage couleurs/typo.

---

## üß™ V√©rifications rapides

* [ ] La **Preview** affiche le formulaire et le compteur.
* [ ] Le bouton **‚ÄúDire bonjour‚Äù** s‚Äôactive quand le **Pr√©nom** n‚Äôest pas vide.
* [ ] Le **message** appara√Æt apr√®s clic (et dispara√Æt si on vide puis reclick).
* [ ] Le **‚àí** est **d√©sactiv√©** √† `0`, le **+** incr√©mente bien.
* [ ] Les textes proviennent de **`strings.xml`**.

---

## ü©π D√©pannage

* **Preview vide** : `Build ‚Üí Rebuild Project`, puis **Refresh** dans l‚Äôaper√ßu.
* **Ic√¥nes manquantes** : ajoutez `material-icons` (d√©j√† inclus via `material3` + `ui-graphics`).
* **Crash √† l‚ÄôIME** : garder `singleLine = true`, `ImeAction.Done`.
* **A11y non lue** : v√©rifiez `contentDescription` et testez avec TalkBack.

---

## üì¶ Livrables attendus

* `MainScreen` (ou √©quivalent) avec **TextField**, **bouton**, **message** et **compteur**.
* `strings.xml` mis √† jour.
* Capture d‚Äô√©cran **√©mulateur** montrant l‚ÄôUI.

---

## ‚úÖ DoD ‚Äî Definition of Done

* [ ] √âcran Compose **complet** (Pr√©nom, Dire bonjour, message, compteur).
* [ ] **‚àí** d√©sactiv√© √† `0`, cibles **48.dp**, **a11y** (contentDescription).
* [ ] **Material 3** appliqu√© + textes **externalis√©s** (`strings.xml`).
* [ ] Preview **fonctionnelle**.

> Prochain chapitre : **5.1.7 ‚Äî √âtats & interactions avec `rememberSaveable`** (validation stricte `count ‚â• 0`, bouton d√©sactiv√© si champ vide, persistance d‚Äô√©tat √† la rotation).
