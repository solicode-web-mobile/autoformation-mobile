---
title: 6. UI de base
layout: home
nav_order: 6
parent: 5.1. Bien démarrer le Mobile
permalink: /mobile-onboarding/ui-base/
code: 5.1.6
competence: C5
autoformation: "C5.1"
ua: "5.1.U3"
duree_h: 1.5
objectif: "Construire un écran Compose avec TextField, bouton de salutation, message et compteur (−/valeur/+), accessible et Material 3."
notions_nouvelles: ["TextField", "Button/IconButton", "strings.xml", "Accessibilité (contentDescription)"]
fil_rouge: "Écran Hello + Compteur (Compose) — base de l’App Mobile ; futur raccord à l’API du Blog"
livrable_chapitre: "`MainScreen` fonctionnel + `strings.xml` mis à jour + capture d’écran émulateur"
alimentation_prototype: "Écran prêt pour démonstration (APK debug) N2"
alimentation_miniprojet: "Socle UI réutilisable avant intégration réseau N3"
---
Parfait 👌 Fouad.
Vu ton `build.gradle.kts` et les besoins du chapitre **5.1.6 – UI de base**, je t’ai refait le **tutoriel complet corrigé** (avec les icônes `Add/Remove`). Tu pourras suivre les étapes comme un apprenant.

---

# 📘 5.1.6 — UI de base

## 📒 Glossaire minute

* **TextField** : champ de saisie texte (*Prénom*).
* **Button / IconButton** : actions UI (dire bonjour, − / +).
* **Message** : texte « Bonjour, *Prénom* ! ».
* **Compteur** : trio (**− / valeur / +**) avec règle `count ≥ 0`.

> ⚠️ Ici on met un **état simple** (prévisualisation). La gestion d’état avancée (*rememberSaveable*, validations) arrive au chapitre **5.1.7**.

---

## 🎯 Objectif pédagogique

Construire un écran Compose unique avec :

1. Un **TextField “Prénom”**.
2. Un **bouton “Dire bonjour”** qui affiche un message.
3. Un **bloc compteur (− / valeur / +)** avec **− désactivé à 0**.
4. Textes externalisés dans **`strings.xml`** + **accessibilité**.

---

## 🛠 Étape 0 — Vérifier `build.gradle.kts`

Ton fichier est déjà prêt 🎉. Ajoute juste la dépendance pour les icônes Material.

```kotlin
dependencies {
    implementation(libs.androidx.core.ktx)
    implementation(libs.androidx.lifecycle.runtime.ktx)
    implementation(libs.androidx.activity.compose)
    implementation(platform(libs.androidx.compose.bom))
    implementation(libs.androidx.compose.ui)
    implementation(libs.androidx.compose.ui.graphics)
    implementation(libs.androidx.compose.ui.tooling.preview)
    implementation(libs.androidx.compose.material3)

    // 👉 Ajout pour les icônes (Add/Remove)
    implementation("androidx.compose.material:material-icons-extended")

    testImplementation(libs.junit)
    androidTestImplementation(libs.androidx.junit)
    androidTestImplementation(libs.androidx.espresso.core)
    androidTestImplementation(platform(libs.androidx.compose.bom))
    androidTestImplementation(libs.androidx.compose.ui.test.junit4)
    debugImplementation(libs.androidx.compose.ui.tooling)
    debugImplementation(libs.androidx.compose.ui.test.manifest)
}
```

---

## 🗂️ Étape 1 — Créer/mettre à jour `strings.xml`

Chemin : `app/src/main/res/values/strings.xml`

```xml
<resources>
    <string name="app_name">HelloCounter</string>

    <!-- UI -->
    <string name="label_firstname">Prénom</string>
    <string name="ph_firstname">Entrez votre prénom</string>
    <string name="btn_greet">Dire bonjour</string>
    <string name="msg_greeting">Bonjour, %1$s !</string>
    <string name="title_counter">Compteur</string>

    <!-- Accessibilité -->
    <string name="cd_decrement">Diminuer la valeur</string>
    <string name="cd_increment">Augmenter la valeur</string>
    <string name="cd_counter_value">Valeur actuelle : %1$d</string>
</resources>
```

---

## 📝 Étape 2 — Créer l’écran `MainScreen.kt`

Chemin : `app/src/main/kotlin/com/solicode/hellocounter/ui/MainScreen.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.foundation.verticalScroll
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Add
import androidx.compose.material.icons.filled.Remove
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.testTag
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.semantics.contentDescription
import androidx.compose.ui.semantics.semantics
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.unit.dp
import com.solicode.hellocounter.R

@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    var name by remember { mutableStateOf("") }
    var greetingName by remember { mutableStateOf<String?>(null) }
    var count by remember { mutableStateOf(0) }

    // 🔹 Préparer les textes d’accessibilité (utilisés dans semantics)
    val decrementCd = stringResource(R.string.cd_decrement)
    val incrementCd = stringResource(R.string.cd_increment)
    val counterCd = stringResource(R.string.cd_counter_value, count)

    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(16.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        // 1) Champ Prénom
        OutlinedTextField(
            value = name,
            onValueChange = { name = it },
            label = { Text(stringResource(R.string.label_firstname)) },
            placeholder = { Text(stringResource(R.string.ph_firstname)) },
            singleLine = true,
            keyboardOptions = KeyboardOptions.Default.copy(
                imeAction = ImeAction.Done
            ),
            modifier = Modifier.fillMaxWidth().testTag("tf_firstname")
        )

        // 2) Bouton Dire bonjour
        Button(
            onClick = {
                greetingName = name.takeIf { it.isNotBlank() }?.trim()
            },
            enabled = name.isNotBlank(),
            modifier = Modifier.fillMaxWidth()
        ) {
            Text(stringResource(R.string.btn_greet))
        }

        // 3) Message
        if (greetingName != null) {
            AssistChip(
                onClick = { },
                label = {
                    Text(stringResource(R.string.msg_greeting, greetingName!!))
                }
            )
        }

        // 4) Titre compteur
        Text(
            text = stringResource(R.string.title_counter),
            style = MaterialTheme.typography.titleMedium
        )

        // 5) Bloc compteur
        Row(
            verticalAlignment = Alignment.CenterVertically,
            horizontalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            IconButton(
                onClick = { if (count > 0) count-- },
                enabled = count > 0,
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = decrementCd }
            ) {
                Icon(Icons.Filled.Remove, contentDescription = null)
            }

            Text(
                text = "$count",
                style = MaterialTheme.typography.headlineSmall,
                modifier = Modifier
                    .widthIn(min = 40.dp)
                    .semantics { contentDescription = counterCd }
            )

            IconButton(
                onClick = { count++ },
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = incrementCd }
            ) {
                Icon(Icons.Filled.Add, contentDescription = null)
            }
        }
    }
}

```

---

## 📲 Étape 3 — Mettre à jour `MainActivity.kt`

Chemin : `app/src/main/kotlin/com/solicode/hellocounter/MainActivity.kt`

```kotlin
package com.solicode.hellocounter

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.tooling.preview.Preview
import com.solicode.hellocounter.ui.MainScreen


class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            MaterialTheme {
                MainScreen()
            }
        }
    }
}


```

---

## 👀 Étape 4 — Ajouter une Preview

Toujours dans `MainScreen.kt` :

```kotlin
// 🔹 Preview intégrée (affichage direct dans Android Studio)
@Preview(showBackground = true, widthDp = 360)
@Composable
fun PreviewMainScreen() {
    MaterialTheme {
        MainScreen()
    }
}
```

---

## 🎯 Vérifications rapides

* [ ] **Preview** affiche le formulaire + compteur.
* [ ] Bouton **Dire bonjour** activé quand prénom ≠ vide.
* [ ] Message affiché après clic.
* [ ] Bouton **−** désactivé à `0`.
* [ ] Tous les textes proviennent de `strings.xml`.

---

## 📦 Livrables attendus

* `MainScreen.kt` fonctionnel.
* `strings.xml` mis à jour.
* Capture d’écran de l’UI sur l’émulateur.

 





 Voici l’article pas-à-pas pour créer **deux composants séparés** : d’abord **DireBonjourSection**, on **compile & exécute** pour vérifier, puis on ajoute **CompteurSection**.

---

# 📘 5.1.6 — UI de base en 2 temps

**Temps 1 : Dire bonjour → tester**
**Temps 2 : Ajouter le compteur → retester**

> Pré-requis : ton `build.gradle.kts` contient déjà Compose + Material 3 et **material-icons-extended**.

```kotlin
// build.gradle.kts (rappel)
dependencies {
    implementation(platform(libs.androidx.compose.bom))
    implementation(libs.androidx.activity.compose)
    implementation(libs.androidx.compose.ui)
    implementation(libs.androidx.compose.ui.graphics)
    implementation(libs.androidx.compose.ui.tooling.preview)
    implementation(libs.androidx.compose.material3)
    implementation("androidx.compose.material:material-icons-extended") // icônes +/−
}
```

## 🗂️ 1) Préparer les ressources (une seule fois)

**Chemin** : `app/src/main/res/values/strings.xml`

```xml
<resources>
    <string name="app_name">HelloCounter</string>

    <!-- Dire bonjour -->
    <string name="label_firstname">Prénom</string>
    <string name="ph_firstname">Entrez votre prénom</string>
    <string name="btn_greet">Dire bonjour</string>
    <string name="msg_greeting">Bonjour, %1$s !</string>

    <!-- Compteur -->
    <string name="title_counter">Compteur</string>
    <string name="cd_decrement">Diminuer la valeur</string>
    <string name="cd_increment">Augmenter la valeur</string>
    <string name="cd_counter_value">Valeur actuelle : %1$d</string>
</resources>
```

---

## ⏱️ Temps 1 — Créer **DireBonjourSection** et tester

### A. Créer le composant « Dire bonjour »

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/ui/GreetSection.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.testTag
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.unit.dp
import com.solicode.hellocounter.R

@Composable
fun DireBonjourSection(modifier: Modifier = Modifier) {
    var name by remember { mutableStateOf("") }
    var greetingName by remember { mutableStateOf<String?>(null) }

    Column(
        modifier = modifier.fillMaxWidth(),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        OutlinedTextField(
            value = name,
            onValueChange = { name = it },
            label = { Text(stringResource(R.string.label_firstname)) },
            placeholder = { Text(stringResource(R.string.ph_firstname)) },
            singleLine = true,
            keyboardOptions = KeyboardOptions.Default.copy(imeAction = ImeAction.Done),
            modifier = Modifier.fillMaxWidth().testTag("tf_firstname")
        )

        Button(
            onClick = { greetingName = name.takeIf { it.isNotBlank() }?.trim() },
            enabled = name.isNotBlank(),
            modifier = Modifier.fillMaxWidth()
        ) {
            Text(stringResource(R.string.btn_greet))
        }

        if (greetingName != null) {
            AssistChip(
                onClick = { /* no-op */ },
                label = { Text(stringResource(R.string.msg_greeting, greetingName!!)) }
            )
        }
    }
}
```

### B. Afficher **uniquement** DireBonjourSection dans l’écran

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/ui/MainScreen.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.material3.*
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp

@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(24.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        DireBonjourSection()
        // ⛔️ Le compteur sera ajouté au Temps 2
    }
}
```

### C. MainActivity + Preview (test rapide)

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/MainActivity.kt`

```kotlin
package com.solicode.hellocounter

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.material3.MaterialTheme
import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.solicode.hellocounter.ui.MainScreen

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent { MaterialTheme { MainScreen() } }
    }
}

@Preview(showBackground = true, widthDp = 360)
@Composable
fun PreviewMainScreen() {
    MaterialTheme { MainScreen() }
}
```

### ✅ Compiler & exécuter (vérifier)

1. **Build > Make Project** (ou 🛠️ icône marteau).
2. **Run ‘app’** sur émulateur/appareil.
3. Tester :

   * Le bouton **Dire bonjour** est **désactivé** si le champ est vide.
   * En entrant « Fouad » puis en cliquant → **Bonjour, Fouad !** s’affiche.

---

## ⏱️ Temps 2 — Ajouter **CompteurSection** puis retester

### D. Créer le composant « Compteur »

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/ui/CounterSection.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Add
import androidx.compose.material.icons.filled.Remove
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.semantics.contentDescription
import androidx.compose.ui.semantics.semantics
import androidx.compose.ui.unit.dp
import androidx.compose.ui.res.stringResource
import com.solicode.hellocounter.R

@Composable
fun CompteurSection(modifier: Modifier = Modifier) {
    var count by remember { mutableStateOf(0) }

    // Préparer les textes a11y dans le contexte @Composable
    val decrementCd = stringResource(R.string.cd_decrement)
    val incrementCd = stringResource(R.string.cd_increment)
    val counterCd   = stringResource(R.string.cd_counter_value, count)

    Column(
        modifier = modifier.fillMaxWidth(),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        Text(
            text = stringResource(R.string.title_counter),
            style = MaterialTheme.typography.titleMedium
        )

        Row(
            horizontalArrangement = Arrangement.spacedBy(12.dp),
            modifier = Modifier.fillMaxWidth()
        ) {
            IconButton(
                onClick = { if (count > 0) count-- },
                enabled = count > 0,
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = decrementCd }
            ) {
                Icon(Icons.Filled.Remove, contentDescription = null)
            }

            Text(
                text = "$count",
                style = MaterialTheme.typography.headlineSmall,
                modifier = Modifier
                    .widthIn(min = 40.dp)
                    .semantics { contentDescription = counterCd }
            )

            IconButton(
                onClick = { count++ },
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = incrementCd }
            ) {
                Icon(Icons.Filled.Add, contentDescription = null)
            }
        }
    }
}
```

### E. Intégrer le compteur dans `MainScreen`

**Mettre à jour** `MainScreen.kt` pour appeler **les deux** sections :

```kotlin
@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(24.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        DireBonjourSection()
        CompteurSection()   // ✅ ajout au Temps 2
    }
}
```

### ✅ Recompiler & retester

* **Run ‘app’**.
* Vérifier :

  * **Dire bonjour** fonctionne comme avant.
  * **Compteur** : `−` désactivé à `0`, `+` incrémente, a11y OK.

---

## ✅ Definition of Done (DoD)

* [ ] Deux composants indépendants : `DireBonjourSection`, `CompteurSection`.
* [ ] `MainScreen` affiche uniquement **Dire bonjour** au Temps 1 ; **les deux** au Temps 2.
* [ ] Textes externalisés (`strings.xml`), Material 3 OK.
* [ ] Accessibilité : descriptions pour `−`, `+`, valeur.
* [ ] Preview et exécution sur appareil OK.

Tu veux la **version zip des 3 fichiers `.kt`** prêts à déposer (structure de dossiers incluse) ? Je peux te la générer.
