---
title: 6. UI de base
layout: home
nav_order: 6
parent: 5.1. Bien d√©marrer le Mobile
permalink: /mobile-onboarding/ui-base/
code: 5.1.6
competence: C5
autoformation: "C5.1"
ua: "5.1.U3"
duree_h: 1.5
objectif: "Construire un √©cran Compose avec TextField, bouton de salutation, message et compteur (‚àí/valeur/+), accessible et Material 3."
notions_nouvelles: ["TextField", "Button/IconButton", "strings.xml", "Accessibilit√© (contentDescription)"]
fil_rouge: "√âcran Hello + Compteur (Compose) ‚Äî base de l‚ÄôApp Mobile ; futur raccord √† l‚ÄôAPI du Blog"
livrable_chapitre: "`MainScreen` fonctionnel + `strings.xml` mis √† jour + capture d‚Äô√©cran √©mulateur"
alimentation_prototype: "√âcran pr√™t pour d√©monstration (APK debug) N2"
alimentation_miniprojet: "Socle UI r√©utilisable avant int√©gration r√©seau N3"
---
Parfait üëå Fouad.
Vu ton `build.gradle.kts` et les besoins du chapitre **5.1.6 ‚Äì UI de base**, je t‚Äôai refait le **tutoriel complet corrig√©** (avec les ic√¥nes `Add/Remove`). Tu pourras suivre les √©tapes comme un apprenant.

---

# üìò 5.1.6 ‚Äî UI de base

## üìí Glossaire minute

* **TextField** : champ de saisie texte (*Pr√©nom*).
* **Button / IconButton** : actions UI (dire bonjour, ‚àí / +).
* **Message** : texte ¬´ Bonjour, *Pr√©nom* ! ¬ª.
* **Compteur** : trio (**‚àí / valeur / +**) avec r√®gle `count ‚â• 0`.

> ‚ö†Ô∏è Ici on met un **√©tat simple** (pr√©visualisation). La gestion d‚Äô√©tat avanc√©e (*rememberSaveable*, validations) arrive au chapitre **5.1.7**.

---

## üéØ Objectif p√©dagogique

Construire un √©cran Compose unique avec :

1. Un **TextField ‚ÄúPr√©nom‚Äù**.
2. Un **bouton ‚ÄúDire bonjour‚Äù** qui affiche un message.
3. Un **bloc compteur (‚àí / valeur / +)** avec **‚àí d√©sactiv√© √† 0**.
4. Textes externalis√©s dans **`strings.xml`** + **accessibilit√©**.

---

## üõ† √âtape 0 ‚Äî V√©rifier `build.gradle.kts`

Ton fichier est d√©j√† pr√™t üéâ. Ajoute juste la d√©pendance pour les ic√¥nes Material.

```kotlin
dependencies {
    implementation(libs.androidx.core.ktx)
    implementation(libs.androidx.lifecycle.runtime.ktx)
    implementation(libs.androidx.activity.compose)
    implementation(platform(libs.androidx.compose.bom))
    implementation(libs.androidx.compose.ui)
    implementation(libs.androidx.compose.ui.graphics)
    implementation(libs.androidx.compose.ui.tooling.preview)
    implementation(libs.androidx.compose.material3)

    // üëâ Ajout pour les ic√¥nes (Add/Remove)
    implementation("androidx.compose.material:material-icons-extended")

    testImplementation(libs.junit)
    androidTestImplementation(libs.androidx.junit)
    androidTestImplementation(libs.androidx.espresso.core)
    androidTestImplementation(platform(libs.androidx.compose.bom))
    androidTestImplementation(libs.androidx.compose.ui.test.junit4)
    debugImplementation(libs.androidx.compose.ui.tooling)
    debugImplementation(libs.androidx.compose.ui.test.manifest)
}
```

---

## üóÇÔ∏è √âtape 1 ‚Äî Cr√©er/mettre √† jour `strings.xml`

Chemin : `app/src/main/res/values/strings.xml`

```xml
<resources>
    <string name="app_name">HelloCounter</string>

    <!-- UI -->
    <string name="label_firstname">Pr√©nom</string>
    <string name="ph_firstname">Entrez votre pr√©nom</string>
    <string name="btn_greet">Dire bonjour</string>
    <string name="msg_greeting">Bonjour, %1$s !</string>
    <string name="title_counter">Compteur</string>

    <!-- Accessibilit√© -->
    <string name="cd_decrement">Diminuer la valeur</string>
    <string name="cd_increment">Augmenter la valeur</string>
    <string name="cd_counter_value">Valeur actuelle : %1$d</string>
</resources>
```

---

## üìù √âtape 2 ‚Äî Cr√©er l‚Äô√©cran `MainScreen.kt`

Chemin : `app/src/main/kotlin/com/solicode/hellocounter/ui/MainScreen.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.foundation.verticalScroll
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Add
import androidx.compose.material.icons.filled.Remove
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.testTag
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.semantics.contentDescription
import androidx.compose.ui.semantics.semantics
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.unit.dp
import com.solicode.hellocounter.R

@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    var name by remember { mutableStateOf("") }
    var greetingName by remember { mutableStateOf<String?>(null) }
    var count by remember { mutableStateOf(0) }

    // üîπ Pr√©parer les textes d‚Äôaccessibilit√© (utilis√©s dans semantics)
    val decrementCd = stringResource(R.string.cd_decrement)
    val incrementCd = stringResource(R.string.cd_increment)
    val counterCd = stringResource(R.string.cd_counter_value, count)

    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(16.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        // 1) Champ Pr√©nom
        OutlinedTextField(
            value = name,
            onValueChange = { name = it },
            label = { Text(stringResource(R.string.label_firstname)) },
            placeholder = { Text(stringResource(R.string.ph_firstname)) },
            singleLine = true,
            keyboardOptions = KeyboardOptions.Default.copy(
                imeAction = ImeAction.Done
            ),
            modifier = Modifier.fillMaxWidth().testTag("tf_firstname")
        )

        // 2) Bouton Dire bonjour
        Button(
            onClick = {
                greetingName = name.takeIf { it.isNotBlank() }?.trim()
            },
            enabled = name.isNotBlank(),
            modifier = Modifier.fillMaxWidth()
        ) {
            Text(stringResource(R.string.btn_greet))
        }

        // 3) Message
        if (greetingName != null) {
            AssistChip(
                onClick = { },
                label = {
                    Text(stringResource(R.string.msg_greeting, greetingName!!))
                }
            )
        }

        // 4) Titre compteur
        Text(
            text = stringResource(R.string.title_counter),
            style = MaterialTheme.typography.titleMedium
        )

        // 5) Bloc compteur
        Row(
            verticalAlignment = Alignment.CenterVertically,
            horizontalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            IconButton(
                onClick = { if (count > 0) count-- },
                enabled = count > 0,
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = decrementCd }
            ) {
                Icon(Icons.Filled.Remove, contentDescription = null)
            }

            Text(
                text = "$count",
                style = MaterialTheme.typography.headlineSmall,
                modifier = Modifier
                    .widthIn(min = 40.dp)
                    .semantics { contentDescription = counterCd }
            )

            IconButton(
                onClick = { count++ },
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = incrementCd }
            ) {
                Icon(Icons.Filled.Add, contentDescription = null)
            }
        }
    }
}

```

---

## üì≤ √âtape 3 ‚Äî Mettre √† jour `MainActivity.kt`

Chemin : `app/src/main/kotlin/com/solicode/hellocounter/MainActivity.kt`

```kotlin
package com.solicode.hellocounter

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.tooling.preview.Preview
import com.solicode.hellocounter.ui.MainScreen


class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            MaterialTheme {
                MainScreen()
            }
        }
    }
}


```

---

## üëÄ √âtape 4 ‚Äî Ajouter une Preview

Toujours dans `MainScreen.kt` :

```kotlin
// üîπ Preview int√©gr√©e (affichage direct dans Android Studio)
@Preview(showBackground = true, widthDp = 360)
@Composable
fun PreviewMainScreen() {
    MaterialTheme {
        MainScreen()
    }
}
```

---

## üéØ V√©rifications rapides

* [ ] **Preview** affiche le formulaire + compteur.
* [ ] Bouton **Dire bonjour** activ√© quand pr√©nom ‚â† vide.
* [ ] Message affich√© apr√®s clic.
* [ ] Bouton **‚àí** d√©sactiv√© √† `0`.
* [ ] Tous les textes proviennent de `strings.xml`.

---

## üì¶ Livrables attendus

* `MainScreen.kt` fonctionnel.
* `strings.xml` mis √† jour.
* Capture d‚Äô√©cran de l‚ÄôUI sur l‚Äô√©mulateur.

 





 Voici l‚Äôarticle pas-√†-pas pour cr√©er **deux composants s√©par√©s** : d‚Äôabord **DireBonjourSection**, on **compile & ex√©cute** pour v√©rifier, puis on ajoute **CompteurSection**.

---

# üìò 5.1.6 ‚Äî UI de base en 2 temps

**Temps 1 : Dire bonjour ‚Üí tester**
**Temps 2 : Ajouter le compteur ‚Üí retester**

> Pr√©-requis : ton `build.gradle.kts` contient d√©j√† Compose + Material 3 et **material-icons-extended**.

```kotlin
// build.gradle.kts (rappel)
dependencies {
    implementation(platform(libs.androidx.compose.bom))
    implementation(libs.androidx.activity.compose)
    implementation(libs.androidx.compose.ui)
    implementation(libs.androidx.compose.ui.graphics)
    implementation(libs.androidx.compose.ui.tooling.preview)
    implementation(libs.androidx.compose.material3)
    implementation("androidx.compose.material:material-icons-extended") // ic√¥nes +/‚àí
}
```

## üóÇÔ∏è 1) Pr√©parer les ressources (une seule fois)

**Chemin** : `app/src/main/res/values/strings.xml`

```xml
<resources>
    <string name="app_name">HelloCounter</string>

    <!-- Dire bonjour -->
    <string name="label_firstname">Pr√©nom</string>
    <string name="ph_firstname">Entrez votre pr√©nom</string>
    <string name="btn_greet">Dire bonjour</string>
    <string name="msg_greeting">Bonjour, %1$s !</string>

    <!-- Compteur -->
    <string name="title_counter">Compteur</string>
    <string name="cd_decrement">Diminuer la valeur</string>
    <string name="cd_increment">Augmenter la valeur</string>
    <string name="cd_counter_value">Valeur actuelle : %1$d</string>
</resources>
```

---

## ‚è±Ô∏è Temps 1 ‚Äî Cr√©er **DireBonjourSection** et tester

### A. Cr√©er le composant ¬´ Dire bonjour ¬ª

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/ui/GreetSection.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.testTag
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.unit.dp
import com.solicode.hellocounter.R

@Composable
fun DireBonjourSection(modifier: Modifier = Modifier) {
    var name by remember { mutableStateOf("") }
    var greetingName by remember { mutableStateOf<String?>(null) }

    Column(
        modifier = modifier.fillMaxWidth(),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        OutlinedTextField(
            value = name,
            onValueChange = { name = it },
            label = { Text(stringResource(R.string.label_firstname)) },
            placeholder = { Text(stringResource(R.string.ph_firstname)) },
            singleLine = true,
            keyboardOptions = KeyboardOptions.Default.copy(imeAction = ImeAction.Done),
            modifier = Modifier.fillMaxWidth().testTag("tf_firstname")
        )

        Button(
            onClick = { greetingName = name.takeIf { it.isNotBlank() }?.trim() },
            enabled = name.isNotBlank(),
            modifier = Modifier.fillMaxWidth()
        ) {
            Text(stringResource(R.string.btn_greet))
        }

        if (greetingName != null) {
            AssistChip(
                onClick = { /* no-op */ },
                label = { Text(stringResource(R.string.msg_greeting, greetingName!!)) }
            )
        }
    }
}
```

### B. Afficher **uniquement** DireBonjourSection dans l‚Äô√©cran

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/ui/MainScreen.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.material3.*
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp

@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(24.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        DireBonjourSection()
        // ‚õîÔ∏è Le compteur sera ajout√© au Temps 2
    }
}
```

### C. MainActivity + Preview (test rapide)

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/MainActivity.kt`

```kotlin
package com.solicode.hellocounter

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.material3.MaterialTheme
import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.solicode.hellocounter.ui.MainScreen

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent { MaterialTheme { MainScreen() } }
    }
}

@Preview(showBackground = true, widthDp = 360)
@Composable
fun PreviewMainScreen() {
    MaterialTheme { MainScreen() }
}
```

### ‚úÖ Compiler & ex√©cuter (v√©rifier)

1. **Build > Make Project** (ou üõ†Ô∏è ic√¥ne marteau).
2. **Run ‚Äòapp‚Äô** sur √©mulateur/appareil.
3. Tester :

   * Le bouton **Dire bonjour** est **d√©sactiv√©** si le champ est vide.
   * En entrant ¬´ Fouad ¬ª puis en cliquant ‚Üí **Bonjour, Fouad !** s‚Äôaffiche.

---

## ‚è±Ô∏è Temps 2 ‚Äî Ajouter **CompteurSection** puis retester

### D. Cr√©er le composant ¬´ Compteur ¬ª

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/ui/CounterSection.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Add
import androidx.compose.material.icons.filled.Remove
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.semantics.contentDescription
import androidx.compose.ui.semantics.semantics
import androidx.compose.ui.unit.dp
import androidx.compose.ui.res.stringResource
import com.solicode.hellocounter.R

@Composable
fun CompteurSection(modifier: Modifier = Modifier) {
    var count by remember { mutableStateOf(0) }

    // Pr√©parer les textes a11y dans le contexte @Composable
    val decrementCd = stringResource(R.string.cd_decrement)
    val incrementCd = stringResource(R.string.cd_increment)
    val counterCd   = stringResource(R.string.cd_counter_value, count)

    Column(
        modifier = modifier.fillMaxWidth(),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        Text(
            text = stringResource(R.string.title_counter),
            style = MaterialTheme.typography.titleMedium
        )

        Row(
            horizontalArrangement = Arrangement.spacedBy(12.dp),
            modifier = Modifier.fillMaxWidth()
        ) {
            IconButton(
                onClick = { if (count > 0) count-- },
                enabled = count > 0,
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = decrementCd }
            ) {
                Icon(Icons.Filled.Remove, contentDescription = null)
            }

            Text(
                text = "$count",
                style = MaterialTheme.typography.headlineSmall,
                modifier = Modifier
                    .widthIn(min = 40.dp)
                    .semantics { contentDescription = counterCd }
            )

            IconButton(
                onClick = { count++ },
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = incrementCd }
            ) {
                Icon(Icons.Filled.Add, contentDescription = null)
            }
        }
    }
}
```

### E. Int√©grer le compteur dans `MainScreen`

**Mettre √† jour** `MainScreen.kt` pour appeler **les deux** sections :

```kotlin
@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(24.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        DireBonjourSection()
        CompteurSection()   // ‚úÖ ajout au Temps 2
    }
}
```

### ‚úÖ Recompiler & retester

* **Run ‚Äòapp‚Äô**.
* V√©rifier :

  * **Dire bonjour** fonctionne comme avant.
  * **Compteur** : `‚àí` d√©sactiv√© √† `0`, `+` incr√©mente, a11y OK.

---

## ‚úÖ Definition of Done (DoD)

* [ ] Deux composants ind√©pendants : `DireBonjourSection`, `CompteurSection`.
* [ ] `MainScreen` affiche uniquement **Dire bonjour** au Temps 1 ; **les deux** au Temps 2.
* [ ] Textes externalis√©s (`strings.xml`), Material 3 OK.
* [ ] Accessibilit√© : descriptions pour `‚àí`, `+`, valeur.
* [ ] Preview et ex√©cution sur appareil OK.

Tu veux la **version zip des 3 fichiers `.kt`** pr√™ts √† d√©poser (structure de dossiers incluse) ? Je peux te la g√©n√©rer.
