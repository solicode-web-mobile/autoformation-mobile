---
title: 6. UI de base
layout: home
nav_order: 6
parent: 5.1. Bien d√©marrer le Mobile
permalink: /mobile-onboarding/ui-base/
code: 5.1.6
competence: C5
autoformation: "C5.1"
ua: "5.1.U3"
duree_h: 1.5
objectif: "Construire un √©cran Compose avec TextField, bouton de salutation, message et compteur (‚àí/valeur/+), accessible et Material 3."
notions_nouvelles: ["TextField", "Button/IconButton", "strings.xml", "Accessibilit√© (contentDescription)"]
fil_rouge: "√âcran Hello + Compteur (Compose) ‚Äî base de l‚ÄôApp Mobile ; futur raccord √† l‚ÄôAPI du Blog"
livrable_chapitre: "`MainScreen` fonctionnel + `strings.xml` mis √† jour + capture d‚Äô√©cran √©mulateur"
alimentation_prototype: "√âcran pr√™t pour d√©monstration (APK debug) N2"
alimentation_miniprojet: "Socle UI r√©utilisable avant int√©gration r√©seau N3"
---

# üìò 5.1.6 ‚Äî UI de base

## üìí Glossaire minute

* **TextField** : champ de saisie texte (*Pr√©nom*), avec libell√©s/placeholder issus de `strings.xml`.
* **Button / IconButton** : actions UI (dire bonjour, **‚àí / +**), cibles tappables ‚â• **48.dp**.
* **Message** : affichage dynamique ¬´ Bonjour, *Pr√©nom* ! ¬ª format√© via `stringResource`.
* **Compteur** : trio (**‚àí / valeur / +**), r√®gle **`count ‚â• 0`** et √©tat local minimal.

> ‚ö†Ô∏è On reste sur un **√©tat simple** pour la pr√©visualisation. Les aspects avanc√©s (*rememberSaveable*, validations fines, persistance √† la rotation) arrivent au **chapitre 5.1.7**.

---

## üéØ Objectif p√©dagogique

Construire l‚Äô√©cran Compose en **2 composants** et en **2 temps** :

1. **DireBonjourSection**  
   - Champ texte pour saisir un pr√©nom.  
   - Bouton **Dire bonjour** (d√©sactiv√© si vide).  
   - Message de salutation affich√© uniquement si le pr√©nom est saisi.  
   - ‚úÖ Compiler et ex√©cuter pour tester cette partie seule.  

2. **CompteurSection**  
   - Bloc compteur (‚àí / valeur / +).  
   - Bouton **‚àí** d√©sactiv√© √† 0.  
   - Textes externalis√©s et accessibilit√© pour lecteurs d‚Äô√©cran.  
   - ‚úÖ Recompiler et tester l‚Äôensemble.  

---

## Pr√©-requis

Ton `build.gradle.kts` doit contenir Compose + Material 3 et les **ic√¥nes Material** :

```kotlin
dependencies {
    implementation(platform(libs.androidx.compose.bom))
    implementation(libs.androidx.activity.compose)
    implementation(libs.androidx.compose.ui)
    implementation(libs.androidx.compose.ui.graphics)
    implementation(libs.androidx.compose.ui.tooling.preview)
    implementation(libs.androidx.compose.material3)
    implementation("androidx.compose.material:material-icons-extended") // ic√¥nes +/‚àí
}
````

---

## üóÇÔ∏è 1) Pr√©parer les ressources

Avant de coder, on met tous les textes dans `strings.xml`.
Cela √©vite le hard-coding, facilite la traduction, uniformise les labels et pr√©pare l‚Äôaccessibilit√© (TalkBack).

**Chemin** : `app/src/main/res/values/strings.xml`

```xml
<resources>
    <string name="app_name">HelloCounter</string>

    <!-- Dire bonjour -->
    <string name="label_firstname">Pr√©nom</string>
    <string name="ph_firstname">Entrez votre pr√©nom</string>
    <string name="btn_greet">Dire bonjour</string>
    <string name="msg_greeting">Bonjour, %1$s !</string>

    <!-- Compteur -->
    <string name="title_counter">Compteur</string>
    <string name="cd_decrement">Diminuer la valeur</string>
    <string name="cd_increment">Augmenter la valeur</string>
    <string name="cd_counter_value">Valeur actuelle : %1$d</string>
</resources>
```

---

## ‚è±Ô∏è Temps 1 ‚Äî Cr√©er **DireBonjourSection** et tester

### A. Cr√©er le composant ¬´ Dire bonjour ¬ª

**Chemin** : `ui/GreetSection.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.testTag
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.unit.dp
import com.solicode.hellocounter.R

@Composable
fun DireBonjourSection(modifier: Modifier = Modifier) {
    var name by remember { mutableStateOf("") }
    var greetingName by remember { mutableStateOf<String?>(null) }

    Column(
        modifier = modifier.fillMaxWidth(),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        OutlinedTextField(
            value = name,
            onValueChange = { name = it },
            label = { Text(stringResource(R.string.label_firstname)) },
            placeholder = { Text(stringResource(R.string.ph_firstname)) },
            singleLine = true,
            keyboardOptions = KeyboardOptions.Default.copy(imeAction = ImeAction.Done),
            modifier = Modifier.fillMaxWidth().testTag("tf_firstname")
        )

        Button(
            onClick = { greetingName = name.takeIf { it.isNotBlank() }?.trim() },
            enabled = name.isNotBlank(),
            modifier = Modifier.fillMaxWidth()
        ) {
            Text(stringResource(R.string.btn_greet))
        }

        if (greetingName != null) {
            AssistChip(
                onClick = { /* no-op */ },
                label = { Text(stringResource(R.string.msg_greeting, greetingName!!)) }
            )
        }
    }
}
```

**Explications :**

* **`remember`** : m√©morise une valeur √† travers les recompositions.
* **`mutableStateOf`** : cr√©e un √©tat observable. Quand il change, l‚ÄôUI se redessine.
* **`Column`** : organise ses enfants verticalement avec un espacement fixe (`spacedBy(12.dp)`).
* **`Modifier`** : configure la mise en page du composant (ici `fillMaxWidth()` pour occuper toute la largeur).
* **`OutlinedTextField`** : champ de saisie stylis√© Material 3 avec label et placeholder.
* **`Button`** : d√©sactiv√© tant que `name` est vide, met √† jour `greetingName` au clic.
* **`AssistChip`** : affiche le message ¬´ Bonjour, Pr√©nom ! ¬ª uniquement si `greetingName` n‚Äôest pas nul.

---

### B. Afficher seulement DireBonjourSection

**Chemin** : `ui/MainScreen.kt`

```kotlin

package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.material3.*
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp

@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(24.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        DireBonjourSection()
        // ‚õî Le compteur sera ajout√© plus tard
    }
}
```

**Explication :**
On affiche uniquement la section ¬´ Dire bonjour ¬ª pour tester ind√©pendamment cette partie.

---

### C. MainActivity + Preview

```kotlin
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent { MaterialTheme { MainScreen() } }
    }
}

@Preview(showBackground = true, widthDp = 360)
@Composable
fun PreviewMainScreen() {
    MaterialTheme { MainScreen() }
}
```

**Explication :**

* `setContent` d√©marre l‚ÄôUI Compose dans l‚Äôactivit√© Android.
* `@Preview` permet de voir l‚Äô√©cran directement dans Android Studio sans lancer l‚Äô√©mulateur.

---

### ‚úÖ Tester

1. Compiler et ex√©cuter.
2. V√©rifier :

   * Le bouton est d√©sactiv√© si le champ est vide.
   * En entrant ¬´ Fouad ¬ª puis en cliquant ‚Üí **Bonjour, Fouad !** s‚Äôaffiche.

---

## ‚è±Ô∏è Temps 2 ‚Äî Ajouter **CompteurSection**

### D. Cr√©er le composant ¬´ Compteur ¬ª

**Chemin** : `ui/CounterSection.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Add
import androidx.compose.material.icons.filled.Remove
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.semantics.contentDescription
import androidx.compose.ui.semantics.semantics
import androidx.compose.ui.unit.dp
import androidx.compose.ui.res.stringResource
import com.solicode.hellocounter.R

@Composable
fun CompteurSection(modifier: Modifier = Modifier) {
    var count by remember { mutableStateOf(0) }

    // Pr√©parer les textes a11y dans le contexte @Composable
    val decrementCd = stringResource(R.string.cd_decrement)
    val incrementCd = stringResource(R.string.cd_increment)
    val counterCd   = stringResource(R.string.cd_counter_value, count)

    Column(
        modifier = modifier.fillMaxWidth(),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        Text(
            text = stringResource(R.string.title_counter),
            style = MaterialTheme.typography.titleMedium
        )

        Row(
            horizontalArrangement = Arrangement.spacedBy(12.dp),
            modifier = Modifier.fillMaxWidth()
        ) {
            IconButton(
                onClick = { if (count > 0) count-- },
                enabled = count > 0,
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = decrementCd }
            ) {
                Icon(Icons.Filled.Remove, contentDescription = null)
            }

            Text(
                text = "$count",
                style = MaterialTheme.typography.headlineSmall,
                modifier = Modifier
                    .widthIn(min = 40.dp)
                    .semantics { contentDescription = counterCd }
            )

            IconButton(
                onClick = { count++ },
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = incrementCd }
            ) {
                Icon(Icons.Filled.Add, contentDescription = null)
            }
        }
    }
}
```

**Explications :**

* **`remember` + `mutableStateOf(0)`** : initialise et m√©morise l‚Äô√©tat du compteur.
* **`Column`** : structure verticale contenant le titre et la rang√©e de boutons.
* **`Row`** : aligne horizontalement les √©l√©ments du compteur.
* **`Modifier`** : ajuste largeur, taille des boutons et ajoute les descriptions d‚Äôaccessibilit√©.
* **`IconButton`** : boutons ‚àí et +, avec logique activ√©e/d√©sactiv√©e.
* **`Text("$count")`** : affiche la valeur actuelle du compteur.

---

### E. Int√©grer le compteur dans MainScreen

```kotlin
@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(24.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        DireBonjourSection()
        CompteurSection() // ‚úÖ Ajout√© au Temps 2
    }
}
```

**Explication :**
On affiche maintenant les **deux sections** dans l‚Äô√©cran principal : ¬´ Dire bonjour ¬ª puis ¬´ Compteur ¬ª.

---

### ‚úÖ Tester

* Lancer l‚Äôapplication.
* V√©rifier que :

  * La salutation fonctionne comme avant.
  * Le compteur commence √† 0, **‚àí** est d√©sactiv√© √† 0, et **+** incr√©mente correctement.

---

## ‚úÖ Definition of Done (DoD)

* Deux composants ind√©pendants : `DireBonjourSection`, `CompteurSection`.
* `MainScreen` affiche uniquement **Dire bonjour** au Temps 1, puis les deux au Temps 2.
* Textes externalis√©s (`strings.xml`), Material 3 respect√©.
* Accessibilit√© OK.
* Preview et ex√©cution sur appareil valid√©es.
