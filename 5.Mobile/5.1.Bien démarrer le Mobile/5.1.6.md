---
title: 6. UI de base
layout: home
nav_order: 6
parent: 5.1. Bien d√©marrer le Mobile
permalink: /mobile-onboarding/ui-base/
code: 5.1.6
competence: C5
autoformation: "C5.1"
ua: "5.1.U3"
duree_h: 1.5
objectif: "Construire un √©cran Compose avec TextField, bouton de salutation, message et compteur (‚àí/valeur/+), accessible et Material 3."
notions_nouvelles: ["TextField", "Button/IconButton", "strings.xml", "Accessibilit√© (contentDescription)"]
fil_rouge: "√âcran Hello + Compteur (Compose) ‚Äî base de l‚ÄôApp Mobile ; futur raccord √† l‚ÄôAPI du Blog"
livrable_chapitre: "`MainScreen` fonctionnel + `strings.xml` mis √† jour + capture d‚Äô√©cran √©mulateur"
alimentation_prototype: "√âcran pr√™t pour d√©monstration (APK debug) N2"
alimentation_miniprojet: "Socle UI r√©utilisable avant int√©gration r√©seau N3"
---
Parfait üëå Fouad.
Vu ton `build.gradle.kts` et les besoins du chapitre **5.1.6 ‚Äì UI de base**, je t‚Äôai refait le **tutoriel complet corrig√©** (avec les ic√¥nes `Add/Remove`). Tu pourras suivre les √©tapes comme un apprenant.

---

# üìò 5.1.6 ‚Äî UI de base

## üìí Glossaire minute

* **TextField** : champ de saisie texte (*Pr√©nom*), avec libell√©s/placeholder issus de `strings.xml`.
* **Button / IconButton** : actions UI (dire bonjour, **‚àí / +**), cibles tappables ‚â• **48.dp**.
* **Message** : affichage dynamique ¬´ Bonjour, *Pr√©nom* ! ¬ª format√© via `stringResource`.
* **Compteur** : trio (**‚àí / valeur / +**), r√®gle **`count ‚â• 0`** et √©tat local minimal.

> ‚ö†Ô∏è On reste sur un **√©tat simple** pour la pr√©visualisation. Les aspects avanc√©s (*rememberSaveable*, validations fines, persistance √† la rotation) arrivent au **chapitre 5.1.7**.

---

## üéØ Objectif p√©dagogique

Construire l‚Äô√©cran Compose en **2 composants** et en **2 temps** :

1. **DireBonjourSection** :

   * Un **TextField ‚ÄúPr√©nom‚Äù**.
   * Un **bouton ‚ÄúDire bonjour‚Äù** (d√©sactiv√© si vide) qui affiche le **message**.
   * Textes externalis√©s (`strings.xml`) et **accessibilit√©** (lecteurs d‚Äô√©cran).
   * ‚úÖ **Compiler & ex√©cuter** pour valider cette premi√®re partie.

2. **CompteurSection** :

   * Un **bloc compteur (‚àí / valeur / +)** avec **‚àí d√©sactiv√© √† 0**.
   * Descriptions **a11y** pour **‚àí / + / valeur** via `semantics`.
   * ‚úÖ **Recompiler & tester** l‚Äôensemble.

---


## Pr√©-requis

**Temps 1 : Dire bonjour ‚Üí tester**
**Temps 2 : Ajouter le compteur ‚Üí retester**

> Pr√©-requis : ton `build.gradle.kts` contient d√©j√† Compose + Material 3 et **material-icons-extended**.

```kotlin
// build.gradle.kts (rappel)
dependencies {
    implementation(platform(libs.androidx.compose.bom))
    implementation(libs.androidx.activity.compose)
    implementation(libs.androidx.compose.ui)
    implementation(libs.androidx.compose.ui.graphics)
    implementation(libs.androidx.compose.ui.tooling.preview)
    implementation(libs.androidx.compose.material3)
    implementation("androidx.compose.material:material-icons-extended") // ic√¥nes +/‚àí
}
```

## üóÇÔ∏è 1) Pr√©parer les ressources (une seule fois)

**Chemin** : `app/src/main/res/values/strings.xml`

```xml
<resources>
    <string name="app_name">HelloCounter</string>

    <!-- Dire bonjour -->
    <string name="label_firstname">Pr√©nom</string>
    <string name="ph_firstname">Entrez votre pr√©nom</string>
    <string name="btn_greet">Dire bonjour</string>
    <string name="msg_greeting">Bonjour, %1$s !</string>

    <!-- Compteur -->
    <string name="title_counter">Compteur</string>
    <string name="cd_decrement">Diminuer la valeur</string>
    <string name="cd_increment">Augmenter la valeur</string>
    <string name="cd_counter_value">Valeur actuelle : %1$d</string>
</resources>
```

---

## ‚è±Ô∏è Temps 1 ‚Äî Cr√©er **DireBonjourSection** et tester

### A. Cr√©er le composant ¬´ Dire bonjour ¬ª

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/ui/GreetSection.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.text.KeyboardOptions
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.testTag
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.text.input.ImeAction
import androidx.compose.ui.unit.dp
import com.solicode.hellocounter.R

@Composable
fun DireBonjourSection(modifier: Modifier = Modifier) {
    var name by remember { mutableStateOf("") }
    var greetingName by remember { mutableStateOf<String?>(null) }

    Column(
        modifier = modifier.fillMaxWidth(),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        OutlinedTextField(
            value = name,
            onValueChange = { name = it },
            label = { Text(stringResource(R.string.label_firstname)) },
            placeholder = { Text(stringResource(R.string.ph_firstname)) },
            singleLine = true,
            keyboardOptions = KeyboardOptions.Default.copy(imeAction = ImeAction.Done),
            modifier = Modifier.fillMaxWidth().testTag("tf_firstname")
        )

        Button(
            onClick = { greetingName = name.takeIf { it.isNotBlank() }?.trim() },
            enabled = name.isNotBlank(),
            modifier = Modifier.fillMaxWidth()
        ) {
            Text(stringResource(R.string.btn_greet))
        }

        if (greetingName != null) {
            AssistChip(
                onClick = { /* no-op */ },
                label = { Text(stringResource(R.string.msg_greeting, greetingName!!)) }
            )
        }
    }
}
```

### B. Afficher **uniquement** DireBonjourSection dans l‚Äô√©cran

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/ui/MainScreen.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.material3.*
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp

@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(24.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        DireBonjourSection()
        // ‚õîÔ∏è Le compteur sera ajout√© au Temps 2
    }
}
```

### C. MainActivity + Preview (test rapide)

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/MainActivity.kt`

```kotlin
package com.solicode.hellocounter

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.material3.MaterialTheme
import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import com.solicode.hellocounter.ui.MainScreen

class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent { MaterialTheme { MainScreen() } }
    }
}

@Preview(showBackground = true, widthDp = 360)
@Composable
fun PreviewMainScreen() {
    MaterialTheme { MainScreen() }
}
```

### ‚úÖ Compiler & ex√©cuter (v√©rifier)

1. **Build > Make Project** (ou üõ†Ô∏è ic√¥ne marteau).
2. **Run ‚Äòapp‚Äô** sur √©mulateur/appareil.
3. Tester :

   * Le bouton **Dire bonjour** est **d√©sactiv√©** si le champ est vide.
   * En entrant ¬´ Fouad ¬ª puis en cliquant ‚Üí **Bonjour, Fouad !** s‚Äôaffiche.

---

## ‚è±Ô∏è Temps 2 ‚Äî Ajouter **CompteurSection** puis retester

### D. Cr√©er le composant ¬´ Compteur ¬ª

**Chemin** : `app/src/main/kotlin/com/solicode/hellocounter/ui/CounterSection.kt`

```kotlin
package com.solicode.hellocounter.ui

import androidx.compose.foundation.layout.*
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Add
import androidx.compose.material.icons.filled.Remove
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.semantics.contentDescription
import androidx.compose.ui.semantics.semantics
import androidx.compose.ui.unit.dp
import androidx.compose.ui.res.stringResource
import com.solicode.hellocounter.R

@Composable
fun CompteurSection(modifier: Modifier = Modifier) {
    var count by remember { mutableStateOf(0) }

    // Pr√©parer les textes a11y dans le contexte @Composable
    val decrementCd = stringResource(R.string.cd_decrement)
    val incrementCd = stringResource(R.string.cd_increment)
    val counterCd   = stringResource(R.string.cd_counter_value, count)

    Column(
        modifier = modifier.fillMaxWidth(),
        verticalArrangement = Arrangement.spacedBy(12.dp)
    ) {
        Text(
            text = stringResource(R.string.title_counter),
            style = MaterialTheme.typography.titleMedium
        )

        Row(
            horizontalArrangement = Arrangement.spacedBy(12.dp),
            modifier = Modifier.fillMaxWidth()
        ) {
            IconButton(
                onClick = { if (count > 0) count-- },
                enabled = count > 0,
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = decrementCd }
            ) {
                Icon(Icons.Filled.Remove, contentDescription = null)
            }

            Text(
                text = "$count",
                style = MaterialTheme.typography.headlineSmall,
                modifier = Modifier
                    .widthIn(min = 40.dp)
                    .semantics { contentDescription = counterCd }
            )

            IconButton(
                onClick = { count++ },
                modifier = Modifier
                    .size(48.dp)
                    .semantics { contentDescription = incrementCd }
            ) {
                Icon(Icons.Filled.Add, contentDescription = null)
            }
        }
    }
}
```

### E. Int√©grer le compteur dans `MainScreen`

**Mettre √† jour** `MainScreen.kt` pour appeler **les deux** sections :

```kotlin
@Composable
fun MainScreen(modifier: Modifier = Modifier) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
            .verticalScroll(rememberScrollState()),
        verticalArrangement = Arrangement.spacedBy(24.dp),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        DireBonjourSection()
        CompteurSection()   // ‚úÖ ajout au Temps 2
    }
}
```

### ‚úÖ Recompiler & retester

* **Run ‚Äòapp‚Äô**.
* V√©rifier :

  * **Dire bonjour** fonctionne comme avant.
  * **Compteur** : `‚àí` d√©sactiv√© √† `0`, `+` incr√©mente, a11y OK.

---

## ‚úÖ Definition of Done (DoD)

* [ ] Deux composants ind√©pendants : `DireBonjourSection`, `CompteurSection`.
* [ ] `MainScreen` affiche uniquement **Dire bonjour** au Temps 1 ; **les deux** au Temps 2.
* [ ] Textes externalis√©s (`strings.xml`), Material 3 OK.
* [ ] Accessibilit√© : descriptions pour `‚àí`, `+`, valeur.
* [ ] Preview et ex√©cution sur appareil OK.
