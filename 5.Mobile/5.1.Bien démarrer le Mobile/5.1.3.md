---
title: 3. Arborescence
layout: home
nav_order: 3
parent: 5.1. Bien d√©marrer le Mobile
permalink: /mobile-onboarding/arborescence/
code: 5.1.3
competence: C5
autoformation: "C5.1"
ua: "5.1.U1"
duree_h: 1.5
objectif: "Identifier o√π trouver et modifier Manifest, sources Kotlin, ressources et script Gradle dans un projet Compose."
notions_nouvelles: ["Module app", "Manifest", "java|kotlin", "res", "Gradle (Kotlin DSL)"]
fil_rouge: "Mini-app HelloCounter (Compose) ‚Äî pipeline APK ; future App Mobile du Blog"
livrable_chapitre: "Capture de l‚Äôarborescence Android ; Manifest propre (MainActivity, exported) ; `strings.xml` (‚â•3 cl√©s) ; `build.gradle.kts` avec Compose activ√©"
alimentation_prototype: "Structure claire pour pr√©parer √©crans et build de d√©mo (APK debug) N2"
alimentation_miniprojet: "Rep√®res stables pour int√©grer r√©seau et modules lors du N3"
---


# üìò 5.1.3 - Lire l‚Äôarborescence 

## üìí Glossaire minute
- **Module `app/`** : unit√© de build (application Android) ‚Äî contient code, manifest, ressources, d√©pendances.
- **Manifest** : d√©claration de l‚Äôapp (package, activit√©s, permissions, intent-filters).
- **`java|kotlin/`** : code source (Kotlin recommand√©) + tests.
- **`res/`** : ressources **typ√©es** (images, textes, th√®mes, ic√¥nes).
- **Gradle** : syst√®me de build (scripts `*.gradle.kts` avec Kotlin DSL).

---

## ‚úÖ Objectif
Comprendre **o√π se trouve quoi** dans un projet Android **Compose**, et savoir **retrouver/modifier** les fichiers cl√©s : **Manifest**, **sources Kotlin**, **ressources**, **script Gradle**.

---

## üîß Pr√©-requis
- Projet *Empty Compose Activity* cr√©√© (voir **5.1.2**).
- Gradle Sync **OK** et l‚Äôapp ex√©cutable sur √©mulateur/appareil.

---

## 1) Vue d‚Äôensemble ‚Äî structure typique

```

HelloCounter/
‚îú‚îÄ settings.gradle.kts
‚îú‚îÄ build.gradle.kts                     ‚Üê build racine (parfois vide si catalog)
‚îú‚îÄ gradle/                              ‚Üê fichiers internes Gradle
‚îú‚îÄ app/                                 ‚Üê **module application**
‚îÇ  ‚îú‚îÄ build.gradle.kts                  ‚Üê **script de build du module**
‚îÇ  ‚îú‚îÄ proguard-rules.pro
‚îÇ  ‚îî‚îÄ src/
‚îÇ     ‚îú‚îÄ main/
‚îÇ     ‚îÇ  ‚îú‚îÄ AndroidManifest.xml         ‚Üê **manifest principal**
‚îÇ     ‚îÇ  ‚îú‚îÄ java/ (ou kotlin/)          ‚Üê **code prod**
‚îÇ     ‚îÇ  ‚îÇ   ‚îî‚îÄ com/acme/hellocounter/  ‚Üê MainActivity, UI, ViewModel‚Ä¶
‚îÇ     ‚îÇ  ‚îî‚îÄ res/                        ‚Üê **ressources**
‚îÇ     ‚îÇ      ‚îú‚îÄ drawable/               ‚Üê PNG/SVG (vector-drawable)
‚îÇ     ‚îÇ      ‚îú‚îÄ mipmap-\*/               ‚Üê ic√¥nes d‚Äôapp (launcher)
‚îÇ     ‚îÇ      ‚îú‚îÄ values/                 ‚Üê strings, couleurs, th√®mes (xml)
‚îÇ     ‚îÇ      ‚îú‚îÄ xml/                    ‚Üê filepaths, network\_security\_config‚Ä¶
‚îÇ     ‚îÇ      ‚îî‚îÄ font/                   ‚Üê polices (optionnel)
‚îÇ     ‚îú‚îÄ androidTest/                   ‚Üê **tests instrument√©s** (UI/Espresso)
‚îÇ     ‚îî‚îÄ test/                          ‚Üê **tests unitaires** (JVM)
‚îî‚îÄ gradle.properties / local.properties ‚Üê options & chemins SDK (non VCS)

````

> üß≠ Astuce Android Studio : **Project view ‚Üí Android** (regroupe par concepts), basculer sur **Project** pour voir les vrais dossiers.

---

## 2) `app/src/main/AndroidManifest.xml` ‚Äî identit√© & permissions

Le **manifest** d√©clare **l‚Äôactivit√© de lancement**, le **package**, les **permissions**‚Ä¶

```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.acme.hellocounter">

    <application
        android:label="@string/app_name"
        android:icon="@mipmap/ic_launcher"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.Material3.DayNight">
        <activity
            android:name=".MainActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <!-- Exemple de permission (r√©seau non requis) -->
    <!-- <uses-permission android:name="android.permission.INTERNET" /> -->
</manifest>
````

**√Ä retenir**

* `package` (manifest) et `namespace` (Gradle) doivent **co√Øncider** en g√©n√©ral.
* **`android:exported`** requis sur les activit√©s avec `intent-filter` (API 31+).
* Les **permissions** inutiles ‚Üí **√† √©viter** (principe du moindre privil√®ge).

---

## 3) `java|kotlin/` ‚Äî code de l‚Äôapp (Kotlin)

* **Kotlin** recommand√© (`src/main/kotlin/...`), packages en **minuscules**.
* Organisation simple au d√©but :

  ```
  ui/        ‚Üê Composables, th√®mes, previews
  domain/    ‚Üê mod√®les, use-cases simples
  data/      ‚Üê repo/datasource (quand r√©seau arrivera)
  ```
* Tests :

  * `test/` ‚Üí **unitaires** (JVM, rapides)
  * `androidTest/` ‚Üí **instrument√©s** (sur device/√©mulateur)

---

## 4) `res/` ‚Äî ressources **typ√©es** (g√©n√®rent la classe `R`)

### Dossiers principaux

* `values/` : **`strings.xml`**, **`colors.xml`**, **`themes.xml`** (si View System).
  En Compose, on continue d‚Äôutiliser `strings.xml`/`colors.xml` pour centraliser.
* `drawable/` : images **vector-drawable** (`.xml`) ou **PNG/WebP**.
* `mipmap-*/` : ic√¥nes **launcher** (diff√©rentes densit√©s).
* `xml/` : configs diverses (ex. `network_security_config.xml`).
* `font/` : polices (optionnel).

**Exemple ‚Äî `values/strings.xml`**

```xml
<resources>
    <string name="app_name">HelloCounter</string>
    <string name="btn_hello">Dire bonjour</string>
    <string name="msg_greeting">Bonjour, %1$s !</string>
</resources>
```

**Utilisation en Compose**

```kotlin
import androidx.compose.ui.res.stringResource
Text(text = stringResource(R.string.btn_hello))
```

### Qualifiers (adaptatifs)

* `values-fr/`, `values-en/` (langue)
* `values-night/` (mode sombre)
* `drawable-land/` (paysage)
* `values-sw600dp/` (tablette)

> Android choisit **automatiquement** la ressource la plus adapt√©e.

---

## 5) `app/build.gradle.kts` ‚Äî script de build du module

Points cl√©s (expliqu√©s ‚Äî voir **5.1.2** pour un exemple complet) :

```kts
plugins {
    id("com.android.application")
    id("org.jetbrains.kotlin.android")
}

android {
    namespace = "com.acme.hellocounter"   // package technique du code g√©n√©r√©
    compileSdk = 34                        // API utilis√©e pour compiler

    defaultConfig {
        applicationId = "com.acme.hellocounter" // identifiant app (Play Store)
        minSdk = 24                              // **minimum** support√©
        targetSdk = 34                           // API vis√©e/test√©e
        versionCode = 1
        versionName = "1.0"
    }

    buildTypes {
        debug { isMinifyEnabled = false }
        release {
            isMinifyEnabled = false             // activer R8 plus tard
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
                "proguard-rules.pro"
            )
        }
    }

    buildFeatures { compose = true }            // activer Compose
    kotlinOptions { jvmTarget = "17" }
}

dependencies {
    // Compose BOM + libs M3 (voir 5.1.2)
}
```

**√Ä retenir**

* `applicationId` = **identit√© publi√©e** (peut diff√©rer du `namespace`).
* `minSdk` ‚Üí compatibilit√© minimale ; `targetSdk` ‚Üí exigences r√©centes d‚ÄôAndroid.
* **`buildTypes`** `debug/release` ‚Üí variantes avec r√®gles diff√©rentes.
* **D√©pendances** : utilisez **Compose BOM** ou **Version Catalog** (`libs.versions.toml`) pour aligner les versions.

---

## 6) Fichiers Gradle au-dessus

* `settings.gradle.kts` : **r√©f√©rentiels** (`google()/mavenCentral()`), modules inclus.
* `build.gradle.kts` (racine) : parfois vide, ou centralise des plugins communs.
* `gradle.properties` : options JVM/Gradle (m√©moire, `org.gradle.jvmargs=...`).
* `local.properties` : **chemin SDK** (non versionn√©).

---

## üß™ V√©rifications rapides

* Modifier `strings.xml` ‚Üí **rebuild** ‚Üí `R.string...` disponible en Kotlin.
* Changer `minSdk`/`targetSdk` ‚Üí **Sync** ‚Üí le build continue de passer.
* Supprimer une ressource utilis√©e ‚Üí build **√©choue** (typage fort souhaitable).

---

## ü©π D√©pannage

* **`R` introuvable** : erreur dans un **XML** (balise non ferm√©e, attribut inconnu) ‚Üí corriger puis **Rebuild**.
* **Conflit namespaces** : `namespace` (Gradle) ‚â† `package` (manifest) ‚Üí harmoniser.
* **Images √©normes** : pr√©f√©rer **vector-drawable** (`.xml`) quand possible.
* **Preview Compose** cass√©e : **Clean/Rebuild**, v√©rifier versions Compose/AGP.

---

## üì¶ Livrables attendus

* Capture d‚Äô√©cran de l‚Äôarborescence **Android** avec `app/`, `manifests/`, `kotlin/`, `res/`.
* `AndroidManifest.xml` propre avec **MainActivity** et `exported=true`.
* `strings.xml` avec au moins **3** cl√©s utilis√©es en Compose.
* `app/build.gradle.kts` contenant `buildFeatures { compose = true }`.

---

## ‚úÖ DoD ‚Äî Definition of Done

* [ ] Je sais **o√π** modifier le **nom de l‚Äôapp**, l‚Äô**ic√¥ne**, les **permissions**.
* [ ] Je sais **o√π** ajouter du **code Kotlin** et des **tests**.
* [ ] Je sais **o√π** placer textes/images/th√®mes dans `res/`.
* [ ] Je comprends les champs cl√©s du **Gradle module** (`applicationId`, `min/target/compileSdk`, `buildTypes`, `dependencies`).

---

## ‚ö° Cheatsheet

```bash
# Reconstruire le projet
./gradlew clean assembleDebug

# Lister les t√¢ches Gradle
./gradlew tasks

# Ouvrir Logcat (CLI)
adb logcat
```

