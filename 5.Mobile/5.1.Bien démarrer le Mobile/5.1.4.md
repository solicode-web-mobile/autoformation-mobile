---
title: 4. Initialiser Git
permalink: /mobile-onboarding/init-git-android/
layout: home
nav_order: 4
parent: 5.1. Bien d√©marrer le Mobile
---

# üìò 5.1.4 - Initialiser Git

## üìí Glossaire minute
- **.gitignore** : liste des fichiers/dossiers √† **ne pas** versionner (build, caches, secrets).
- **Remote** : d√©p√¥t distant (GitHub/GitLab/Bitbucket) li√© √† ton d√©p√¥t local.
- **Conventional Commits** : format standard pour des messages de commit **clairs**.

---

## ‚úÖ Objectif
Versionner proprement le projet Android : **init Git**, ajouter un **.gitignore adapt√©**, r√©aliser les **premiers commits** lisibles, lier un **remote** et pousser la branche **main**.

---

## üîß Pr√©-requis
- Projet Android **cr√©√© & qui build** (voir 5.1.2 / 5.1.3).
- Compte GitHub/GitLab/Bitbucket + SSH ou HTTPS configur√©.

---

## 1) Initialiser le d√©p√¥t & config de base
```bash
cd HelloCounter/              # dossier racine du projet
git init
git branch -M main            # utiliser 'main' comme branche par d√©faut

# (optionnel) identit√© si non configur√©e globalement
git config user.name  "Votre Nom"
git config user.email "vous@example.com"

# (recommand√©) tirer en rebase & nettoyer branches distantes supprim√©es
git config pull.rebase true
git config fetch.prune true
````

---

## 2) Ajouter un `.gitignore` Android (complet & s√ªr)

Cr√©ez un fichier **.gitignore** √† la racine :

```gitignore
# === Android / Gradle ===
.gradle/
**/build/
**/captures/
**/.cxx/
**/.externalNativeBuild/
.gradle/
local.properties
# cache Gradle Kotlin DSL
.gradle.kts/
# logs & rapports
**/outputs/logs/
**/lint-results*.*
**/reports/

# === IDE ===
*.iml
.idea/
!.idea/codeStyles/            # (optionnel) si vous partagez le style
!.idea/inspectionProfiles/    # (optionnel)

# === Syst√®mes ===
.DS_Store
Thumbs.db

# === Keystores & signatures (ne pas versionner) ===
*.jks
*.keystore
**/signing.properties

# === Secrets / config locales (√† adapter) ===
# google-services.json : committez-le SEULEMENT si votre √©quipe a d√©cid√© de le partager
# app/google-services.json
# firebase_app_id_file.json

# === NPM (si tooling JS) ===
node_modules/
```

> üí° **R√®gle d‚Äôor** : ne commitez **aucun secret** (keystores, tokens, cl√©s API). Si une cl√© fuit ‚Üí **r√©voquez-la** et r√©√©ditez.

---

## 3) (Optionnel) `.gitattributes` pour normaliser les fins de ligne

Ajoutez un **.gitattributes** √† la racine pour √©viter les faux diffs (Windows/macOS/Linux) :

```gitattributes
* text=auto eol=lf
*.bat text eol=crlf

# Binaires
*.png binary
*.jpg binary
*.jpeg binary
*.webp binary
*.gif binary
*.keystore binary
*.jks binary
```

---

## 4) README minimal & badge ‚ÄúQuickstart‚Äù

Cr√©ez un **README.md** (extrait) :

````md
# HelloCounter (Android / Jetpack Compose)

Mini-app ‚ÄúHello + Compteur‚Äù pour valider l'environnement Android.

## üöÄ D√©marrage rapide
```bash
./gradlew assembleDebug
adb install -r app/build/outputs/apk/debug/app-debug.apk
````

## ‚úÖ Pr√©requis

* Android Studio (JDK inclus), SDK install√©, AVD/ADB OK
* minSdk 24, targetSdk 34

## üì¶ Livrables

* APK debug + captures d‚Äô√©cran (√©mulateur/device)

````

---

## 5) Premiers commits **propres**
```bash
git add .gitignore .gitattributes README.md
git add app/ gradle/ settings.gradle.kts build.gradle.kts gradle.properties
git commit -m "chore: init Android project (Compose) + .gitignore + README"

# Exemple d'autres commits structur√©s
# docs(readme): quickstart + pr√©requis
# build(gradle): align Compose BOM + jvmTarget=17
````

---

## 6) Lier le d√©p√¥t distant & pousser `main`

> Cr√©ez un d√©p√¥t vide sur GitHub/GitLab, puis :

```bash
git remote add origin git@github.com:mon-org/HelloCounter.git
# ou en HTTPS :
# git remote add origin https://github.com/mon-org/HelloCounter.git

git push -u origin main
```

---

## 7) (Optionnel) Branch protections & conventions

* Prot√©ger **main** (PR obligatoire, CI verte).
* Adopter **Conventional Commits** : `feat: ‚Ä¶`, `fix: ‚Ä¶`, `docs: ‚Ä¶`, `chore: ‚Ä¶`, `build: ‚Ä¶`.
* PR **petite**, description claire, captures si UI (voir C4.x).

---

## üß™ V√©rifications rapides

* `git status` ‚Üí aucun fichier parasite (ex. `local.properties`, `build/`) list√©.
* `.gitignore` efficace : build ‚Üí aucun nouveau fichier **build/** non ignor√©.
* `git log --oneline` ‚Üí premiers commits **lisibles**.

---

## ü©π D√©pannage (FAQ)

* **J‚Äôai committ√© un fichier sensible par erreur**

  ```bash
  git rm --cached path/secret.jks
  echo "*.jks" >> .gitignore
  git commit -m "chore: remove sensitive file from VCS"
  git push
  # R√©voquez la cl√© et remplacez-la.
  ```
* **Beaucoup de fichiers .idea dans le repo**

  ```bash
  echo ".idea/" >> .gitignore
  git rm -r --cached .idea
  git commit -m "chore: purge IDE files"
  git push
  ```
* **Faux diffs CRLF/LF** ‚Üí utiliser **.gitattributes** (section ci-dessus), puis :

  ```bash
  git rm --cached -r .
  git reset --hard
  ```

---

## üì¶ Livrables attendus

* D√©p√¥t distant **en ligne** (branche **main**).
* `.gitignore` **Android** en place, **pas** de secrets versionn√©s.
* **README** minimal (Quickstart, pr√©requis).
* 1‚Äì2 **commits** initiaux **propres** et descriptifs.

---

## ‚úÖ DoD ‚Äî Definition of Done

* [ ] `main` cr√©√© & pouss√©, remote configur√©.
* [ ] `.gitignore` couvre **build/**, **.idea/**, **local.properties**, **keystores**.
* [ ] Aucun secret/cl√©/API dans l‚Äôhistorique.
* [ ] README avec **d√©marrage rapide** + infos projet.

---

## ‚ö° Cheatsheet

```bash
# Init & premi√®re base
git init && git branch -M main
git add . && git commit -m "chore: init android project"

# Lier au distant & pousser
git remote add origin <SSH/HTTPS>
git push -u origin main

# Nettoyer un fichier d√©j√† committ√©
git rm --cached path/to/file && git commit -m "chore: untrack file"

# Voir ce qui est ignor√©
git check-ignore -v path/to/file
```

