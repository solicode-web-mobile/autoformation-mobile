---
title: 2. Créer un projet
layout: home
nav_order: 2
parent: 5.1. Bien démarrer le Mobile
permalink: /mobile-onboarding/creer-projet/
code: 5.1.2
competence: C5
autoformation: "C5.1"
ua: "5.1.U1"
duree_h: 1.5
objectif: "Créer un projet Jetpack Compose propre (package, minSdk, Compose activé) qui compile et s’exécute."
notions_nouvelles: ["Package name", "minSdk", "Gradle Sync", "Compose BOM", "Kotlin DSL (build.gradle.kts)"]
fil_rouge: "HelloCounter — base projet pour l’App Mobile du Blog"
livrable_chapitre: "Gradle Sync OK + app lancée (AVD/device) + `app/build.gradle.kts` propre"
alimentation_prototype: "Projet opérationnel pour développer les écrans de démo N2"
alimentation_miniprojet: "Base saine pour intégrer réseau, tests et modules N3"
---


# 📘 5.1.2 - Créer un projet
## 📒 Glossaire minute
- **Package name** : identifiant unique de l’app (ex. `com.ecole.hellocounter`).
- **minSdk** : version Android minimale supportée (**recommandé**: `24` ou plus).
- **Gradle Sync** : étape où Android Studio télécharge les dépendances et configure le build.
- **Empty Compose Activity** : modèle de projet prêt pour **Jetpack Compose**.

---

## ✅ Objectif
Créer un **nouveau projet Compose** avec un **package propre**, un **minSdk cohérent** et un **build qui compile** (Gradle Sync OK), prêt à être exécuté sur **émulateur** ou **appareil**.

---

## 🔧 Pré-requis
- Avoir terminé **5.1.1** (Android Studio + SDK + AVD/ADB OK).
- Espace disque & connexion réseau pour que Gradle récupère les dépendances.

---

## 1) Nouveau projet (Assistant Android Studio)
1. **New Project → Empty Activity (Jetpack Compose)** *(ou “Empty Compose Activity” selon version)*.  
2. **Configure your project** :
   - **Name** : `HelloCounter`
   - **Package name** : `com.<organisation>.<app>` → ex. `com.acme.hellocounter`
   - **Save location** : dossier sans espace si possible
   - **Language** : **Kotlin**
   - **Minimum SDK** : **API 24: Android 7.0** (ou plus selon vos besoins)
   - **Use Kotlin DSL (build.gradle.kts)** : ✅ (recommandé)
3. Cliquer **Finish** → Android Studio génère le projet.

> 💡 **Convention package** : tout en **minuscules**, segments courts, stables dans le temps.

---

## 2) Vérifier JDK & options Compose
- **File → Settings → Build, Execution, Deployment → Gradle**  
  **Gradle JDK** : **17 (Embedded JDK)** recommandé.  
  > ⚠️ Si tu vois une erreur du type  
  *“Unsupported class file major version”* ou *“Gradle JDK incompatible”*,  
  cela veut dire que tu utilises un JDK trop récent (ex. JBR 20).  
  Dans ce cas, modifie la configuration et sélectionne **Embedded JDK 17**.
- Ouvrir `app/build.gradle.kts` et contrôler que **Compose est activé** (voir plus bas).
 

```kotlin
android {
    // ...
    buildFeatures {
        compose = true   // ✅ doit être présent
    }
}
```
---

## 3) Lancer un **Gradle Sync**
- Bandeau bleu **Sync Now** (ou **File → Sync Project with Gradle Files**).  
- Attendre le message **Build successful** en bas.  
- Si ça échoue, voir **Dépannage**.

---


## 4) Vérifier / compléter la configuration Gradle

### 📂 `settings.gradle.kts`

Tu n’as rien à modifier ici → Android Studio crée déjà le bon fichier (dépôts + module `:app`).

---

### 📂 `app/build.gradle.kts`

Deux points seulement sont importants :

#### 1. Compose doit être activé

```kts
buildFeatures {
    compose = true
}
```

👉 Normalement, c’est déjà ajouté par Android Studio.
⚠️ Si tu ne l’as pas, le code `@Composable` ne sera pas reconnu.

---

#### 2. Vérifier la version de Java utilisée

```kts
compileOptions {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}
kotlinOptions {
    jvmTarget = "17"
}
```

👉 Par défaut, certains projets peuvent être générés en **Java 11**.

* **Ne modifie rien tant que ton projet compile**.
* ⚠️ Si tu vois une erreur du type :
  *“Unsupported class file major version”* ou
  *“This version of Compose requires Java 17”*
  👉 alors seulement à ce moment-là, tu modifies pour mettre **Java 17**.

---

### ✅ En résumé

* **Ne change rien** si ton projet compile et que Gradle Sync est vert.
* **Change uniquement** si une erreur signale que Compose ou Gradle a besoin de Java 17.


## 5) Code Compose de départ 

Avant d’aller plus loin, **teste le projet tel qu’il est généré** par Android Studio.

👉 Étape 1 : **exécuter le code par défaut** (le "Hello World" affiché par Android Studio).
👉 Étape 2 : **remplacer ce code** par celui-ci (version avec un compteur) et exécuter à nouveau.

**`MainActivity.kt`**

```kotlin
package com.acme.hellocounter

import android.os.Bundle
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.tooling.preview.Preview

class MainActivity : ComponentActivity() {
  override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContent { App() }
  }
}

@Composable
fun App() {
  MaterialTheme {
    Greeting()
  }
}

@Composable
fun Greeting() {
  var count by remember { mutableStateOf(0) }
  Button(onClick = { count++ }) { Text("Hello, count = $count") }
}

@Preview(showBackground = true)
@Composable
fun PreviewApp() {
  App()
}
```

> ✨ Dans l’onglet **Split/Design**, utilisez l’aperçu `@Preview` → cliquez **Build & Refresh** si besoin.

---

## 6) Exécuter l’app (émulateur ou device)

1. Démarrer un **AVD** (Virtual Device Manager) **ou** brancher un **téléphone Android** (mode développeur activé).
2. Sélectionner la cible dans la barre d’outils d’Android Studio.
3. Cliquer **Run ▶** → l’app *Hello, count = …* doit s’ouvrir.



## 🧪 Vérifications rapides

* **Gradle Sync** : **OK** sans erreurs.
* **Run** : l’app démarre sur **AVD** ou **device**.
* **Preview Compose** : visible dans Android Studio.

---

## 🩹 Dépannage (FAQ)

* **Sync échoue (versions Compose/AGP)** : mettez à jour **Android Gradle Plugin** et la **Compose BOM** (ou utilisez un **Version Catalog** `libs.versions.toml`).
* **JDK incompatible** : **Gradle JDK = 17** dans Settings.
* **Dépendances introuvables** : vérifiez que `google()` et `mavenCentral()` sont bien dans **tous** les blocs `repositories`.
* **Min SDK trop bas** : Compose moderne requiert **minSdk ≥ 21** ; **24** est un bon compromis.
* **Preview vide** : nettoyer/rebuilder (**Build → Clean Project**, puis **Rebuild Project**), puis **Refresh** dans l’aperçu.

---

## 📦 Livrables attendus

* Capture **Gradle Sync successful**.
* Capture de l’app **en exécution** (AVD ou device).
* `app/build.gradle.kts` propre (Compose activé + BOM) et **package** bien nommé.

---

## ✅ DoD — Definition of Done

* [ ] Projet **Compose** créé (Empty Compose Activity).
* [ ] **minSdk** choisi (≥ 24 recommandé) et **package** conforme.
* [ ] **Gradle Sync** vert, **Run** OK sur AVD/device.
* [ ] **Preview Compose** s’affiche.

---

## ⚡ Cheatsheet

```bash
# Construire l’APK debug en CLI
./gradlew assembleDebug

# Installer sur l’appareil connecté
./gradlew installDebug

# Lancer l’app (si task disponible) ou cliquer Run dans l’IDE
adb shell monkey -p com.acme.hellocounter -c android.intent.category.LAUNCHER 1
```
