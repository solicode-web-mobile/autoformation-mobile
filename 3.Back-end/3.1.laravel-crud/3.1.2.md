---
title: 2. MVC
layout: home
nav_order: 2
parent: 3.1. CRUD avec Laravel
permalink: /laravel-crud/mvc/
code: 3.1.2
competence: C3
autoformation: "C3.1"
ua: "3.1.U1"
duree_h: 1.5
objectif: "Mettre en place un MVC minimal : routes nommÃ©es, contrÃ´leur, vues Blade et layout."
notions_nouvelles: ["MVC", "Route nommÃ©e", "ContrÃ´leur", "Blade", "Layout", "Partial"]
fil_rouge: "Blog Laravel + App Mobile (Accueil/Liste mock)"
livrable_chapitre: "Pages Accueil/Articles/DÃ©tail/Ã€ propos avec layout et partials de navigation/flash"
alimentation_prototype: "Structure lâ€™UI du prototype Accueil/Liste"
alimentation_miniprojet: "Navigation de base stable pour le Blog"
---


# ğŸ“˜  3.1.2 - MVC  (ModÃ¨le â€“ Vue â€“ ContrÃ´leur)

## ğŸ“’ Glossaire minute

- **MVC** : architecture logicielle qui sÃ©pare la logique (ContrÃ´leur), les donnÃ©es (ModÃ¨le) et lâ€™affichage (Vue).  
- **Route** : relie une URL Ã  une action du contrÃ´leur.  
- **ContrÃ´leur** : classe qui reÃ§oit la requÃªte, traite la logique et retourne une **vue**.  
- **Blade** : moteur de templates intÃ©grÃ© Ã  Laravel pour gÃ©nÃ©rer les pages HTML.  
- **Layout** : modÃ¨le principal des pages (gabarit).  
- **Partial** : fragment rÃ©utilisable de vue (`@include`).  
- **Route nommÃ©e** : alias permettant dâ€™appeler une route par son nom (`route('home')`).  

---

## ğŸ¯ Objectif pÃ©dagogique

CrÃ©er une structure **MVC minimale** :  
â¡ï¸ Routes nommÃ©es  
â¡ï¸ ContrÃ´leur unique (`PageController`)  
â¡ï¸ Layout principal + partials (`nav`, `flash`)  
â¡ï¸ Vues simples : Accueil, Articles, DÃ©tail, Ã€ propos  

---

## âœ… PrÃ©-requis
Avoir le projet Laravel fonctionnel (cf. chapitre **3.1.1**)  
et le serveur lancÃ© avec :  

```bash
php artisan serve
```

---

## ğŸ§­ Ã‰tapes guidÃ©es

### ğŸ§© Ã‰tape 1 â€” CrÃ©er des routes web

**Explication :**
Les routes dÃ©finissent la correspondance entre une URL et une action (fonction ou mÃ©thode du contrÃ´leur).

{% raw %}

```php
// routes/web.php
<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\PageController;

// Route test
Route::get('/ping', fn() => 'pong');

// Routes nommÃ©es avec contrÃ´leur
Route::get('/', [PageController::class, 'home'])->name('home');
Route::get('/a-propos', [PageController::class, 'about'])->name('about');

// Mini-routes articles (mockÃ©es pour lâ€™instant)
Route::get('/articles', [PageController::class, 'articles'])->name('articles.index');
Route::get('/articles/{slug}', [PageController::class, 'show'])->name('articles.show');
```

{% endraw %}

ğŸ” **Tester :**

```bash
php artisan route:list
```

ğŸ‘‰ Tu dois voir les routes nommÃ©es `home`, `articles.index`, `articles.show`, etc.

---

### ğŸ§© Ã‰tape 2 â€” CrÃ©er le contrÃ´leur

**Explication :**
Le contrÃ´leur gÃ¨re la logique : il dÃ©cide quelle vue afficher et quelles donnÃ©es lui passer.

```bash
php artisan make:controller PageController
```

`app/Http/Controllers/PageController.php` :

{% raw %}

```php
<?php

namespace App\Http\Controllers;

use Illuminate\View\View;

class PageController extends Controller
{
    private array $ARTICLES = [
        ['id'=>1,'title'=>'Intro Laravel','slug'=>'intro-laravel','views'=>120,'author'=>'Amina'],
        ['id'=>2,'title'=>'PHP 8 en pratique','slug'=>'php-8-en-pratique','views'=>300,'author'=>'Yassine'],
        ['id'=>3,'title'=>'Composer & Autoload','slug'=>'composer-autoload','views'=>90,'author'=>'Sara'],
    ];

    public function home(): View
    {
        return view('home', ['title' => 'Bienvenue sur le Blog Solicode']);
    }

    public function about(): View
    {
        return view('about', ['title' => 'Ã€ propos du projet']);
    }

    public function articles(): View
    {
        return view('articles.index', [
            'title'    => 'Articles (sans base de donnÃ©es)',
            'articles' => $this->ARTICLES,
        ]);
    }

    public function show(string $slug): View
    {
        $article = collect($this->ARTICLES)->firstWhere('slug', $slug);
        abort_unless($article, 404);
        return view('articles.show', [
            'title'   => $article['title'],
            'article' => $article,
        ]);
    }
}
```

{% endraw %}

ğŸ§  *Le contrÃ´leur centralise la logique : les vues ne contiennent que de lâ€™affichage.*

---

### ğŸ§© Ã‰tape 3 â€” CrÃ©er le layout et les partials

**Explication :**
Le layout sert de squelette HTML global. Les partials (`nav`, `flash`) sont inclus dans toutes les pages.

`resources/views/layouts/app.blade.php`

{% raw %}

```html
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>{{ $title ?? config('app.name') }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;max-width:760px;margin:32px auto;padding:0 16px}
    nav a{margin-right:12px;text-decoration:none}
    .active{font-weight:700;text-decoration:underline}
    .card{padding:16px;border:1px solid #eee;border-radius:12px;margin-bottom:16px}
  </style>
</head>
<body>
  <header>
    <h1>{{ config('app.name', 'Blog Solicode') }}</h1>
    @include('partials.nav')
    <hr>
  </header>

  <main>
    @include('partials.flash')
    @yield('content')
  </main>

  <hr>
  <footer>
    Laravel â€¢ {{ now()->format('d/m/Y H:i') }} â€¢ {{ config('app.timezone') }}
  </footer>
</body>
</html>
```

{% endraw %}

`resources/views/partials/nav.blade.php`

{% raw %}

```html
<nav>
  <a href="{{ route('home') }}" class="{{ request()->routeIs('home') ? 'active' : '' }}">Accueil</a>
  <a href="{{ route('articles.index') }}" class="{{ request()->routeIs('articles.*') ? 'active' : '' }}">Articles</a>
  <a href="{{ route('about') }}" class="{{ request()->routeIs('about') ? 'active' : '' }}">Ã€ propos</a>
</nav>
```

{% endraw %}

`resources/views/partials/flash.blade.php`

{% raw %}

```php
@if (session('success'))
  <p class="card" role="status">{{ session('success') }}</p>
@endif
@if ($errors->any())
  <div class="card" role="alert">
    <strong>Erreurs :</strong>
    <ul>
      @foreach ($errors->all() as $msg)
        <li>{{ $msg }}</li>
      @endforeach
    </ul>
  </div>
@endif
```

{% endraw %}

---

### ğŸ§© Ã‰tape 4 â€” CrÃ©er les vues de contenu

#### ğŸ  Accueil

`resources/views/home.blade.php`
{% raw %}

```php
@extends('layouts.app')

@section('content')
  <div class="card">
    <h2>{{ $title }}</h2>
    <p>Bienvenue sur le blog ! Consultez la <a href="{{ route('articles.index') }}">liste des articles</a>.</p>
  </div>
@endsection
```

{% endraw %}

#### â„¹ï¸ Ã€ propos

`resources/views/about.blade.php`
{% raw %}

```php
@extends('layouts.app')

@section('content')
  <div class="card">
    <h2>{{ $title }}</h2>
    <p>Ce projet a pour but dâ€™apprendre le modÃ¨le MVC avec Laravel et de prÃ©parer la mise en place du CRUD.</p>
  </div>
@endsection
```

{% endraw %}

#### ğŸ“° Liste des articles

`resources/views/articles/index.blade.php`
{% raw %}

```php
@extends('layouts.app')

@section('content')
  <h2>{{ $title }}</h2>

  @forelse ($articles as $a)
    <div class="card">
      <h3>
        <a href="{{ route('articles.show', $a['slug']) }}">{{ $a['title'] }}</a>
      </h3>
      <p>Auteur : {{ $a['author'] }} â€¢ Vues : {{ $a['views'] }}</p>
    </div>
  @empty
    <p>Aucun article disponible.</p>
  @endforelse
@endsection
```

{% endraw %}

#### ğŸ“„ DÃ©tail dâ€™un article

`resources/views/articles/show.blade.php`
{% raw %}

```php
@extends('layouts.app')

@section('content')
  <div class="card">
    <h2>{{ $article['title'] }}</h2>
    <p><a href="{{ route('articles.index') }}">â† Retour Ã  la liste</a></p>
    <ul>
      <li>Auteur : {{ $article['author'] }}</li>
      <li>Slug : <code>{{ $article['slug'] }}</code></li>
      <li>Vues : {{ $article['views'] }}</li>
    </ul>
  </div>
@endsection
```

{% endraw %}

---

## ğŸ§ª Exercice pratique (livrable N1)

ğŸ‘‰ CrÃ©e une page **Contact** :

1. Route `GET /contact` â†’ `PageController@contact` (nommÃ©e `contact`).
2. Vue `contact.blade.php` Ã©tendant `layouts.app`.
3. Lien dans `partials/nav.blade.php` avec mise en surbrillance si actif.
4. Ajouter un formulaire HTML simple (avec `@csrf`), mÃªme si lâ€™action POST sera vue plus tard.

---

## âœ… CritÃ¨res de rÃ©ussite

* Les routes sont visibles via `php artisan route:list`.
* Les pages Accueil / Articles / DÃ©tail / Ã€ propos sâ€™affichent sans erreur.
* Le layout est factorisÃ© avec `@extends`, `@include`.
* Les liens utilisent des **routes nommÃ©es**.
* Le style et la structure sont cohÃ©rents sur toutes les pages.

---

## âš ï¸ Erreurs frÃ©quentes

| Erreur                        | Cause                             | Solution                                                  |
| ----------------------------- | --------------------------------- | --------------------------------------------------------- |
| â€œClass not foundâ€             | `use` manquant pour le contrÃ´leur | Ajouter `use App\Http\Controllers\PageController;`        |
| Vue introuvable               | Mauvais chemin                    | Utiliser la notation `dossier.fichier` (`articles.index`) |
| Changement non pris en compte | Cache des vues                    | `php artisan view:clear`                                  |

---

## ğŸ§¾ RÃ©sumÃ©

âœ… MVC installÃ© et fonctionnel
âœ… Routes nommÃ©es + contrÃ´leur opÃ©rationnel
âœ… Layout + partials rÃ©utilisables
âœ… Navigation de base prÃªte pour les formulaires et le CRUD

---

## ğŸ”œ Suite

ğŸ‘‰ Prochain chapitre : **3.1.3 â€” Formulaires & CSRF**
Tu y apprendras Ã  crÃ©er un formulaire sÃ©curisÃ© et Ã  afficher les messages dâ€™erreur avec les helpers Blade.

