---
title: 6. Déclinaison en tâches
permalink: /agile-scrum/declinaison-taches/
layout: home
nav_order: 6
parent: 4.2. Agile & Scrum
---

# 📘 4.2.6 - Déclinaison en tâches

## 📒 Glossaire minute
- **Tâche technique** : action concrète, **≤ 0,5 j**, menant à un résultat vérifiable.
- **Traçabilité** : lien **Story ↔ Tâches ↔ Critères (GWT) ↔ Tests/PR**.
- **WBS** (*Work Breakdown Structure*) : découpage hiérarchique d’un travail.

---

## ✅ Objectif du chapitre
Transformer une **User Story** (S/M/L) en un **lot de tâches courtes, indépendantes et testables**, chacune **liée** à au moins **un critère GWT**, avec une **responsabilité** claire et une **preuve** (test, capture, log).

---

## 🔧 Pré-requis
- Story **INVEST** + **GWT** rédigés (voir 4.2.4).
- Sprint Goal, **capacité** et **WIP** définis (voir 4.2.3).

---

## 1) Règles de **découpage**
- Taille **cible** : **≤ 0,5 jour** (4h max).  
- **1 tâche = 1 intention** (API, UI, test, doc, migration…).  
- **Lien GWT** : chaque tâche **référence** 1+ scénarios Given/When/Then.  
- **Preuve** : résultat **observables** (tests verts, capture UI, curl, log).  
- **Priorité** : faire passer d’abord ce qui **valide un GWT** (cas heureux), puis les cas d’erreur/edge.

**Anti-patterns**
- « Tâche fourre-tout » (touchant 10 fichiers sans focus).  
- « Tâche invisible » (aucune preuve/critère lié).  
- Découpage par **couches** uniquement (ex. “backend”, “frontend”) sans lien aux **critères**.

---

## 2) Types de tâches (checklist)
- **API / Contrôleur / Service**  
- **Validation** (FormRequest, règles, messages)  
- **Policy / Auth / Sécurité**  
- **Requête DB / Migration / Index**  
- **UI** (form, état vide, loading, messages)  
- **Tests** (unit, HTTP/Feature, e2e)  
- **Docs** (README, API examples, changelog)  
- **Observabilité** (logs, métriques)

> 🎯 Objectif : couvrir **fonctionnel + non-fonctionnel** pertinent (perfs, sécurité, accessibilité).

---

## 3) Modèle de tâche (gabarit)

```md
### [Task] <verbe d’action court>
- **But** : …
- **Lien Story** : #<ID> (Closes/Refs si PR)
- **Critères liés** : GWT-1, GWT-2
- **Sortie/Preuve** : test vert / capture / curl / log
- **Estimation** : ≤ 0,5 j
- **Owner** : @username
````

---

## 4) Exemple complet (Story → Tâches → Critères)

**Story**
« En tant que lecteur, je veux **filtrer les articles par tag** afin de **trouver vite**. »

**Critères (GWT)**

* **GWT-1** — Given des articles taggés, When je choisis `#PHP`, Then seuls #PHP s’affichent **(<1s)**.
* **GWT-2** — Given aucun article `#Go`, When je filtre `#Go`, Then **message “Aucun résultat”**.

**Tâches (YAML)**

```yaml
story: #321 Filtrer par tag
tasks:
  - id: T1
    title: "API: GET /articles?tag={slug}"
    links:
      gwt: [GWT-1, GWT-2]
      pr: []
    proof: "curl + tests HTTP 200/400; temps <1s en local"
  - id: T2
    title: "Validation: slug tag + erreurs 400"
    links:
      gwt: [GWT-2]
    proof: "tests 400 + message d’erreur JSON"
  - id: T3
    title: "UI: select tags + état loading + empty state"
    links:
      gwt: [GWT-1, GWT-2]
    proof: "captures avant/après; GIF 5s"
  - id: T4
    title: "Tests HTTP: cas heureux + vide"
    links:
      gwt: [GWT-1, GWT-2]
    proof: "pest: tests verts"
  - id: T5
    title: "Docs: README paramètre ?tag= + exemple curl"
    links:
      gwt: [GWT-1]
    proof: "diff README"
```

**Matrice Tâche ↔ Critère**

| Tâche         | GWT-1 | GWT-2 |
| ------------- | :---: | :---: |
| T1 API        |   ✅   |   ✅   |
| T2 Validation |       |   ✅   |
| T3 UI         |   ✅   |   ✅   |
| T4 Tests      |   ✅   |   ✅   |
| T5 Docs       |   ✅   |       |

---

## 5) Exemple Laravel (squelettes rapides)

**Route + Controller**

```php
// routes/api.php
Route::get('/articles', [ArticleController::class, 'index']);

// app/Http/Controllers/ArticleController.php
public function index(Request $request)
{
    $request->validate(['tag' => ['nullable','alpha_dash']]);

    $q = Article::query()
        ->when($request->filled('tag'), fn($qb) =>
            $qb->whereHas('tags', fn($t) => $t->where('slug', $request->tag)))
        ->latest()
        ->paginate(10);

    return ArticleResource::collection($q);
}
```

**Test HTTP (Pest)**

```php
it('filtre par tag existant', function () {
    $php = Tag::factory()->create(['slug' => 'php']);
    Article::factory()->count(3)->hasAttached($php)->create();
    Article::factory()->count(2)->create(); // autres

    $res = $this->getJson('/api/articles?tag=php')
        ->assertOk()
        ->json('data');

    expect($res)->toHaveCount(3);
});

it('retourne vide pour tag inexistant', function () {
    Article::factory()->count(2)->create();

    $this->getJson('/api/articles?tag=go')
        ->assertOk()
        ->assertJsonPath('data', []);
});
```

**README (extrait preuve)**

````md
### Filtrage par tag
```bash
curl "http://localhost/api/articles?tag=php"
# => 200 + items taggés 'php'
````

````

---

## 6) Orchestration & dépendances
- **Ordre suggéré** : API → Validation → Tests → UI → Docs.  
- **Parallélisable** : UI peut démarrer sur **mock** (JSON exemple).  
- **Bloquages** : noter en Daily ; si > 24h, **réallouer** / **redécouper**.

---

## 7) Definition of Done (Tâche & Story)

**DoD Tâche**
- [ ] Lien **GWT** indiqué  
- [ ] **Preuve** attachée (test/capture)  
- [ ] **Lint/format** OK  
- [ ] Impact **docs/logs** traité

**DoD Story** *(rappel)*  
- [ ] Tous les GWT **validés** en Review  
- [ ] PR **squash** mergée, branche supprimée  
- [ ] Board **Done**, notes Review/Rétro à jour

---

## 8) Board & WIP (exécution)
- Colonne **Review ≤ 2** : priorité **finir** avant **commencer**.  
- **Pull, pas push** : on prend depuis la colonne précédente.  
- Chaque tâche a **1 owner** clair ; binômage possible si < 2 items “In-Progress”.

---

## 9) Erreurs fréquentes & correctifs
- ❌ Tâches > 0,5 j → **redécouper** (UI séparée des tests, etc.).  
- ❌ Pas de preuves → exiger **tests/captures** dans la PR.  
- ❌ Pas de lien aux critères → relier chaque tâche à **GWT-X**.  
- ❌ Commencer partout → **WIP limité**, focus Review/finish.  
- ❌ Refacto massif dans la même PR → isoler en PR dédiée.

---

## ⚡ Cheatsheet
```text
1) Lister critères (GWT) → 2) Découper en tâches ≤ 0,5 j
3) Lier chaque tâche à 1+ GWT → 4) Définir preuve (test/capture)
5) Ordonner (API→Tests→UI→Docs) → 6) Respecter WIP & DoD
````

## 📦 Livrables attendus

* Liste **tâches ≤ 0,5 j** liées aux **GWT**.
* **Preuves** prêtes (tests, captures, curl).
* Matrice **Tâche ↔ Critère** (table ou YAML) visible dans la PR/README.

