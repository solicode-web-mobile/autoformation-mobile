---
title: 4. Branches
layout: home
nav_order: 4
parent: 4.1. Git & GitFlow
permalink: /git-gitflow/strategie-branches/
code: 4.1.4
competence: C4
autoformation: "C4.1"
ua: "4.1.U2"
duree_h: 1.5
objectif: "D√©finir un GitFlow minimal (main/develop/feature/release/hotfix) avec r√®gles de merge et tags."
notions_nouvelles: ["Feature/Release/Hotfix", "Squash merge", "Back-merge", "SemVer", "Protections de branche"]
fil_rouge: "Cadre de livraison pour Blog/API et App Mobile"
livrable_chapitre: "Politique de branches + sch√©ma GitFlow dans CONTRIBUTING.md"
alimentation_prototype: "Flux PR stable pour incr√©ments N2"
alimentation_miniprojet: "Cycle release/hotfix document√© et tra√ßable N3"
---

# üìò 4.1.4 - Strat√©gie de branches

## üìí Glossaire minute
- **Branche stable** : branche prot√©g√©e, d√©ployable √† tout moment (`main`).
- **Branche d‚Äôint√©gration** : regroupe les features avant release (`develop`).
- **Feature branch** : d√©veloppement d‚Äôune fonctionnalit√© (`feature/...`).
- **Release branch** : pr√©paration d‚Äôune version (stabilisation, notes) (`release/...`).
- **Hotfix branch** : correctif urgent en prod (`hotfix/...`).

---

## ‚úÖ Objectif
D√©finir un **GitFlow minimal, clair et reproductible** pour organiser le travail, limiter les conflits et **livrer en confiance**.

---

## üß≠ R√¥les des branches

| Branche     | R√¥le | Source | Cible (PR) | R√®gles cl√©s |
|---|---|---|---|---|
| `main`      | Prod stable/tagu√©e | ‚Äî | ‚Äî | prot√©g√©e, tags `vX.Y.Z` |
| `develop`   | Int√©gration | `main` (init) | ‚Äî | jamais casser les tests |
| `feature/*` | Dev d‚Äôune US | `develop` | `develop` | petits commits, rebase r√©gulier |
| `release/*` | Stabilisation | `develop` | `main` (+ tag) et `develop` | corrections mineures, docs |
| `hotfix/*`  | Fix urgent prod | `main` | `main` (+ tag) et `develop` | port√©e minimale, test√©e |

---

## üß± Nommage & conventions

**Pattern recommand√©**
- `feature/<ticket-id>-<slug>` ‚Üí `feature/123-filtrer-projets`
- `release/<version>` ‚Üí `release/1.2.0`
- `hotfix/<slug>` ‚Üí `hotfix/fix-500-login`

**Regex (id√©e)**
```

feature/\d+-\[a-z0-9-]+|release/\d+.\d+.\d+|hotfix/\[a-z0-9-]+

````

**Exemples**
```bash
git checkout -b feature/456-pagination-notes
git checkout -b release/1.2.0
git checkout -b hotfix/fix-500-login
````

---

## üîÅ Flux standard (issue ‚Üí feature ‚Üí PR ‚Üí merge)

1. Cr√©er une issue (US) avec crit√®res d‚Äôacceptation.
2. Cr√©er la branche depuis `develop`.
3. Commits **Conventional Commits**.
4. Rebase r√©gulier sur `origin/develop`.
5. Ouvrir une **PR vers `develop`** (checklist + captures).
6. CI verte, review 1+ approuv√©es, **squash merge**.
7. Supprimer la branche.

```bash
git checkout -b feature/321-recherche-filtrage develop
git pull --rebase origin develop
git commit -m "feat(search): filtres q, tag, sort"
git push -u origin feature/321-recherche-filtrage
# Ouvrir PR ‚Üí develop ‚Üí squash merge
```

---

## üöÄ Release : geler, taguer, livrer

1. Geler `develop` ‚Üí cr√©er `release/x.y.z`.
2. Corriger mineur (versioning, notes, doc).
3. **PR release ‚Üí main**, tag `vX.Y.Z`, d√©ployer.
4. **Back-merge** `main` et `release` ‚Üí `develop`.

```bash
git checkout -b release/1.2.0 develop
# fix mineurs, bump version, CHANGELOG
git push -u origin release/1.2.0

# PR release/1.2.0 -> main  (squash ou merge)
# Tag
git checkout main
git pull
git tag v1.2.0
git push --tags

# Back-merge vers develop
git checkout develop
git pull
git merge --no-ff main
git push
```

---

## ‚ö° Hotfix : corriger la prod rapidement

1. Brancher depuis `main` ‚Üí `hotfix/...`.
2. Correction minimale + tests.
3. **PR hotfix ‚Üí main**, tag `vX.Y.Z+1`, d√©ploiement.
4. **Back-merge** hotfix vers `develop`.

```bash
git checkout -b hotfix/fix-500-login main
# commit: fix(...)
git push -u origin hotfix/fix-500-login

# PR hotfix -> main, merger puis tag
git checkout main && git pull
git tag v1.2.1 && git push --tags

# Back-merge pour garder develop align√©
git checkout develop && git pull
git merge --no-ff main
git push
```

---

## üîÄ Rebase vs merge (ligne d‚Äôhistorique)

* **Feature** : `git pull --rebase origin develop` (histoires propres).
* **PR** : **squash merge** par d√©faut (1 commit = 1 PR).
* **Synchronisation** : back-merge `main` ‚Üí `develop` √† chaque release/hotfix.

```bash
# Sur la feature branch
git fetch origin
git rebase origin/develop
# conflits r√©solus ‚Üí continuer
git push --force-with-lease
```

---

## üè∑Ô∏è Versioning & tags

* **SemVer** : `MAJEUR.MINOR.PATCH` ‚Üí `1.2.3`
* **Tag** : sur `main` uniquement, **apr√®s** release/hotfix.
* **Changelog** : bas√© commits conventionnels (outil conseill√©).

```bash
git tag v2.0.0
git push origin v2.0.0
```

---

## üîí Protections & CI (recommand√©es)

* `main` et `develop` **prot√©g√©es** : pas de push direct.
* **PR obligatoire**, **1 review min**, **CI verte**.
* **Squash merge only**, supprimer branche apr√®s merge.
* **Status checks** : tests + lint doivent passer.

---

## üó∫Ô∏è Diagramme (vue d‚Äôensemble)

```mermaid
gitGraph
   commit id: "init"
   branch develop
   commit id: "dev-1"
   branch feature/321-recherche
   commit id: "feat"
   checkout develop
   commit id: "dev-2"
   checkout feature/321-recherche
   commit id: "tests"
   checkout develop
   merge feature/321-recherche tag: "PR squash"
   branch release/1.2.0
   commit id: "changelog"
   checkout main
   merge release/1.2.0 tag: "v1.2.0"
   checkout develop
   merge main tag: "back-merge"
   checkout main
   branch hotfix/fix-500
   commit id: "fix-500"
   merge hotfix/fix-500 tag: "v1.2.1"
   checkout develop
   merge main tag: "back-merge"
```

---

## üì¶ Livrables attendus

* Politique de **branches** document√©e dans `CONTRIBUTING.md`.
* R√®gles **PR/CI** (squash, review, checks) appliqu√©es.
* Tags **SemVer** cr√©√©s √† chaque release/hotfix.
* Processus de **back-merge** syst√©matique.

---

## ‚úÖ DoD ‚Äî Definition of Done

* [ ] Toutes les PR **feature ‚Üí develop** en **squash**.
* [ ] `release/x.y.z` cr√©√© pour chaque livraison.
* [ ] Tag `vX.Y.Z` sur `main` apr√®s merge.
* [ ] Hotfix **depuis `main`**, back-merge vers `develop`.
* [ ] Branch protections + CI actives.

---

## ‚ö° Cheatsheet

```bash
# Feature
git checkout -b feature/123-filtrer develop
git pull --rebase origin develop
# ... commits ...
git push -u origin feature/123-filtrer

# Release
git checkout -b release/1.3.0 develop
# ... fix mineurs ...
# PR -> main, tag
git tag v1.3.0 && git push --tags
git checkout develop && git merge --no-ff main && git push

# Hotfix
git checkout -b hotfix/fix-404 main
# ... fix ...
# PR -> main, tag v1.3.1
git checkout develop && git merge --no-ff main && git push
```
