---
title: 4. StratÃ©gie de branches 
permalink: /git-gitflow/strategie-branches/
layout: home
nav_order: 4
parent: 4.1. Git & GitFlow
---

# ğŸ“˜ 4.1.4 - StratÃ©gie de branches

## ğŸ“’ Glossaire minute
- **Branche stable** : branche protÃ©gÃ©e, dÃ©ployable Ã  tout moment (`main`).
- **Branche dâ€™intÃ©gration** : regroupe les features avant release (`develop`).
- **Feature branch** : dÃ©veloppement dâ€™une fonctionnalitÃ© (`feature/...`).
- **Release branch** : prÃ©paration dâ€™une version (stabilisation, notes) (`release/...`).
- **Hotfix branch** : correctif urgent en prod (`hotfix/...`).

---

## âœ… Objectif
DÃ©finir un **GitFlow minimal, clair et reproductible** pour organiser le travail, limiter les conflits et **livrer en confiance**.

---

## ğŸ§­ RÃ´les des branches

| Branche     | RÃ´le | Source | Cible (PR) | RÃ¨gles clÃ©s |
|---|---|---|---|---|
| `main`      | Prod stable/taguÃ©e | â€” | â€” | protÃ©gÃ©e, tags `vX.Y.Z` |
| `develop`   | IntÃ©gration | `main` (init) | â€” | jamais casser les tests |
| `feature/*` | Dev dâ€™une US | `develop` | `develop` | petits commits, rebase rÃ©gulier |
| `release/*` | Stabilisation | `develop` | `main` (+ tag) et `develop` | corrections mineures, docs |
| `hotfix/*`  | Fix urgent prod | `main` | `main` (+ tag) et `develop` | portÃ©e minimale, testÃ©e |

---

## ğŸ§± Nommage & conventions

**Pattern recommandÃ©**
- `feature/<ticket-id>-<slug>` â†’ `feature/123-filtrer-projets`
- `release/<version>` â†’ `release/1.2.0`
- `hotfix/<slug>` â†’ `hotfix/fix-500-login`

**Regex (idÃ©e)**
```

feature/\d+-\[a-z0-9-]+|release/\d+.\d+.\d+|hotfix/\[a-z0-9-]+

````

**Exemples**
```bash
git checkout -b feature/456-pagination-notes
git checkout -b release/1.2.0
git checkout -b hotfix/fix-500-login
````

---

## ğŸ” Flux standard (issue â†’ feature â†’ PR â†’ merge)

1. CrÃ©er une issue (US) avec critÃ¨res dâ€™acceptation.
2. CrÃ©er la branche depuis `develop`.
3. Commits **Conventional Commits**.
4. Rebase rÃ©gulier sur `origin/develop`.
5. Ouvrir une **PR vers `develop`** (checklist + captures).
6. CI verte, review 1+ approuvÃ©es, **squash merge**.
7. Supprimer la branche.

```bash
git checkout -b feature/321-recherche-filtrage develop
git pull --rebase origin develop
git commit -m "feat(search): filtres q, tag, sort"
git push -u origin feature/321-recherche-filtrage
# Ouvrir PR â†’ develop â†’ squash merge
```

---

## ğŸš€ Release : geler, taguer, livrer

1. Geler `develop` â†’ crÃ©er `release/x.y.z`.
2. Corriger mineur (versioning, notes, doc).
3. **PR release â†’ main**, tag `vX.Y.Z`, dÃ©ployer.
4. **Back-merge** `main` et `release` â†’ `develop`.

```bash
git checkout -b release/1.2.0 develop
# fix mineurs, bump version, CHANGELOG
git push -u origin release/1.2.0

# PR release/1.2.0 -> main  (squash ou merge)
# Tag
git checkout main
git pull
git tag v1.2.0
git push --tags

# Back-merge vers develop
git checkout develop
git pull
git merge --no-ff main
git push
```

---

## âš¡ Hotfix : corriger la prod rapidement

1. Brancher depuis `main` â†’ `hotfix/...`.
2. Correction minimale + tests.
3. **PR hotfix â†’ main**, tag `vX.Y.Z+1`, dÃ©ploiement.
4. **Back-merge** hotfix vers `develop`.

```bash
git checkout -b hotfix/fix-500-login main
# commit: fix(...)
git push -u origin hotfix/fix-500-login

# PR hotfix -> main, merger puis tag
git checkout main && git pull
git tag v1.2.1 && git push --tags

# Back-merge pour garder develop alignÃ©
git checkout develop && git pull
git merge --no-ff main
git push
```

---

## ğŸ”€ Rebase vs merge (ligne dâ€™historique)

* **Feature** : `git pull --rebase origin develop` (histoires propres).
* **PR** : **squash merge** par dÃ©faut (1 commit = 1 PR).
* **Synchronisation** : back-merge `main` â†’ `develop` Ã  chaque release/hotfix.

```bash
# Sur la feature branch
git fetch origin
git rebase origin/develop
# conflits rÃ©solus â†’ continuer
git push --force-with-lease
```

---

## ğŸ·ï¸ Versioning & tags

* **SemVer** : `MAJEUR.MINOR.PATCH` â†’ `1.2.3`
* **Tag** : sur `main` uniquement, **aprÃ¨s** release/hotfix.
* **Changelog** : basÃ© commits conventionnels (outil conseillÃ©).

```bash
git tag v2.0.0
git push origin v2.0.0
```

---

## ğŸ”’ Protections & CI (recommandÃ©es)

* `main` et `develop` **protÃ©gÃ©es** : pas de push direct.
* **PR obligatoire**, **1 review min**, **CI verte**.
* **Squash merge only**, supprimer branche aprÃ¨s merge.
* **Status checks** : tests + lint doivent passer.

---

## ğŸ—ºï¸ Diagramme (vue dâ€™ensemble)

```mermaid
gitGraph
   commit id: "init"
   branch develop
   commit id: "dev-1"
   branch feature/321-recherche
   commit id: "feat"
   checkout develop
   commit id: "dev-2"
   checkout feature/321-recherche
   commit id: "tests"
   checkout develop
   merge feature/321-recherche tag: "PR squash"
   branch release/1.2.0
   commit id: "changelog"
   checkout main
   merge release/1.2.0 tag: "v1.2.0"
   checkout develop
   merge main tag: "back-merge"
   checkout main
   branch hotfix/fix-500
   commit id: "fix-500"
   merge hotfix/fix-500 tag: "v1.2.1"
   checkout develop
   merge main tag: "back-merge"
```

---

## ğŸ“¦ Livrables attendus

* Politique de **branches** documentÃ©e dans `CONTRIBUTING.md`.
* RÃ¨gles **PR/CI** (squash, review, checks) appliquÃ©es.
* Tags **SemVer** crÃ©Ã©s Ã  chaque release/hotfix.
* Processus de **back-merge** systÃ©matique.

---

## âœ… DoD â€” Definition of Done

* [ ] Toutes les PR **feature â†’ develop** en **squash**.
* [ ] `release/x.y.z` crÃ©Ã© pour chaque livraison.
* [ ] Tag `vX.Y.Z` sur `main` aprÃ¨s merge.
* [ ] Hotfix **depuis `main`**, back-merge vers `develop`.
* [ ] Branch protections + CI actives.

---

## âš¡ Cheatsheet

```bash
# Feature
git checkout -b feature/123-filtrer develop
git pull --rebase origin develop
# ... commits ...
git push -u origin feature/123-filtrer

# Release
git checkout -b release/1.3.0 develop
# ... fix mineurs ...
# PR -> main, tag
git tag v1.3.0 && git push --tags
git checkout develop && git merge --no-ff main && git push

# Hotfix
git checkout -b hotfix/fix-404 main
# ... fix ...
# PR -> main, tag v1.3.1
git checkout develop && git merge --no-ff main && git push
```
