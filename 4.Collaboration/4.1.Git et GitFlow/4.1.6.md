---
title: 6. Sync propre
layout: home
nav_order: 6
parent: 4.1. Git & GitFlow
permalink: /git-gitflow/sync-propre/
code: 4.1.6
competence: C4
autoformation: "C4.1"
ua: "4.1.U3"
duree_h: 1.5
objectif: "Aligner régulièrement les branches via rebase et pousser en sécurité."
notions_nouvelles: ["Rebase", "Fast-forward", "force-with-lease", ".gitattributes (LF)", "Back-merge"]
fil_rouge: "Moins de conflits sur les features Blog/API et Mobile"
livrable_chapitre: "Config Git (pull.rebase, autoStash, prune), .gitattributes, procédure rebase + push sécurisé"
alimentation_prototype: "Historique linéaire pour reviews rapides N2"
alimentation_miniprojet: "Synchronisation fiable pendant sprints N3"
---


# 📘 4.1.6 - Sync propre

## 📒 Glossaire minute
- **Rebase** : réapplique tes commits au-dessus d’une base à jour (historique linéaire).
- **FF / fast-forward** : avance direct de pointeur sans commit de merge.
- **force-with-lease** : pousse forcée **sécurisée** (refuse d’écraser du travail distant).

---

## ✅ Objectif
Conserver un **historique lisible et linéaire**, réduire les conflits et garantir que `feature/*` reste alignée avec `develop` (**avant** push/PR et **pendant** la review).

---

## 🔧 Pré-requis (config 1 fois)
```bash
git config --global pull.rebase true          # git pull = rebase
git config --global rebase.autoStash true     # stash auto avant rebase
git config --global fetch.prune true          # nettoie branches distantes supprimées
git config --global push.default simple
````

---

## 🔁 Rituel de synchronisation (quotidien)

### 1) Mettre `develop` et `main` à jour en local

```bash
git fetch origin
git checkout develop && git pull --ff-only
git checkout main    && git pull --ff-only
```

### 2) Rebaser ta feature sur `develop` à jour

```bash
git checkout feature/321-recherche-filtrage
git fetch origin
git rebase origin/develop
# résoudre conflits si besoin...
git push --force-with-lease
```

### 3) Avant d’ouvrir / mettre à jour une PR

* Rebase **obligatoire** si `develop` a bougé.
* Relancer la **CI** après push.

---

## 🧩 Résolution de conflits (durant rebase)

```bash
# voir fichiers en conflit
git status

# éditer, puis marquer comme résolu
git add path/to/file

# continuer le rebase
git rebase --continue

# abandonner si nécessaire
git rebase --abort
```

> Astuce : résous **petit à petit** (par fichier), lance les tests localement.

---

## 🔀 Quand utiliser merge au lieu de rebase ?

* **Back-merge** après release/hotfix : garder la trace explicite.

```bash
# après avoir tagué sur main (release/hotfix)
git checkout develop
git pull
git merge --no-ff main
git push
```

---

## 🧱 Normaliser les fins de ligne (LF) — éviter les faux diffs

`.gitattributes` (extrait recommandé) :

```gitattributes
* text=auto eol=lf
*.bat text eol=crlf
*.sh  text eol=lf
```

---

## 🧪 CI et PR (bonnes pratiques)

* **PR → develop**, **squash merge** par défaut.
* **CI verte** (lint + tests) **après** rebase.
* Supprimer la branche distante après merge.

---

## 📝 Cheatsheet

```bash
# Mettre develop à jour
git fetch origin
git checkout develop && git pull --ff-only

# Rebaser la feature
git checkout feature/321-recherche-filtrage
git rebase origin/develop
git push --force-with-lease

# Corriger un rebase difficile
git rebase --abort

# Back-merge après release/hotfix
git checkout develop
git merge --no-ff main
git push
```

---

## 📦 Livrables attendus

* `develop` et `main` **jamais en retard** localement.
* Feature branches **rebasées** avant tout push/PR.
* `.gitattributes` pour LF/CRLF (si équipe multi-OS).

---

## ✅ DoD — Definition of Done

* [ ] `git pull` sur `develop/main` **FF only** (pas de merge commit parasite).
* [ ] Feature branch **alignée** via `git rebase origin/develop`.
* [ ] Push effectué avec **`--force-with-lease`** (pas de perte distante).
* [ ] CI **verte** après rebase, PR prête pour squash merge.
