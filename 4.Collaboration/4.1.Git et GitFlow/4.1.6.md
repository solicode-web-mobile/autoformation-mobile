---
title: 6. Sync propre
layout: home
nav_order: 6
parent: 4.1. Git & GitFlow
permalink: /git-gitflow/sync-propre/
code: 4.1.6
competence: C4
autoformation: "C4.1"
ua: "4.1.U3"
duree_h: 1.5
objectif: "Aligner rÃ©guliÃ¨rement les branches via rebase et pousser en sÃ©curitÃ©."
notions_nouvelles: ["Rebase", "Fast-forward", "force-with-lease", ".gitattributes (LF)", "Back-merge"]
fil_rouge: "Moins de conflits sur les features Blog/API et Mobile"
livrable_chapitre: "Config Git (pull.rebase, autoStash, prune), .gitattributes, procÃ©dure rebase + push sÃ©curisÃ©"
alimentation_prototype: "Historique linÃ©aire pour reviews rapides N2"
alimentation_miniprojet: "Synchronisation fiable pendant sprints N3"
---


# ğŸ“˜ 4.1.6 - Sync propre

## ğŸ“’ Glossaire minute
- **Rebase** : rÃ©applique tes commits au-dessus dâ€™une base Ã  jour (historique linÃ©aire).
- **FF / fast-forward** : avance direct de pointeur sans commit de merge.
- **force-with-lease** : pousse forcÃ©e **sÃ©curisÃ©e** (refuse dâ€™Ã©craser du travail distant).

---

## âœ… Objectif
Conserver un **historique lisible et linÃ©aire**, rÃ©duire les conflits et garantir que `feature/*` reste alignÃ©e avec `develop` (**avant** push/PR et **pendant** la review).

---

## ğŸ”§ PrÃ©-requis (config 1 fois)
```bash
git config --global pull.rebase true          # git pull = rebase
git config --global rebase.autoStash true     # stash auto avant rebase
git config --global fetch.prune true          # nettoie branches distantes supprimÃ©es
git config --global push.default simple
````

---

## ğŸ” Rituel de synchronisation (quotidien)

### 1) Mettre `develop` et `main` Ã  jour en local

```bash
git fetch origin
git checkout develop && git pull --ff-only
git checkout main    && git pull --ff-only
```

### 2) Rebaser ta feature sur `develop` Ã  jour

```bash
git checkout feature/321-recherche-filtrage
git fetch origin
git rebase origin/develop
# rÃ©soudre conflits si besoin...
git push --force-with-lease
```

### 3) Avant dâ€™ouvrir / mettre Ã  jour une PR

* Rebase **obligatoire** si `develop` a bougÃ©.
* Relancer la **CI** aprÃ¨s push.

---

## ğŸ§© RÃ©solution de conflits (durant rebase)

```bash
# voir fichiers en conflit
git status

# Ã©diter, puis marquer comme rÃ©solu
git add path/to/file

# continuer le rebase
git rebase --continue

# abandonner si nÃ©cessaire
git rebase --abort
```

> Astuce : rÃ©sous **petit Ã  petit** (par fichier), lance les tests localement.

---

## ğŸ”€ Quand utiliser merge au lieu de rebase ?

* **Back-merge** aprÃ¨s release/hotfix : garder la trace explicite.

```bash
# aprÃ¨s avoir taguÃ© sur main (release/hotfix)
git checkout develop
git pull
git merge --no-ff main
git push
```

---

## ğŸ§± Normaliser les fins de ligne (LF) â€” Ã©viter les faux diffs

`.gitattributes` (extrait recommandÃ©) :

```gitattributes
* text=auto eol=lf
*.bat text eol=crlf
*.sh  text eol=lf
```

---

## ğŸ§ª CI et PR (bonnes pratiques)

* **PR â†’ develop**, **squash merge** par dÃ©faut.
* **CI verte** (lint + tests) **aprÃ¨s** rebase.
* Supprimer la branche distante aprÃ¨s merge.

---

## ğŸ“ Cheatsheet

```bash
# Mettre develop Ã  jour
git fetch origin
git checkout develop && git pull --ff-only

# Rebaser la feature
git checkout feature/321-recherche-filtrage
git rebase origin/develop
git push --force-with-lease

# Corriger un rebase difficile
git rebase --abort

# Back-merge aprÃ¨s release/hotfix
git checkout develop
git merge --no-ff main
git push
```

---

## ğŸ“¦ Livrables attendus

* `develop` et `main` **jamais en retard** localement.
* Feature branches **rebasÃ©es** avant tout push/PR.
* `.gitattributes` pour LF/CRLF (si Ã©quipe multi-OS).

---

## âœ… DoD â€” Definition of Done

* [ ] `git pull` sur `develop/main` **FF only** (pas de merge commit parasite).
* [ ] Feature branch **alignÃ©e** via `git rebase origin/develop`.
* [ ] Push effectuÃ© avec **`--force-with-lease`** (pas de perte distante).
* [ ] CI **verte** aprÃ¨s rebase, PR prÃªte pour squash merge.
