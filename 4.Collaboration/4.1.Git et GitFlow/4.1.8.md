---
title: 8. Revue de code
permalink: /git-gitflow/revue-code/
layout: home
nav_order: 8
parent: 4.1. Git & GitFlow
---

# ğŸ“˜ 4.1.8 - Revue de code

## ğŸ“’ Glossaire minute
- **Reviewer** : personne qui relit la PR, vÃ©rifie forme/fond, approuve ou demande des changements.
- **Blocking / Non-blocking** : remarque **bloquante** (Ã  corriger avant merge) vs **suggestion** (amÃ©lioration).
- **Suggestion GitHub** : bloc de code proposÃ© que lâ€™auteur peut **appliquer en 1 clic**.
- **DoD (Definition of Done)** : critÃ¨res pour considÃ©rer la PR prÃªte au **merge**.

---

## âœ… Objectif
Conduire des **revues rapides, utiles et respectueuses** : des **commentaires factuels**, des **suggestions appliquables**, et un **process DoD** clair pour dÃ©cider *Approve / Request changes / Comment*.

---

## ğŸ”§ PrÃ©-requis
- PR **petite** et **focus** (â‰¤ 300 lignes modifiÃ©es, â‰¤ 5â€“7 fichiers).
- **CI verte** (lint/tests) & description PR complÃ¨te (captures/notes techniques).
- PR **rebasÃ©e** sur `origin/develop` (voir 4.1.6).

---

## ğŸ‘¥ RÃ´les & responsabilitÃ©s

**Auteur**
- PrÃ©pare une PR **lisible** (template rempli, captures, tests).
- RÃ©pond Ã  **chaque fil** de commentaires, pousse des commits ciblÃ©s.
- Convertit en **Ready for review** quand câ€™est stable.

**Reviewer**
- Lit le **contexte** (issue, objectifs, scope).
- VÃ©rifie **impact** (fonctionnel, sÃ©curitÃ©, perfs, lisibilitÃ©, testabilitÃ©).
- Laisse des **commentaires factuels**, propose des **suggestions**,
  dÃ©cide **Approve / Request changes / Comment**.

---

## ğŸ§­ Process de review (pas Ã  pas)

1) **Lire la PR** : description, issue liÃ©e, captures, fichiers modifiÃ©s.  
2) **Parcourir par couches** :  
   - Public API / Contrats / SchÃ©ma DB,  
   - Flux mÃ©tier / contrÃ´leurs / services,  
   - ImplÃ©mentation / vues / assets,  
   - Tests & docs.  
3) **Commenter** : commencer par **non-blocking**, marquer **blocking** quand nÃ©cessaire.  
4) **Valider** :  
   - **Approve** si OK,  
   - **Request changes** si corrections indispensables,  
   - **Comment** pour feedback non bloquant.  
5) **Boucle** : lâ€™auteur pousse, vous relisez uniquement les **diffs nouveaux**.

---

## ğŸ§± CatÃ©gories de vÃ©rification

- **Fonctionnel** : la PR respecte lâ€™issue & critÃ¨res GWT ? cas limites ?  
- **SÃ©curitÃ©** : autorisations, validation dâ€™entrÃ©es, exposition de donnÃ©es, CSRF.  
- **Perfs** : N+1, indexes, tailles de rÃ©ponses, caches.  
- **LisibilitÃ©** : noms clairs, duplication, fonctions trop longues, dead code.  
- **Tests** : cas heureux + erreurs, DB isolÃ©e (`.env.testing`), assertions utiles.  
- **DX** : logs, messages dâ€™erreur, doc/README mis Ã  jour.  

---

## ğŸ’¬ Commentaires factuels (exemples)

**âœ… Bien**
> *Factuel + pourquoi + action claire*  
> Â« `ArticleController@index` dÃ©clenche 3 requÃªtes N+1 (tags, author, comments).  
> Proposer `with(['tags','author','comments'])` ou un `Resource` pour paginer les relations. Â» *(Blocking)*

**âš ï¸ Ã€ Ã©viter**
> Â« Pas clair. Â» / Â« Mauvais code. Â» *(jugement flou, non actionnable)*

---

## ğŸ’¡ Suggestions applicables (GitHub)

Utilisez les **suggestions** pour les retouches triviales (import, naming, guard clause).

```suggestion
if (! $user->isActive()) {
    abort(403);
}
````

```suggestion
// PrÃ©fÃ©rer l'early return pour Ã©viter l'indentation profonde
if (! $request->filled('q')) {
    return $query;
}
```

---

## ğŸ·ï¸ SÃ©vÃ©ritÃ© & dÃ©cision

* **Blocking** (Request changes) : bug, faille, rupture contrat API, dette majeure.
* **Major non-blocking** : amÃ©lioration importante mais merge possible.
* **Nit** : forme (formatage que les outils peuvent corriger).

---

## ğŸ§ª Checklists de review

**Checklist Reviewer**

* [ ] Scope conforme Ã  lâ€™issue, **pas de creep**
* [ ] **CI verte**, migrations rÃ©versibles (`down`)
* [ ] Pas de secret / clÃ© / dump dans le code
* [ ] **N+1** Ã©vitÃ© / index ajoutÃ©s si besoin
* [ ] **Tests** pertinents (succÃ¨s/erreur)
* [ ] **Nommer** clairement (mÃ©thodes, variables, commits)
* [ ] **Docs/README** mis Ã  jour si impact

**Checklist Auteur (avant re-review)**

* [ ] Chaque fil commentÃ© / rÃ©solu
* [ ] Commits **petits** et **propres** (Conventional)
* [ ] Rebase sur `origin/develop` + push `--force-with-lease`
* [ ] PR relue en local + tests OK

---

## ğŸ§­ ModÃ¨les de rÃ©ponses

**Approve**

```md
âœ… LGTM. Couverture tests OK, perfs contrÃ´lÃ©es. Merci !
```

**Request changes**

```md
â— Bloquant : endpoint `/api/articles` expose `email` en clair.
Action : masquer via Resource + test HTTP 200/403.
```

**Comment (non-blocking)**

```md
ğŸ’¡ Suggestion : extraire `FilterBuilder` pour isoler la logique de requÃªtes.
```

---

## âš™ï¸ Outils & configuration utiles

**CODEOWNERS** (auto-assignation reviewers)

```
# Exemples
/resources/views/   @ui-team
/app/Http/          @backend-team
```

**Rappels CI requis**

* Status checks : `lint`, `tests` **obligatoires** avant merge.
* Merge policy : **Squash** + suppression de branche.

---

## ğŸ§° GitHub CLI (review rapide)

```bash
# Voir diff de la PR
gh pr diff 123

# Laisser une review "comment"
gh pr review 123 --comment -b "Deux suggestions non-bloquantes."

# Demander des changements (blocking)
gh pr review 123 --request-changes -b "Corriger N+1 + test 403 manquant."

# Approuver
gh pr review 123 --approve
```

---

## ğŸ“¦ Livrables attendus

* Fils de discussion **clairs**, chacun avec **action** et **statut**.
* Suggestions utilisÃ©es pour les retouches triviales.
* DÃ©cision **Approve / Request changes / Comment** documentÃ©e.

---

## âœ… DoD â€” Definition of Done (review)

* [ ] Tous les **bloquants rÃ©solus** et re-testÃ©s.
* [ ] **CI verte** aprÃ¨s derniers commits.
* [ ] Au moins **1 approbation** (ou owners requis).
* [ ] PR prÃªte pour **squash merge** + branche supprimÃ©e.

---

## ğŸ©¹ Erreurs frÃ©quentes & correctifs

* âŒ *Bike-shedding* â†’ laisser **Prettier/Pint** trancher la forme.
* âŒ PR trop large â†’ **scinder** par sujets.
* âŒ Conflits tardifs â†’ rebase **rÃ©gulier** pendant la review.
* âŒ Ton agressif â†’ **factuel**, proposer une **alternative**.
* âŒ Manque de tests â†’ exiger **cas dâ€™erreur** + succÃ¨s.

---
