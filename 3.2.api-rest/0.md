---
title: 3.2. API REST & Normalisation
layout: home
nav_order: 5
permalink: /api-rest/introduction/
---

# 📘 Chapitre 3.2.0 — Introduction à l’API REST & Normalisation

## 📒 Glossaire minute
- **API REST** : interface d’accès aux données via **HTTP** (GET/POST/PUT/DELETE) en **JSON**.  
- **Pagination** : découpage en pages (`?page=2`).  
- **Filtre** : sélection par critères (`?q=laravel&tag=PHP`).  
- **Tri** : ordre des résultats (`?sort=-published_at`).  
- **Resource / ResourceCollection** : classes Laravel pour **formater** les réponses API.  
- **Contrat API** : spécification stable (endpoints, schémas JSON, codes) partagée avec le Mobile.  

---

## 🎯 Objectifs pédagogiques
- Exposer une **API propre** pour `articles` (liste + détail).  
- Ajouter **pagination**, **filtres** et **tri**.  
- Normaliser la structure avec **Resource** / **ResourceCollection**.  
- Définir un **contrat minimal** et le documenter (Postman/Insomnia).  

---

## ✅ Pré-requis
- **C3.0** (PHP/POO, JSON, Composer).  
- **C3.1** (MVC, migrations/seeders, CRUD Article).  

---

## 🗺️ Plan de l’autoformation
**UA 3.2.U1 — API Laravel (base)**  
- Chapitre 3.2.1 : Routes API & JSON  
- Chapitre 3.2.2 : Pagination & filtres  

**UA 3.2.U2 — Normalisation & contrat**  
- Chapitre 3.2.3 : `Resource` & `ResourceCollection`  
- Chapitre 3.2.4 : Contrat API minimal + documentation  

---

## 🔌 Portée fonctionnelle (fil rouge)
- **GET `/api/articles`** → liste paginée, filtrable, triable.  
- **GET `/api/articles/{id}`** → détail d’un article.  

---

## 📦 Structure JSON attendue

### 1) Liste
```json
{
  "data": [
    {
      "id": 12,
      "title": "Pagination & filtres",
      "slug": "pagination-filtres",
      "excerpt": "Résumé court…",
      "author": "Sara",
      "published_at": "2025-08-20T10:23:00Z",
      "tags": ["Laravel", "MySQL"]
    }
  ],
  "meta": {
    "page": 1,
    "per_page": 10,
    "total": 42,
    "sort": "-published_at",
    "filters": {"q": "eloquent","tag": "PHP"}
  },
  "links": {
    "self": ".../api/articles?page=1",
    "next": ".../api/articles?page=2",
    "prev": null
  }
}
````

### 2) Détail

```json
{
  "data": {
    "id": 12,
    "title": "Pagination & filtres",
    "slug": "pagination-filtres",
    "excerpt": "Résumé court…",
    "content": "Texte complet…",
    "author": "Sara",
    "published_at": "2025-08-20T10:23:00Z",
    "tags": ["Laravel", "MySQL"]
  }
}
```

### 3) Erreur

```json
{ "message": "Article not found." }
```

---

## 🧩 Découpage technique

* Routes dans `routes/api.php`.
* Contrôleurs API séparés.
* Resources Laravel (`ArticleResource`).
* Query scopes pour filtres/tri.
* Tests pour valider pagination + erreurs.

---

## 🧪 Critères de réussite

* `/api/articles` renvoie 200 avec `data[]`, `meta`, `links`.
* Filtres supportés : `q`, `tag`, `sort`.
* `/api/articles/{id}` renvoie 404 cohérent si absent.
* Structure JSON **stable** et **documentée**.

---

## 📑 Livrables attendus

1. Endpoints fonctionnels.
2. `ArticleResource` & `ResourceCollection`.
3. Collection Postman/Insomnia.
4. Mini README API.

---

## 🧭 Bonnes pratiques

* **Toujours** renvoyer `data`, `meta`, `links`.
* Centraliser le format dans `Resource`.
* Versionner l’API (`/api/v1`).
* Documenter les codes d’état (200/404/422/500).

---

## 🧰 Exercice (N1 – Imitation)

* Créer `/api/articles` avec pagination (10/page).
* Supporter `?q=` et `?sort=`.
* Exporter une collection Postman avec 2 requêtes.

---

## 🧾 Résumé

* L’API doit être **lisible, stable, normalisée**.
* Laravel `Resource` garantit un format cohérent.
* Un **contrat documenté** facilite l’intégration Mobile.

