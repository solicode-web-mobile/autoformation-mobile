{% assign siblings = site.pages | where: "parent", page.parent | sort: "nav_order" %}
{% assign index = nil %}

{% for p in siblings %}
  {% if p.url == page.url %}
    {% assign index = forloop.index0 %}
  {% endif %}
{% endfor %}

{% if index != nil %}
  {% assign prev_index = index | minus: 1 %}
  {% assign next_index = index | plus: 1 %}

  <nav class="chapter-nav" role="navigation" aria-label="Navigation du chapitre">
    {% if prev_index >= 0 %}
      {% assign prev = siblings[prev_index] %}
      <a class="chapter-link prev" href="{{ prev.url | relative_url }}" aria-label="Chapitre précédent : {{ prev.title }}">
        {{ prev.title }}
      </a>
    {% endif %}

    {% if next_index < siblings.size %}
      {% assign next = siblings[next_index] %}
      <a class="chapter-link next" href="{{ next.url | relative_url }}" aria-label="Chapitre suivant : {{ next.title }}">
        {{ next.title }}
      </a>
    {% endif %}
  </nav>
{% endif %}
